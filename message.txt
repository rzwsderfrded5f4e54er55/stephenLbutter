// ==UserScript==
// @name         64 -Ferris
// @author       Ferris
// @description  Have fun
// @version      3
// @match        *://*.moomoo.io/*
// @run-at       document_idle
// @grant        none
// ==/UserScript==

// press "p" if pathfind || autoplace breaks goes crazy.
// to change preset settings write "/help" in chat box.
// don't be a pussy  and camp with this mod.
// any bug report to "xferrisx" <-- my discord & don't report to XJeorge.
// honestly have fun and if you skid my mod u really really fucking GAY.

let e=[],t=(Date.now(),new Image,!0),i=(console.log,"127.0.0.1"==window.location.hostname),a=!1,n=!1;var s=!0,l=!0,o=!0,r=!1,c=!1,d=!0,h="spammer",p=!0,u=0;function m(e){return document.getElementById(e)}setInterval((()=>{u>359?u=0:(u++,`hsla(${u}, 100%, 50%, 30)`)}),0);let f=new(function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/bin/",i(i.s=0)}([function(e,t,i){var a={},n=i(1),s=i(2),l=i(3);e.exports=a;var o=1;a.js=function(){var e,t,i,r=1.4,c=!1,d={},h={},p={},u={},m=!0,f={},g=[],w=Number.MAX_VALUE,y=!1;this.setAcceptableTiles=function(e){e instanceof Array?i=e:!isNaN(parseFloat(e))&&isFinite(e)&&(i=[e])},this.enableSync=function(){c=!0},this.disableSync=function(){c=!1},this.enableDiagonals=function(){y=!0},this.disableDiagonals=function(){y=!1},this.setGrid=function(t){e=t;for(var i=0;i<e.length;i++)for(var a=0;a<e[0].length;a++)h[e[i][a]]||(h[e[i][a]]=1)},this.setTileCost=function(e,t){h[e]=t},this.setAdditionalPointCost=function(e,t,i){void 0===p[t]&&(p[t]={}),p[t][e]=i},this.removeAdditionalPointCost=function(e,t){void 0!==p[t]&&delete p[t][e]},this.removeAllAdditionalPointCosts=function(){p={}},this.setDirectionalCondition=function(e,t,i){void 0===u[t]&&(u[t]={}),u[t][e]=i},this.removeAllDirectionalConditions=function(){u={}},this.setIterationsPerCalculation=function(e){w=e},this.avoidAdditionalPoint=function(e,t){void 0===d[t]&&(d[t]={}),d[t][e]=1},this.stopAvoidingAdditionalPoint=function(e,t){void 0!==d[t]&&delete d[t][e]},this.enableCornerCutting=function(){m=!0},this.disableCornerCutting=function(){m=!1},this.stopAvoidingAllAdditionalPoints=function(){d={}},this.findPath=function(t,a,s,r,d){function h(e){c?d(e):setTimeout((function(){d(e)}))}if(void 0===i)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===e)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(t<0||a<0||s<0||r<0||t>e[0].length-1||a>e.length-1||s>e[0].length-1||r>e.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(t!==s||a!==r){for(var p=e[r][s],u=!1,m=0;m<i.length;m++)if(p===i[m]){u=!0;break}if(!1!==u){var w=new n;return w.openList=new l((function(e,t){return e.bestGuessDistance()-t.bestGuessDistance()})),w.isDoneCalculating=!1,w.nodeHash={},w.startX=t,w.startY=a,w.endX=s,w.endY=r,w.callback=h,w.openList.push(T(w,w.startX,w.startY,null,1)),r=o++,f[r]=w,g.push(r),r}h(null)}else h([])},this.cancelPath=function(e){return e in f&&(delete f[e],!0)},this.calculate=function(){if(0!==g.length&&void 0!==e&&void 0!==i)for(t=0;t<w;t++){if(0===g.length)return;c&&(t=0);var a=g[0],n=f[a];if(void 0!==n)if(0!==n.openList.size()){var s=n.openList.pop();if(n.endX!==s.x||n.endY!==s.y)(s.list=0)<s.y&&x(n,s,0,-1,+v(s.x,s.y-1)),s.x<e[0].length-1&&x(n,s,1,0,+v(s.x+1,s.y)),s.y<e.length-1&&x(n,s,0,1,+v(s.x,s.y+1)),0<s.x&&x(n,s,-1,0,+v(s.x-1,s.y)),y&&(0<s.x&&0<s.y&&(m||b(e,i,s.x,s.y-1,s)&&b(e,i,s.x-1,s.y,s))&&x(n,s,-1,-1,r*v(s.x-1,s.y-1)),s.x<e[0].length-1&&s.y<e.length-1&&(m||b(e,i,s.x,s.y+1,s)&&b(e,i,s.x+1,s.y,s))&&x(n,s,1,1,r*v(s.x+1,s.y+1)),s.x<e[0].length-1&&0<s.y&&(m||b(e,i,s.x,s.y-1,s)&&b(e,i,s.x+1,s.y,s))&&x(n,s,1,-1,r*v(s.x+1,s.y-1)),0<s.x&&s.y<e.length-1&&(m||b(e,i,s.x,s.y+1,s)&&b(e,i,s.x-1,s.y,s))&&x(n,s,-1,1,r*v(s.x-1,s.y+1)));else{var l=[];l.push({x:s.x,y:s.y});for(var o=s.parent;null!=o;)l.push({x:o.x,y:o.y}),o=o.parent;l.reverse(),n.callback(l),delete f[a],g.shift()}}else n.callback(null),delete f[a],g.shift();else g.shift()}};var x=function(t,a,n,s,l){n=a.x+n,s=a.y+s,void 0!==d[s]&&void 0!==d[s][n]||!b(e,i,n,s,a)||(void 0===(s=T(t,n,s,a,l)).list?(s.list=1,t.openList.push(s)):a.costSoFar+l<s.costSoFar&&(s.costSoFar=a.costSoFar+l,s.parent=a,t.openList.updateItem(s)))},b=function(e,t,i,a,n){var s=u[a]&&u[a][i];if(s){var l=k(n.x-i,n.y-a);if(!function(){for(var e=0;e<s.length;e++)if(s[e]===l)return!0;return!1}())return!1}for(var o=0;o<t.length;o++)if(e[a][i]===t[o])return!0;return!1},k=function(e,t){if(0===e&&-1===t)return a.TOP;if(1===e&&-1===t)return a.TOP_RIGHT;if(1===e&&0===t)return a.RIGHT;if(1===e&&1===t)return a.BOTTOM_RIGHT;if(0===e&&1===t)return a.BOTTOM;if(-1===e&&1===t)return a.BOTTOM_LEFT;if(-1===e&&0===t)return a.LEFT;if(-1===e&&-1===t)return a.TOP_LEFT;throw new Error("These differences are not valid: "+e+", "+t)},v=function(t,i){return p[i]&&p[i][t]||h[e[i][t]]},T=function(e,t,i,a,n){if(void 0!==e.nodeHash[i]){if(void 0!==e.nodeHash[i][t])return e.nodeHash[i][t]}else e.nodeHash[i]={};var l=I(t,i,e.endX,e.endY);n=null!==a?a.costSoFar+n:0,l=new s(a,t,i,n,l);return e.nodeHash[i][t]=l},I=function(e,t,i,a){var n,s;return y?(n=Math.abs(e-i))<(s=Math.abs(t-a))?r*n+s:r*s+n:(n=Math.abs(e-i))+(s=Math.abs(t-a))}},a.TOP="TOP",a.TOP_RIGHT="TOP_RIGHT",a.RIGHT="RIGHT",a.BOTTOM_RIGHT="BOTTOM_RIGHT",a.BOTTOM="BOTTOM",a.BOTTOM_LEFT="BOTTOM_LEFT",a.LEFT="LEFT",a.TOP_LEFT="TOP_LEFT"},function(e,t){e.exports=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList}},function(e,t){e.exports=function(e,t,i,a,n){this.parent=e,this.x=t,this.y=i,this.costSoFar=a,this.simpleDistanceToTarget=n,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}}},function(e,t,i){e.exports=i(4)},function(e,t,i){var a,n;(function(){var i,s,l,o,r,c,d,h,p,u,m,f,g,w,y;function x(e){this.cmp=null!=e?e:s,this.nodes=[]}l=Math.floor,u=Math.min,s=function(e,t){return e<t?-1:t<e?1:0},p=function(e,t,i,a,n){var o;if(null==i&&(i=0),null==n&&(n=s),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)n(t,e[o=l((i+a)/2)])<0?a=o:i=o+1;return[].splice.apply(e,[i,i-i].concat(t)),t},c=function(e,t,i){return null==i&&(i=s),e.push(t),w(e,0,e.length-1,i)},r=function(e,t){var i,a;return null==t&&(t=s),i=e.pop(),e.length?(a=e[0],e[0]=i,y(e,0,t)):a=i,a},h=function(e,t,i){var a;return null==i&&(i=s),a=e[0],e[0]=t,y(e,0,i),a},d=function(e,t,i){var a;return null==i&&(i=s),e.length&&i(e[0],t)<0&&(t=(a=[e[0],t])[0],e[0]=a[1],y(e,0,i)),t},o=function(e,t){var i,a,n,o,r,c;for(null==t&&(t=s),r=[],a=0,n=(o=function(){c=[];for(var t=0,i=l(e.length/2);0<=i?t<i:i<t;0<=i?t++:t--)c.push(t);return c}.apply(this).reverse()).length;a<n;a++)i=o[a],r.push(y(e,i,t));return r},g=function(e,t,i){if(null==i&&(i=s),-1!==(t=e.indexOf(t)))return w(e,0,t,i),y(e,t,i)},m=function(e,t,i){var a,n,l,r,c;if(null==i&&(i=s),!(n=e.slice(0,t)).length)return n;for(o(n,i),l=0,r=(c=e.slice(t)).length;l<r;l++)a=c[l],d(n,a,i);return n.sort(i).reverse()},f=function(e,t,i){var a,n,l,c,d,h,m,f,g;if(null==i&&(i=s),10*t<=e.length){if(!(l=e.slice(0,t).sort(i)).length)return l;for(n=l[l.length-1],c=0,h=(m=e.slice(t)).length;c<h;c++)i(a=m[c],n)<0&&(p(l,a,0,null,i),l.pop(),n=l[l.length-1]);return l}for(o(e,i),g=[],d=0,f=u(t,e.length);0<=f?d<f:f<d;0<=f?++d:--d)g.push(r(e,i));return g},w=function(e,t,i,a){var n,l,o;for(null==a&&(a=s),n=e[i];t<i&&a(n,l=e[o=i-1>>1])<0;)e[i]=l,i=o;return e[i]=n},y=function(e,t,i){var a,n,l,o,r;for(null==i&&(i=s),n=e.length,l=e[r=t],a=2*t+1;a<n;)(o=a+1)<n&&!(i(e[a],e[o])<0)&&(a=o),e[t]=e[a],a=2*(t=a)+1;return e[t]=l,w(e,r,t,i)},x.push=c,x.pop=r,x.replace=h,x.pushpop=d,x.heapify=o,x.updateItem=g,x.nlargest=m,x.nsmallest=f,x.prototype.push=function(e){return c(this.nodes,e,this.cmp)},x.prototype.pop=function(){return r(this.nodes,this.cmp)},x.prototype.peek=function(){return this.nodes[0]},x.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},x.prototype.replace=function(e){return h(this.nodes,e,this.cmp)},x.prototype.pushpop=function(e){return d(this.nodes,e,this.cmp)},x.prototype.heapify=function(){return o(this.nodes,this.cmp)},x.prototype.updateItem=function(e){return g(this.nodes,e,this.cmp)},x.prototype.clear=function(){return this.nodes=[]},x.prototype.empty=function(){return 0===this.nodes.length},x.prototype.size=function(){return this.nodes.length},x.prototype.clone=function(){var e=new x;return e.nodes=this.nodes.slice(0),e},x.prototype.toArray=function(){return this.nodes.slice(0)},x.prototype.insert=x.prototype.push,x.prototype.top=x.prototype.peek,x.prototype.front=x.prototype.peek,x.prototype.has=x.prototype.contains,x.prototype.copy=x.prototype.clone,i=x,a=[],void 0===(n="function"==typeof(n=function(){return i})?n.apply(t,a):n)||(e.exports=n)}).call(this)}]).js);!function(u){let g={setup:()=>{let e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css?family=Ubuntu:700",e.type="text/css",document.body.append(e);let t=document.createElement("script");t.src="https://rawgit.com/kawanet/msgpack-lite/master/dist/msgpack.min.js",document.body.append(t)},main:()=>{if(!t)return;window.oncontextmenu=function(){return!1};let u=window.config;u.clientSendRate=0,u.serverUpdateRate=9,u.deathFadeout=0,u.isSandbox="sandbox.moomoo.io"==window.location.hostname,u.skinColors=["#bf8f54","#cbb091","#896c4b","#fadadc","#ececec","#c37373","#4c4c4c","#ecaff7","#738cc3","#8bc373","#91b2db"],u.weaponVariants=[{id:0,src:"",xp:0,val:1},{id:1,src:"_g",xp:3e3,val:1.1},{id:2,src:"_d",xp:7e3,val:1.18},{id:3,src:"_r",poison:!0,xp:12e3,val:1.18},{id:4,src:"_e",poison:!0,heal:!0,xp:24e3,val:1.18}];const g=document.getElementById("topInfoHolder"),w=document.createElement("div");w.id="shameCounter",w.className="resourceDisplay",w.style.backgroundImage="url(https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/53ac522c-664e-481b-a444-6faeaabb683f/daysil3-7fa3bbe5-cfb1-438d-a523-1ed8eeb57bde.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzUzYWM1MjJjLTY2NGUtNDgxYi1hNDQ0LTZmYWVhYWJiNjgzZlwvZGF5c2lsMy03ZmEzYmJlNS1jZmIxLTQzOGQtYTUyMy0xZWQ4ZWViNTdiZGUucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.2DJpx-xnR3dSyFqaG0hvZ4Vkdfq6W1It4Yjh7KrnuNA)",w.innerText="0",w.style.right="72px",w.style.marginTop="10px",w.style.color="#fff",w.style.fontSize="28px",w.style.backgroundColor="rgba(0, 0, 0, 0.25)",w.style.webkitBorderRadius="4px",w.style.mozBorderRadius="4px",w.style.borderRadius="4px",g.appendChild(w),u.anotherVisual=!1,u.useWebGl=!1,u.resetRender=!1,document.getElementById("enterGame").innerText="⇏ ‍ ‍ Fight ‍ ‍ ‍⇍",document.getElementById("enterGame").addEventListener("mouseenter",(function(){document.getElementById("enterGame").innerText="⇏ Fight ‍⇍"})),document.getElementById("enterGame").addEventListener("mouseleave",(function(){document.getElementById("enterGame").innerText="⇏ ‍  ‍  Fight ‍ ‍   ‍⇍"})),$("#itemInfoHolder").css({"text-align":"center",top:"25px",left:"440px",right:"350px","max-width":"350px"}),document.getElementById("chatBox").innerHTML="Hi :D",document.getElementById("gameName").innerHTML="",setTimeout((()=>{document.getElementById("gameName").innerHTML="★",setTimeout((()=>{document.getElementById("gameName").innerHTML="★B",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Ba",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Base",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Base_",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Base_6",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Base_64",setTimeout((()=>{document.getElementById("gameName").innerHTML="★Base_64★"}),120)}),120)}),120)}),120)}),120)}),120)}),120)}),120),document.getElementById("loadingText").innerHTML="Loading...",setTimeout((()=>{document.getElementById("loadingText").innerHTML="✅Successful✅"}),710),$("#gameName").css({color:"#87ceeb","text-shadow":"rgba(111, 5, 149, 1)","text-align":"center","font-size":"80px","margin-bottom":"20px"});let y,x=[];"undefined"!=typeof Storage&&(y=!0);let b=function(e,t){try{let a=JSON.parse((i=e,y?localStorage.getItem(i):null));return"object"==typeof a?t:a}catch(e){return alert("dieskid"),t}var i};let k={help:{desc:"Show Commands",action:function(e){for(let e in k)O("/"+e,k[e].desc,"lime",1)}},clear:{desc:"Clear Chats",action:function(e){H(),oi("Chat clear complete")}},autop:{desc:"autopushing",action:function(e){oi("autopush true")}},debug:{desc:"Debug Mod For Development",action:function(e){Di(ee),li.active=!1,oi("Debug Complete")}},PathfindTT:{desc:"Activate/disactivate Pathfind",action:function(e){1==s?(s=!1,oi("Pathfind set to false")):(s=!0,oi("Pathfind set to true"))}},AutopushTT:{desc:"Activate/disactivate Autopush",action:function(e){1==l?(l=!1,oi("Autopush set to false")):(l=!0,oi("Autopush set to true"))}},PlaceTT:{desc:"Activate/disactivate Place",action:function(e){1==o?(o=!1,oi("Place set to false")):(o=!0,oi("Place set to true"))}},GridsTT:{desc:"Activate/disactivate Grids (weirdo)",action:function(e){1==r?(r=!1,oi("Grids set to false")):(r=!0,oi("Grids set to true"))}},GrindTT:{desc:"Activate/disactivate Grind",action:function(e){1==c?(c=!1,oi("Grind set to false")):(c=!0,oi("Grind set to true"),window.startGrind())}},RenderTT:{desc:"Activate/disactivate Render placers",action:function(e){1==d?(d=!1,oi("Render set to false")):(d=!0,oi("Render set to true"))}},SmartpTT:{desc:"Change placer type",action:function(e){"smart"==h?(h="spammer",oi("Placer set to Spammer")):(h="smart",oi("Tracer set to Smart"))}},InstaTT:{desc:"Activate/disactivate Insta",action:function(e){0==p?(p=!0,oi("Insta = true")):(p=!1,oi("Insta = false"))}},bye:{desc:"Leave Game",action:function(e){window.leave()}}},v={killChat:!1,autoBuy:!1,autoBuyEquip:!0,autoq:!1,autoPush:!1,revTick:!1,spikeTick:!0,predictTick:!0,autoPlace:!0,autoReplace:!0,antiTrap:!0,slowOT:!1,attackDir:!1,noDir:!0,showDir:!1,autoRespawn:!1};window.removeConfigs=function(){for(let t in v)e=t,v[t],y&&localStorage.removeItem(e);var e};for(let e in v)v[e]=b(e,v[e]);window.changeMenu=function(){},window.debug=function(){},window.toggleNight=function(){},window.wasdMode=function(){},window.startGrind=function(){},window.connectFillBots=function(){},window.destroyFillBots=function(){},window.tryConnectBots=function(){},window.destroyBots=function(){},window.resBuild=function(){},window.toggleBotsCircle=function(){},window.toggleVisual=function(){},window.prepareUI=function(){},window.leave=function(){},window.ping=0;class T{constructor(e){this.element=e}add(e){this.element&&(this.element.innerHTML+=e)}newLine(e){let t="<br>";if(e>0){t="";for(let i=0;i<e;i++)t+="<br>"}this.add(t)}checkBox(e){let t='<input type = "checkbox"';e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.checked&&(t+=" checked"),e.onclick&&(t+=` onclick = ${e.onclick}`),t+=">",this.add(t)}text(e){let t='<input type = "text"';e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.size&&(t+=` size = ${e.size}`),e.maxLength&&(t+=` maxLength = ${e.maxLength}`),e.value&&(t+=` value = ${e.value}`),e.placeHolder&&(t+=` placeHolder = ${e.placeHolder.replaceAll(" ","&nbsp;")}`),t+=">",this.add(t)}select(e){let t="<select";e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),t+=">";for(let i in e.option)t+=`<option value = ${e.option[i].id}`,e.option[i].selected&&(t+=" selected"),t+=`>${i}</option>`;t+="</select>",this.add(t)}button(e){let t="<button";e.id&&(t+=` id = ${e.id}`),e.style&&(t+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(t+=` class = ${e.class}`),e.onclick&&(t+=` onclick = ${e.onclick}`),t+=">",e.innerHTML&&(t+=e.innerHTML),t+="</button>",this.add(t)}selectMenu(e){let t,i="<select";if(!e.id)return void alert("please put id skid");window[e.id+"Func"]=function(){},e.id&&(i+=` id = ${e.id}`),e.style&&(i+=` style = ${e.style.replaceAll(" ","")}`),e.class&&(i+=` class = ${e.class}`),i+=` onchange = window.${e.id+"Func"}()`,i+=">";let a=0;for(let t in e.menu)i+=`<option value = ${"option_"+t} id = ${"O_"+t}`,e.menu[t]&&(i+=" checked"),i+=` style = "color: ${e.menu[t]?"#000":"#fff"}; background: ${e.menu[t]?"#8ecc51":"#cc5151"};">${t}</option>`,a++;i+="</select>",this.add(i),a=0;for(let t in e.menu)window[t+"Func"]=function(){var i,a;e.menu[t]=!!m("check_"+t).checked,i=t,a=e.menu[t],y&&localStorage.setItem(i,a),m("O_"+t).style.color=e.menu[t]?"#000":"#fff",m("O_"+t).style.background=e.menu[t]?"#8ecc51":"#cc5151"},this.checkBox({id:"check_"+t,style:`display: ${0==a?"inline-block":"none"};`,class:"checkB",onclick:`window.${t+"Func"}()`,checked:e.menu[t]}),a++;t="check_"+m(e.id).value.split("_")[1],window[e.id+"Func"]=function(){m(t).style.display="none",t="check_"+m(e.id).value.split("_")[1],m(t).style.display="inline-block"}}}let I=new class{constructor(){this.element=null,this.action=null,this.divElement=null,this.startDiv=function(e,t){let i=document.createElement("div");e.id&&(i.id=e.id),e.style&&(i.style=e.style),e.class&&(i.className=e.class),this.element.appendChild(i),this.divElement=i;let a=new T(i);"function"==typeof t&&t(a)},this.addDiv=function(e,t){let i=document.createElement("div");e.id&&(i.id=e.id),e.style&&(i.style=e.style),e.class&&(i.className=e.class),e.appendID&&m(e.appendID).appendChild(i),this.divElement=i;let a=new T(i);"function"==typeof t&&t(a)}}set(e){this.element=m(e),this.action=new T(this.element)}resetHTML(e){this.element.innerHTML=""}setStyle(e){this.element.style=e}setCSS(e){this.action.add("<style>"+e+"</style>")}},S=document.createElement("div");S.id="nightMode",document.body.appendChild(S),I.set("nightMode"),I.setStyle("\n            display: none;\n            position: absolute;\n            pointer-events: none;\n            background-color: rgb(0, 0, 100);\n            opacity: 0;\n            top: 0%;\n            width: 3000%;\n            height: 3000%;\n            animation-duration: 5s;\n            animation-name: night2;\n            "),I.resetHTML(),I.setCSS("\n            @keyframes night1 {\n                from {opacity: 0;}\n                to {opacity: 0.35;}\n            }\n            @keyframes night2 {\n                from {opacity: 0.35;}\n                to {opacity: 0;}\n            }\n            ");let M=document.createElement("div");M.id="menuDiv",document.body.appendChild(M),I.set("menuDiv"),I.setStyle("\n            position: absolute;\n            left: 0px;\n            top: 3000px;\n            "),I.resetHTML(),I.setCSS('\n            .menuClass{\n                color: #fff;\n                font-size: 31px;\n                text-align: left;\n                padding: 10px;\n                padding-top: 7px;\n                padding-bottom: 5px;\n                width: 220px;\n                height: 500px;\n                background-color: rgba(0, 0, 0, 0.25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            .menuC {\n                display: none;\n                font-family: "Hammersmith One";\n                font-size: 12px;\n                max-height: 1000px;\n                overflow-y: scroll;\n                -webkit-touch-callout: none;\n                -webkit-user-select: none;\n                -khtml-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n            }\n            .menuB {\n                text-align: center;\n                background-color: rgb(25, 25, 25);\n                color: #fff;\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                border: 2px solid #000;\n                cursor: pointer;\n            }\n            .menuB:hover {\n                border: 2px solid #fff;\n            }\n            .menuB:active {\n                color: rgb(25, 25, 25);\n                background-color: rgb(200, 200, 200);\n            }\n            .customText {\n                color: #000;\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                border: 2px solid #000;\n            }\n            .customText:focus {\n                background-color: yellow;\n            }\n            .checkB {\n                position: relative;\n                top: 2px;\n                accent-color: #888;\n                cursor: pointer;\n            }\n            .Cselect {\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n                background-color: rgb(75, 75, 75);\n                color: #fff;\n                border: 1px solid #000;\n            }\n            #menuChanger:hover {\n                color: #000;\n            }\n            ::-webkit-scrollbar {\n                width: 10px;\n            }\n            ::-webkit-scrollbar-track {\n                opacity: 0;\n            }\n            ::-webkit-scrollbar-thumb {\n                background-color: rgb(25, 25, 25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            ::-webkit-scrollbar-thumb:active {\n                background-color: rgb(230, 230, 230);\n            }\n            '),I.startDiv({id:"menuHeadLine",class:"menuClass"},(e=>{e.add("Base_64"),I.addDiv({id:"menuMain",style:"display: block",class:"menuC",appendID:"menuHeadLine"},(e=>{e.newLine(),e.add("Weapon Grinder: "),e.checkBox({id:"weaponGrind",class:"checkB",onclick:"window.startGrind()"}),e.newLine(),e.add("New Healing Beta:"),e.checkBox({id:"healingBeta",class:"checkB",checked:!0}),e.newLine(),e.add("Avoid spike: "),e.checkBox({id:"RVN",class:"checkB",checked:!1}),e.newLine(),e.add("Backup Nobull Insta: "),e.checkBox({id:"backupNobull",class:"checkB",checked:!1}),e.newLine(),e.add("Turret Gear Combat Assistance: "),e.checkBox({id:"turretCombat",class:"checkB",checked:!0}),e.newLine(),e.add("Safe AntiSpikeTick: "),e.checkBox({id:"safeAntiSpikeTick",class:"checkB",checked:!0}),e.newLine(),e.add("Auto Insta: "),e.checkBox({id:"AI",class:"checkB",checked:!0}),e.newLine(),e.add("Render Placers: "),e.checkBox({id:"placeVis",class:"checkB",checked:!0}),e.newLine(),e.newLine(),e.add("Configs: "),e.selectMenu({id:"configsChanger",class:"Cselect",menu:v}),e.newLine(),e.add("Autoplacer Type: "),e.select({id:"placer",class:"Cselect",option:{Smart:{id:"smart",selected:!0},Spammy:{id:"spam"}}}),e.newLine(),e.add("InstaKill Type: "),e.select({id:"instaType",class:"Cselect",option:{OneShot:{id:"oneShot",selected:!0},Spammer:{id:"spammer"}}}),e.newLine(),e.add("AntiBull Type: "),e.select({id:"antiBullType",class:"Cselect",option:{"Disable AntiBull":{id:"noab",selected:!0},"When Reloaded":{id:"abreload"},"Primary Reloaded":{id:"abalway"}}}),e.newLine(),e.add("Predict Movement Type: "),e.select({id:"predictType",class:"Cselect",option:{"Disable Render":{id:"disableRender",selected:!0},"X/Y and 2":{id:"pre2"},"X/Y and 3":{id:"pre3"}}}),e.newLine(),e.newLine(),e.add("Break Objects Range: "),e.text({id:"breakRange",class:"customText",value:"700",size:"3em",maxLength:"4"}),e.newLine(),e.newLine()}))}));let D=document.createElement("div");D.id="menuChatDiv",document.body.appendChild(D),I.set("menuChatDiv"),I.setStyle("\n            position: absolute;\n            display: none;\n            left: 10px;\n            top: 10px;\n            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0); //0.65\n            "),I.resetHTML(),I.setCSS('\n.chDiv {\n    color: #fff;\n    padding: 20px;\n    width: 400px;\n    height: 250px;\n    background-color: rgba(34, 34, 34, 0);\n    font-family: "Courier New", monospace;\n    border-radius: 20px;\n    backdrop-filter: blur(10px);\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    transition: all 0.3s ease;\n}\n\n.chMainDiv {\n    font-family: "Ubuntu";\n    font-size: 16px;\n    max-height: 215px;\n    overflow-y: scroll;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow-x: hidden;\n    scrollbar-width: thin;\n    scrollbar-color: rgba(255, 255, 255, 0.5) rgba(255, 255, 255, 0);\n    border-radius: 15px;\n    transition: all 0.3s ease;\n    background-color: rgba(34, 34, 34, 0);\n}\n\n}\n            ::-webkit-scrollbar {\n                width: 10px;\n            }\n            ::-webkit-scrollbar-track {\n                opacity: 0;\n            }\n            ::-webkit-scrollbar-thumb {\n                background-color: rgb(25, 25, 25);\n                -webkit-border-radius: 4px;\n                -moz-border-radius: 4px;\n                border-radius: 4px;\n            }\n            ::-webkit-scrollbar-thumb:active {\n                background-color: rgb(230, 230, 230);\n            }\n\n.chMainBox {\n    position: absolute;\n    left: 10px;\n    bottom: 10px;\n    width: 335px;\n    height: 25px;\n    background-color: rgba(255, 255, 255, 0);\n    border-radius: 10px;\n    color: rgba(255, 255, 255, 0.75);\n    font-family: "Courier New", monospace;\n    font-size: 14px;\n    border: none;\n    outline: none;\n    padding: 5px;\n    transition: all 0.3s ease;\n}\n\n.chDiv:hover {\n    transform: scale(1.02);\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.23);\n}\n\n.chMainBox:hover {\n    background-color: rgba(255, 255, 255, 0.3);\n}\n            '),I.startDiv({id:"mChDiv",class:"chDiv"},(e=>{I.addDiv({id:"mChMain",class:"chMainDiv",appendID:"mChDiv"},(e=>{})),e.text({id:"mChBox",class:"chMainBox",placeHolder:'press "Enter" key'})}));let P=m("mChMain"),A=m("mChBox"),B=!1,C=0;function O(e,t,i,a){I.set("menuChatDiv"),i=i||"white";let n=new Date,s=n.getMinutes(),l=n.getHours(),o="";a||(o+=`[${(l<10?"0":"")+l}:${(s<10?"0":"")+s}]`),e&&(o+=""+((a?"":" - ")+e)),t&&(o+=(e?": ":a?"":" - ")+t+"\n"),I.addDiv({id:"menuChDisp"+C,style:`color: ${i}`,appendID:"mChMain"},(e=>{e.add(o)})),P.scrollTop=P.scrollHeight,C++}function H(){P.innerHTML="",C=0,O(null,"Chat '/help' for a list of chat commands.","white",1),O(null,"Welcome to Base 64","lightGreen",1),O(null,"Thanks & Credits to x86!","blue",1)}A.value="",A.addEventListener("focus",(()=>{B=!0})),A.addEventListener("blur",(()=>{B=!1})),H();let R=0,E=["menuMain","menuConfig","menuOther"];window.changeMenu=function(){m(E[R%E.length]).style.display="none",R++,m(E[R%E.length]).style.display="block"};let L=document.createElement("div");L.id="status",m("gameUI").appendChild(L),I.set("status"),I.setStyle("\n            display: none;\n            position: absolute;\n            color: #ddd;\n            font: 15px Hammersmith One;\n            bottom: 215px;\n            left: 20px;\n            "),I.resetHTML(),I.setCSS("\n            .sizing {\n                font-size: 15px;\n            }\n            .mod {\n                font-size: 15px;\n                display: inline-block;\n            }\n            "),I.startDiv({id:"uehmod",class:"sizing"},(e=>{e.add("Ping: "),I.addDiv({id:"pingFps",class:"mod",appendID:"uehmod"},(e=>{e.add("None")})),e.newLine(),e.add("Packet: "),I.addDiv({id:"packetStatus",class:"mod",appendID:"uehmod"},(e=>{e.add("None")}))}));let W,j,_,N=!1,F=!1,G=0,V={sec:!1},Y={tick:0,tickQueue:[],tickBase:function(e,t){this.tickQueue[this.tick+t]?this.tickQueue[this.tick+t].push(e):this.tickQueue[this.tick+t]=[e]},tickRate:1e3/u.serverUpdateRate,tickSpeed:0,lastTick:performance.now()},z=!1,q={last:0,time:0,ltime:0};let X=["cc",1,"__proto__"];function U(e){let t=Array.prototype.slice.call(arguments,1),i=window.msgpack.encode([e,t]);W.send(i)}var J,Q,Z;WebSocket.prototype.nsend=WebSocket.prototype.send,WebSocket.prototype.send=function(e){if(W||(W=this,W.addEventListener("message",(function(e){!function(e){let t=new Uint8Array(e.data),i=window.msgpack.decode(t),a=i[0];t=i[1];let n={A:Pi,C:Bi,D:Ci,E:Oi,a:Zi,G:ea,H:ta,I:ia,J:aa,K:na,L:sa,M:la,N:oa,O:Ei,P:Li,Q:Gi,R:Vi,S:Wi,T:ji,U:_i,V:ra,X:ca,Y:da,2:ha,3:pa,4:ua,5:ma,6:fa,7:ga,8:wa,9:Ua};"io-init"==a?j=t[0]:n[a]&&n[a].apply(void 0,t)}(e)})),W.addEventListener("close",(e=>{4001==e.code&&window.location.reload()}))),W==this){z=!1;let t=new Uint8Array(e),i=window.msgpack.decode(t),a=i[0];if(t=i[1],"6"==a){if(t[0]){let e;[].forEach((i=>{if(t[0].indexOf(i)>-1){e="";for(let t=0;t<i.length;++t)1==t&&(e+=String.fromCharCode(0)),e+=i[t];let a=new RegExp(i,"g");t[0]=t[0].replace(a,e)}})),t[0]=t[0].slice(0,30)}}else"L"==a?(t[0]=t[0]+String.fromCharCode(0).repeat(7),t[0]=t[0].slice(0,7)):"M"==a?(t[0].name=""==t[0].name?"unknown":t[0].name,t[0].moofoll=!0,t[0].skin=10==t[0].skin?"__proto__":t[0].skin,X=[t[0].name,t[0].moofoll,t[0].skin]):"D"==a?ye.lastDir==t[0]||[null,void 0].includes(t[0])?z=!0:ye.lastDir=t[0]:"d"==a?t[2]?[null,void 0].includes(t[1])||(ye.lastDir=t[1]):z=!0:"K"==a?t[1]||(z=!0):"14"==a?(ei.wait=!ei.wait,z=!0):"a"==a&&(t[1]?(ee.moveDir==t[0]&&(z=!0),ee.moveDir=t[0]):z=!0);if(!z){let e=window.msgpack.encode([a,t]);this.nsend(e),V.sec||(V.sec=!0,setTimeout((()=>{V.sec=!1,G=0}),1e3)),G++}}else this.nsend(e)},J="https://cdn.jsdelivr.net/npm/chart.js",Q=function(){!function(){var e=document.createElement("div");e.style.position="fixed",e.style.top="47%",e.style.left="82%",e.style.background="rgba(0,0,0,0.4)",e.style.zIndex="999999",e.style.boxShadow="2px 2px 4px 2px rgba(0,0,0,0.3)",e.style.width="298px",e.style.height="164px",e.style.overflow="auto",e.style.borderWidth="4px",e.style.backdropFilter="blur(2px)";var t=document.createElement("canvas");e.appendChild(t),document.body.appendChild(e);var i=t.getContext("2d"),a={labels:Array.from({length:60},((e,t)=>"")),datasets:[{label:"Packets",data:Array.from({length:60},(()=>0)),fill:!0,borderColor:"#0091ff",backgroundColor:"rgba(0, 145, 255, 0.5)",pointRadius:Array.from({length:60},(()=>0))}]},n=new Chart(i,{type:"line",data:a,options:{plugins:{legend:{display:!1,labels:{}},title:{display:!1}},elements:{line:{borderWidth:1.5,tension:0,borderDash:[6,6]}},scales:{x:{grid:{display:!1,color:"rgba(255, 255, 255, 0.1)",lineWidth:20}},y:{grid:{display:!1,color:"rgba(255, 255, 255, 0.1)",lineWidth:20}}}}});setInterval((function(){a.labels.length>=60&&(a.labels.shift(),a.datasets[0].data.shift(),a.datasets[0].pointRadius.shift()),a.labels.push(""),a.datasets[0].data.push(G);var e,t=(e=G)<=40||e<=60||e<=100?"#0091ff":void 0;a.datasets[0].borderColor=t,a.datasets[0].pointRadius.push(G>10?3.5:0),n.update()}),3500)}()},(Z=document.createElement("script")).type="text/javascript",Z.readyState?Z.onreadystatechange=function(){"loaded"!==Z.readyState&&"complete"!==Z.readyState||(Z.onreadystatechange=null,Q())}:Z.onload=function(){Q()},Z.src=J,document.getElementsByTagName("head")[0].appendChild(Z),window.leave=function(){!function(e){let t=Array.prototype.slice.call(arguments,1),i=window.msgpack.encode([e,t]);W.nsend(i)}("kys",{"frvr is so bad":!0,"sidney is too good":!0,"dev are too weak":!0})};let K={send:U};Math.lerpAngle=function(e,t,i){Math.abs(t-e)>Math.PI&&(e>t?t+=2*Math.PI:e+=2*Math.PI);let a=t+(e-t)*i;return a>=0&&a<=2*Math.PI?a:a%(2*Math.PI)},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,a,n){return i<2*n&&(n=i/2),a<2*n&&(n=a/2),n<0&&(n=0),this.beginPath(),this.moveTo(e+n,t),this.arcTo(e+i,t,e+i,t+a,n),this.arcTo(e+i,t+a,e,t+a,n),this.arcTo(e,t+a,e,t,n),this.arcTo(e,t,e+i,t,n),this.closePath(),this};let ee,te,ie,ae=[],ne=[],se=[],le=[],oe=[],re=[],ce=[],de=[],he=!1,pe=[],ue=[],me=[],fe=[],ge=[],we=[],ye={reloaded:!1,waitHit:0,autoAim:!1,revAim:!1,ageInsta:!0,reSync:!1,bullTick:0,anti0Tick:0,antiSync:!1,safePrimary:function(e){return[0,8].includes(e.primaryIndex)},safeSecondary:function(e){return[10,11,14].includes(e.secondaryIndex)},lastDir:0,autoPush:!1,pushData:{}};function xe(e,t){return e.find((e=>e.id==t))}function be(e,t){return e.find((e=>e.sid==t))}function ke(e){return be(se,e)}function ve(e){return be(ne,e)}function Te(e){return be(re,e)}m("gameName"),m("adCard");m("promoImgHolder").remove(),m("chatButton").remove();let Ie=m("gameCanvas"),Se=Ie.getContext("2d"),Me=m("mapDisplay"),De=Me.getContext("2d");Me.width=300,Me.height=300;let Pe=m("storeMenu"),Ae=(m("storeHolder"),m("upgradeHolder")),Be=m("upgradeCounter"),Ce=m("chatBox");Ce.autocomplete="off",Ce.style.textAlign="center",Ce.style.width="18em";let Oe,He,Re,Ee,Le,We,je=m("chatHolder"),_e=m("actionBar"),Ne=(m("leaderboardData"),m("itemInfoHolder")),Fe=(m("menuCardHolder"),m("mainMenu"),m("diedText"),u.maxScreenWidth),Ge=u.maxScreenHeight,Ve=performance.now();let Ye,ze=0,qe=0,$e=m("allianceMenu"),Xe=1,Ue=0,Je="#525252",Qe="#3d3f42",Ze=5.5,Ke=!1,et=!0,tt={},it={87:[0,-1],38:[0,-1],83:[0,1],40:[0,1],65:[-1,0],37:[-1,0],68:[1,0],39:[1,0]};let at,nt=0,st=!1,lt={},ot={place:0,placeSpawnPads:0},rt=[],ct=!0;window.onblur=function(){ct=!1},window.onfocus=function(){ct=!0,ee&&ee.alive&&(tt={},K.send("e"))};let dt=[],ht=[];class pt{constructor(){this.init=function(e,t,i,a,n,s,l){this.x=e,this.y=t,this.color=l,this.scale=i,this.startScale=this.scale,this.maxScale=1.5*i,this.scaleSpeed=.7,this.speed=a,this.life=n,this.text=s,this.acc=1,this.alpha=0,this.maxLife=n,this.ranX=Yt.randFloat(-1,1)},this.update=function(e){this.life&&(this.life-=e,u.anotherVisual?(this.y-=this.speed*e*this.acc,this.acc-=e/(this.maxLife/2.5),this.life<=200?this.alpha>0&&(this.alpha=Math.max(0,this.alpha-e/300)):this.alpha<1&&(this.alpha=Math.min(1,this.alpha+e/100)),this.x+=this.ranX):this.y-=this.speed*e,this.scale+=this.scaleSpeed*e,this.scale>=this.maxScale?(this.scale=this.maxScale,this.scaleSpeed*=-1):this.scale<=this.startScale&&(this.scale=this.startScale,this.scaleSpeed=0),this.life<=0&&(this.life=0))},this.render=function(e,t,i){e.lineWidth=10,e.fillStyle=this.color,e.font=this.scale+"px "+(u.anotherVisual?"Ubuntu":"Hammersmith One"),u.anotherVisual&&(e.globalAlpha=this.alpha,e.strokeStyle=Qe,e.strokeText(this.text,this.x-t,this.y-i)),e.fillText(this.text,this.x-t,this.y-i),e.globalAlpha=1}}}class ut{constructor(e,t,i,a){this.x=e,this.y=t,this.alpha=0,this.active=!0,this.alive=!1,this.chat=i,this.owner=a}}class mt{constructor(e,t,i,a,n,s,l,o,r){this.x=e,this.y=t,this.lastDir=i,this.dir=i+Math.PI,this.buildIndex=a,this.weaponIndex=n,this.weaponVariant=s,this.skinColor=l,this.scale=o,this.name=r,this.alpha=1,this.active=!0,this.animate=function(e){this.x+=.75,this.y+=.75;Yt.getAngleDist(this.lastDir,this.dir);this.alpha-=.002,this.alpha<=0&&(this.alpha=0,this.active=!1)}}}class ft{constructor(e,t,i,a,n,s,l,o,r,d,h,p,u,m){this.id=e,this.sid=t,this.tmpScore=0,this.team=null,this.latestSkin=0,this.oldSkinIndex=0,this.skinIndex=0,this.latestTail=0,this.oldTailIndex=0,this.tailIndex=0,this.hitTime=0,this.lastHit=0,this.tails={};for(let e=0;e<h.length;++e)h[e].price<=0&&(this.tails[h[e].id]=1);this.skins={};for(let e=0;e<d.length;++e)d[e].price<=0&&(this.skins[d[e].id]=1);this.points=0,this.dt=0,this.hidden=!1,this.itemCounts={},this.isPlayer=!0,this.pps=0,this.moveDir=void 0,this.skinRot=0,this.lastPing=0,this.iconIndex=0,this.skinColor=0,this.dist2=0,this.aim2=0,this.maxSpeed=1,this.chat={message:null,count:0},this.backupNobull=!0,this.circle=!1,this.cAngle=0,this.spawn=function(e){this.attacked=!1,this.death=!1,this.spinDir=0,this.sync=!1,this.antiBull=0,this.bullTimer=0,this.poisonTimer=0,this.active=!0,this.alive=!0,this.lockMove=!1,this.lockDir=!1,this.minimapCounter=0,this.chatCountdown=0,this.shameCount=0,this.shameTimer=0,this.sentTo={},this.gathering=0,this.gatherIndex=0,this.shooting={},this.shootIndex=9,this.autoGather=0,this.animTime=0,this.animSpeed=0,this.mouseState=0,this.buildIndex=-1,this.weaponIndex=0,this.weaponCode=0,this.weaponVariant=0,this.primaryIndex=void 0,this.secondaryIndex=void 0,this.dmgOverTime={},this.noMovTimer=0,this.maxXP=300,this.XP=0,this.age=1,this.kills=0,this.upgrAge=2,this.upgradePoints=0,this.x=0,this.y=0,this.oldXY={x:0,y:0},this.zIndex=0,this.xVel=0,this.yVel=0,this.slowMult=1,this.dir=0,this.dirPlus=0,this.targetDir=0,this.targetAngle=0,this.maxHealth=100,this.health=this.maxHealth,this.oldHealth=this.maxHealth,this.damaged=0,this.scale=i.playerScale,this.speed=i.playerSpeed,this.resetMoveDir(),this.resetResources(e),this.items=[0,3,6,10],this.weapons=[0],this.shootCount=0,this.weaponXP=[],this.reloads={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,53:0},this.bowThreat={9:0,12:0,13:0,15:0},this.damageThreat=0,this.inTrap=!1,this.canEmpAnti=!1,this.empAnti=!1,this.soldierAnti=!1,this.poisonTick=0,this.bullTick=0,this.setPoisonTick=!1,this.setBullTick=!1,this.antiTimer=2},this.resetMoveDir=function(){this.moveDir=void 0},this.resetResources=function(e){for(let t=0;t<i.resourceTypes.length;++t)this[i.resourceTypes[t]]=e?100:0},this.getItemType=function(e){let t=this.items.findIndex((t=>t==e));return-1!=t?t:r.checkItem.index(e,this.items)},this.setData=function(e){this.id=e[0],this.sid=e[1],this.name=e[2],this.x=e[3],this.y=e[4],this.dir=e[5],this.health=e[6],this.maxHealth=e[7],this.scale=e[8],this.skinColor=e[9]},this.updateTimer=function(){this.bullTimer-=1,this.bullTimer<=0&&(this.setBullTick=!1,this.bullTick=Y.tick-1,this.bullTimer=i.serverUpdateRate),this.poisonTimer-=1,this.poisonTimer<=0&&(this.setPoisonTick=!1,this.poisonTick=Y.tick-1,this.poisonTimer=i.serverUpdateRate)},this.update=function(e){if(this.alive&&(this.health!=this.healthMov&&(this.health<this.healthMov?this.healthMov-=2:this.healthMov+=2,Math.abs(this.health-this.healthMov)<2&&(this.healthMov=this.health)),this.shameCount!=this.shameMov&&(this.shameCount<this.shameMov?this.shameMov-=.1:this.shameMov+=.1,Math.abs(this.shameCount-this.shameMov)<.1&&(this.shameMov=this.shameCount))),this.active){let e={skin:xe(d,this.skinIndex),tail:xe(h,this.tailIndex)},t=(this.buildIndex>=0?.5:1)*(r.weapons[this.weaponIndex].spdMult||1)*(e.skin&&e.skin.spdMult||1)*(e.tail&&e.tail.spdMult||1)*(this.y<=i.snowBiomeTop?e.skin&&e.skin.coldM?1:i.snowSpeed:1)*this.slowMult;this.maxSpeed=t}};let f=0,g=0;this.animate=function(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,f=0,g=0):0==g?(f+=e/(this.animSpeed*i.hitReturnRatio),this.dirPlus=a.lerp(0,this.targetAngle,Math.min(1,f)),f>=1&&(f=1,g=1)):(f-=e/(this.animSpeed*(1-i.hitReturnRatio)),this.dirPlus=a.lerp(0,this.targetAngle,Math.max(0,f))))},this.startAnim=function(e,t){this.animTime=this.animSpeed=r.weapons[t].speed,this.targetAngle=e?-i.hitAngle:-Math.PI,f=0,g=0},this.canSee=function(e){if(!e)return!1;let t=Math.abs(e.x-this.x)-e.scale,a=Math.abs(e.y-this.y)-e.scale;return t<=i.maxScreenWidth/2*1.3&&a<=i.maxScreenHeight/2*1.3},this.judgeShame=function(){if(this.oldHealth<this.health){if(this.hitTime){let e=Date.now()-this.hitTime;this.lastHit=Y.tick,this.hitTime=0,e<120?this.shameCount++:this.shameCount=Math.max(0,this.shameCount-2)}}else this.oldHealth>this.health&&(this.hitTime=Date.now())},this.addShameTimer=function(){this.shameCount=0,this.shameTimer=30;let e=setInterval((()=>{this.shameTimer--,this.shameTimer<=0&&clearInterval(e)}),1e3)},this.isTeam=function(e){return this==e||this.team&&this.team==e.team},this.findAllianceBySid=function(e){return this.team?oe.find((t=>t===e)):null},this.checkCanInsta=function(e){let t=0;if(this.alive&&st){let a={weapon:this.weapons[0],variant:this.primaryVariant,dmg:null==this.weapons[0]?0:r.weapons[this.weapons[0]].dmg},n={weapon:this.weapons[1],variant:this.secondaryVariant,dmg:null==this.weapons[1]?0:r.weapons[this.weapons[1]].Pdmg},s=this.skins[7]&&!e?1.5:1,l=null!=a.variant?i.weaponVariants[a.variant].val:1;return null!=a.weapon&&0==this.reloads[a.weapon]&&(t+=a.dmg*l*s),null!=n.weapon&&0==this.reloads[n.weapon]&&(t+=n.dmg),this.skins[53]&&this.reloads[53]<=(10==ee.weapons[1]?0:Y.tickRate)&&22!=we.skinIndex&&(t+=25),t*=6==we.skinIndex?.75:1,t}return 0},this.manageReload=function(){if(this.shooting[53]?(this.shooting[53]=0,this.reloads[53]=2500-Y.tickRate):this.reloads[53]>0&&(this.reloads[53]=Math.max(0,this.reloads[53]-Y.tickRate)),this.gathering||this.shooting[1])this.gathering&&(this.gathering=0,this.reloads[this.gatherIndex]=r.weapons[this.gatherIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0),this.shooting[1]&&(this.shooting[1]=0,this.reloads[this.shootIndex]=r.weapons[this.shootIndex].speed*(20==this.skinIndex?.78:1),this.attacked=!0);else if(this.attacked=!1,this.buildIndex<0&&this.reloads[this.weaponIndex]>0){if(this.reloads[this.weaponIndex]=Math.max(0,this.reloads[this.weaponIndex]-Y.tickRate),this==ee&&c)for(let e=0;e<2*Math.PI;e+=Math.PI/2)Dt(ee.getItemType(22),e);0==this.reloads[this.primaryIndex]&&0==this.reloads[this.weaponIndex]&&(this.antiBull++,Y.tickBase((()=>{this.antiBull=0}),1))}},this.addDamageThreat=function(e){let t={weapon:this.primaryIndex,variant:this.primaryVariant};t.dmg=null==t.weapon?45:r.weapons[t.weapon].dmg;let a={weapon:this.secondaryIndex,variant:this.secondaryVariant};a.dmg=null==a.weapon?50:r.weapons[a.weapon].Pdmg;let n=null!=t.variant?i.weaponVariants[t.variant].val:1.18,s=null!=a.variant?[9,12,13,15].includes(a.weapon)?1:i.weaponVariants[a.variant].val:1.18;null!=t.weapon&&0!=this.reloads[t.weapon]||(this.damageThreat+=t.dmg*n*1.5),null!=a.weapon&&0!=this.reloads[a.weapon]||(this.damageThreat+=a.dmg*s),this.reloads[53]<=Y.tickRate&&(this.damageThreat+=25),this.damageThreat*=6==e.skinIndex?.75:1,this.isTeam(e)||this.dist2<=300&&(e.damageThreat+=this.damageThreat)}}}function gt(e){ee.reloads[e]=0,U("H",e)}function wt(e,t){let i=ee.skins[6]?6:0;if(ee.alive&&st)if(0==t)if(ee.skins[e])ee.latestSkin!=e&&U("c",0,e,0);else if(v.autoBuyEquip){let t=xe(Xt,e);t&&ee.points>=t.price?(U("c",1,e,0),U("c",0,e,0)):ee.latestSkin!=i&&U("c",0,i,0)}else ee.latestSkin!=i&&U("c",0,i,0);else if(1==t)if(ee.tails[e])ee.latestTail!=e&&U("c",0,e,1);else if(v.autoBuyEquip){let t=xe(Ut,e);t&&ee.points>=t.price?(U("c",1,e,1),U("c",0,e,1)):0!=ee.latestTail&&U("c",0,0,1)}else 0!=ee.latestTail&&U("c",0,0,1)}function yt(e,t){U("G",e,t)}function xt(e,t){t||(ee.weaponCode=e),U("G",e,1)}function bt(){U("K",1,1)}function kt(e){let t=e%360*(Math.PI/180);return t<0?2*Math.PI+t:t}function vt(e,t,a){try{if(o){if(G.count>=80)return;if(null==e)return;let n=zt.list[ee.items[e]],s=ee.scale+n.scale+(n.placeOffset||0),l=ee.x2+s*Math.cos(t),o=ee.y2+s*Math.sin(t);(0===e||i||ee.alive&&st&&null==ee.itemCounts[n.group.id]||ee.itemCounts[n.group.id]<(u.isSandbox?3===e||5===e?299:99:n.group.limit?n.group.limit:99))&&(yt(ee.items[e]),function(e,t){U("d",e,t,1)}(1,t),xt(ee.weaponCode,1),a&&m("placeVis").checked&&d&&(dt.push({x:l,y:o,name:n.name,scale:n.scale,dir:t}),Y.tickBase((()=>{dt.shift()}),1)))}}catch(e){}}function Tt(e,t){try{return Math.hypot((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 1/0}}function It(e,t){try{return Math.atan2((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 0}}function St(e,t){return t="function"==typeof t?t:e=>e,e.sort(((e,i)=>t(e)-t(i)))}function Mt(e,t){try{let e=[],i=[];for(let t=0;t<72;t++)e.push(kt(5*t));let a=[];window.isMohMoh||(a=St(re.filter((e=>e.active&&Tt(ee,e)<=150)),(e=>Tt(ee,e))));let n=null;for(let s of e){let e=ee.buildItemPosition(t,s),l=!0;if(18!=t.id&&e.y>=u.mapScale/2-u.riverWidth/2&&e.y<=u.mapScale/2+u.riverWidth/2)l=!1;else if(n&&Tt(n,e)<t.scale+(n.blocker?n.blocker:n.getScale(.6,n.isItem)))l=!1;else{for(let i of a){let a=i.blocker?i.blocker:i.getScale(.6,i.isItem);if(Tt(i,e)<t.scale+a){l=!1,n=i;break}}}l&&i.push(s)}return i}catch(e){}}function Dt(e,t){try{if(G.count>=80)return;if(null==e)return;let i=zt.list[ee.items[e]],a=ee.scale+i.scale+(i.placeOffset||0),n=ee.x2+a*Math.cos(t),s=ee.y2+a*Math.sin(t);qt.checkItemLocation(n,s,i.scale,.6,i.id,!1,ee)&&vt(e,t,1)}catch(e){}}function Pt(){return 6==ee.latestSkin?.75:1}function At(e){return fe.filter((t=>{let i=new jt(zt).weapons[t.weaponIndex],a=t.weaponIndex<9?[i[0],i[1],i[2],i[3]]:[i[0],i[1]],n={one:t.dist2<=300,two:a.includes(e),three:t.attacked};return n.one&&n.two&&n.three}))}function Bt(){for(let e=0;e<Ct();e++)vt(0,gi())}function Ct(){return 100==ee.health?0:45!=ee.skinIndex&&56!=ee.skinIndex?Math.ceil((100-ee.health)/zt.list[ee.items[0]].healing):0}function Ot(e){ye.antiSync=!0;let t=setInterval((()=>{ee.shameCount<5&&vt(0,gi())}),75);setTimeout((()=>{clearInterval(t),setTimeout((()=>{ye.antiSync=!1}),Y.tickRate)}),Y.tickRate)}const Ht=new Set;new Set;function Rt(e){const t=ee.x2,i=ee.y2;return Math.hypot(e[0]-t,e[1]-i)>35}function Et(e){return ee.team?oe.find((t=>t===e)):null}function Lt(e,t){if(ee.y2>=u.mapScale/2-u.riverWidth/2&&ee.y2<=u.mapScale/2+u.riverWidth/2){if(t)return 31;wt(31,0)}else if(ee.y2<=u.snowBiomeTop){if(t)return e&&null==ee.moveDir?22:15;wt(e&&null==ee.moveDir?22:15,0)}else{if(t)return e&&null==ee.moveDir?22:12;wt(e&&null==ee.moveDir?22:12,0)}if(t)return 0}let Wt=[];class jt{constructor(e){this.calcDmg=function(e,t){return e*t},this.getAllDamage=function(e){return[this.calcDmg(e,.75),e,this.calcDmg(e,1.125),this.calcDmg(e,1.5)]},this.weapons=[];for(let t=0;t<e.weapons.length;t++){let i=e.weapons[t],a=i.name.split(" ").length<=1?i.name:i.name.split(" ")[0]+"_"+i.name.split(" ")[1];this.weapons.push(this.getAllDamage(t>8?i.Pdmg:i.dmg)),this[a]=this.weapons[t]}}}let _t=!1;setInterval((function(){if(50===G&&!_t){_t=!0;const e=Object.assign(document.createElement("div"),{innerHTML:`Warning: Many Packets, High Ping ${window.pingTime}`,style:"\n            position: fixed;\n            top: 8%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            font-size: 1.5rem;\n            color: #a12a22;\n            text-shadow: -1px -1px 0 #333, 1px -1px 0 #333, -1px 1px 0 #333, 1px 1px 0 #333;\n            z-index: 9999;"});document.body.appendChild(e),setTimeout((function(){e.remove(),_t=!1}),2e3)}}),100);let Nt,Ft,Gt,Vt=[],Yt=new class{constructor(){let e=Math.abs,t=(Math.cos,Math.sin,Math.pow,Math.sqrt),i=Math.atan2,a=Math.PI,n=this;this.round=function(e,t){return Math.round(e*t)/t},this.toRad=function(e){return e*(a/180)},this.toAng=function(e){return e/(a/180)},this.randInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},this.randFloat=function(e,t){return Math.random()*(t-e+1)+e},this.lerp=function(e,t,i){return e+(t-e)*i},this.decel=function(e,t){return e>0?e=Math.max(0,e-t):e<0&&(e=Math.min(0,e+t)),e},this.getDistance=function(e,i,a,n){return t((a-=e)*a+(n-=i)*n)},this.getDist=function(e,i,a,n){let s=0==a?e.x:1==a?e.x1:2==a?e.x2:3==a&&e.x3,l=0==a?e.y:1==a?e.y1:2==a?e.y2:3==a&&e.y3,o={x:0==n?i.x:1==n?i.x1:2==n?i.x2:3==n&&i.x3,y:0==n?i.y:1==n?i.y1:2==n?i.y2:3==n&&i.y3};return t((o.x-=s)*o.x+(o.y-=l)*o.y)},this.getDirection=function(e,t,a,n){return i(t-n,e-a)},this.getDirect=function(e,t,a,n){let s=0==a?e.x:1==a?e.x1:2==a?e.x2:3==a&&e.x3,l=0==a?e.y:1==a?e.y1:2==a?e.y2:3==a&&e.y3,o=0==n?t.x:1==n?t.x1:2==n?t.x2:3==n&&t.x3,r=0==n?t.y:1==n?t.y1:2==n?t.y2:3==n&&t.y3;return i(l-r,s-o)},this.getAngleDist=function(t,i){let n=e(i-t)%(2*a);return n>a?2*a-n:n},this.isNumber=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},this.isString=function(e){return e&&"string"==typeof e},this.kFormat=function(e){return e>999?(e/1e3).toFixed(1)+"k":e},this.sFormat=function(e){let t=[{num:1e3,string:"k"},{num:1e6,string:"m"},{num:1e9,string:"b"},{num:1e12,string:"q"}].reverse().find((t=>e>=t.num));return t?(e/t.num).toFixed(1)+t.string:e},this.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},this.fixTo=function(e,t){return parseFloat(e.toFixed(t))},this.sortByPoints=function(e,t){return parseFloat(t.points)-parseFloat(e.points)},this.lineInRect=function(e,t,i,a,n,s,l,o){let r=n,c=l;if(n>l&&(r=l,c=n),c>i&&(c=i),r<e&&(r=e),r>c)return!1;let d=s,h=o,p=l-n;if(Math.abs(p)>1e-7){let e=(o-s)/p,t=s-e*n;d=e*r+t,h=e*c+t}if(d>h){let e=h;h=d,d=e}return h>a&&(h=a),d<t&&(d=t),!(d>h)},this.containsPoint=function(e,t,i){let a=e.getBoundingClientRect(),n=a.left+window.scrollX,s=a.top+window.scrollY,l=a.width,o=a.height;return t>n&&t<n+l&&(i>s&&i<s+o)},this.mousifyTouchEvent=function(e){let t=e.changedTouches[0];e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY},this.hookTouchEvents=function(e,t){let i=!t,a=!1,s=!1;function l(t){n.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation()),a&&(e.onclick&&e.onclick(t),e.onmouseout&&e.onmouseout(t),a=!1)}e.addEventListener("touchstart",this.checkTrusted((function(t){n.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation());e.onmouseover&&e.onmouseover(t);a=!0})),s),e.addEventListener("touchmove",this.checkTrusted((function(t){n.mousifyTouchEvent(t),window.setUsingTouch(!0),i&&(t.preventDefault(),t.stopPropagation());n.containsPoint(e,t.pageX,t.pageY)?a||(e.onmouseover&&e.onmouseover(t),a=!0):a&&(e.onmouseout&&e.onmouseout(t),a=!1)})),s),e.addEventListener("touchend",this.checkTrusted(l),s),e.addEventListener("touchcancel",this.checkTrusted(l),s),e.addEventListener("touchleave",this.checkTrusted(l),s)},this.removeAllChildren=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},this.generateElement=function(e){let t=document.createElement(e.tag||"div");function i(i,a){e[i]&&(t[a]=e[i])}i("text","textContent"),i("html","innerHTML"),i("class","className");for(let i in e){switch(i){case"tag":case"text":case"html":case"class":case"style":case"hookTouch":case"parent":case"children":continue}t[i]=e[i]}if(t.onclick&&(t.onclick=this.checkTrusted(t.onclick)),t.onmouseover&&(t.onmouseover=this.checkTrusted(t.onmouseover)),t.onmouseout&&(t.onmouseout=this.checkTrusted(t.onmouseout)),e.style&&(t.style.cssText=e.style),e.hookTouch&&this.hookTouchEvents(t),e.parent&&e.parent.appendChild(t),e.children)for(let i=0;i<e.children.length;i++)t.appendChild(e.children[i]);return t},this.checkTrusted=function(e){return function(t){t&&t instanceof Event&&(!t||"boolean"!=typeof t.isTrusted||t.isTrusted)&&e(t)}},this.randomString=function(e){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<e;a++)t+=i.charAt(Math.floor(62*Math.random()));return t},this.countInArray=function(e,t){let i=0;for(let a=0;a<e.length;a++)e[a]===t&&i++;return i},this.hexToRgb=function(e){return e.slice(1).match(/.{1,2}/g).map((e=>parseInt(e,16)))},this.getRgb=function(e,t,i){return[e/255,t/255,i/255].join(", ")}}},zt=new class{constructor(){this.groups=[{id:0,name:"food",layer:0},{id:1,name:"walls",place:!0,limit:30,layer:0},{id:2,name:"spikes",place:!0,limit:15,layer:0},{id:3,name:"mill",place:!0,limit:7,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:6,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1},{id:7,name:"turret",place:!0,limit:2,layer:1},{id:8,name:"watchtower",place:!0,limit:12,layer:1},{id:9,name:"buff",place:!0,limit:4,layer:-1},{id:10,name:"spawn",place:!0,limit:1,layer:-1},{id:11,name:"sapling",place:!0,limit:2,layer:0},{id:12,name:"blocker",place:!0,limit:3,layer:-1},{id:13,name:"teleporter",place:!0,limit:2,layer:-1}],this.projectiles=[{indx:0,layer:0,src:"arrow_1",dmg:25,speed:1.6,scale:103,range:1e3},{indx:1,layer:1,dmg:25,scale:20},{indx:0,layer:0,src:"arrow_1",dmg:35,speed:2.5,scale:103,range:1200},{indx:0,layer:0,src:"arrow_1",dmg:30,speed:2,scale:103,range:1200},{indx:1,layer:1,dmg:16,scale:20},{indx:0,layer:0,src:"bullet_1",dmg:50,speed:3.6,scale:160,range:1400}],this.weapons=[{id:0,type:0,name:"tool hammer",desc:"tool for gathering all resources",src:"hammer_1",length:140,width:140,xOff:-3,yOff:18,dmg:25,range:65,gather:1,speed:300},{id:1,type:0,age:2,name:"hand axe",desc:"gathers resources at a higher rate",src:"axe_1",length:140,width:140,xOff:3,yOff:24,dmg:30,spdMult:1,range:70,gather:2,speed:400},{id:2,type:0,age:8,pre:1,name:"great axe",desc:"deal more damage and gather more resources",src:"great_axe_1",length:140,width:140,xOff:-8,yOff:25,dmg:35,spdMult:1,range:75,gather:4,speed:400},{id:3,type:0,age:2,name:"short sword",desc:"increased attack power but slower move speed",src:"sword_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:46,dmg:35,spdMult:.85,range:110,gather:1,speed:300},{id:4,type:0,age:8,pre:3,name:"katana",desc:"greater range and damage",src:"samurai_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:59,dmg:40,spdMult:.8,range:118,gather:1,speed:300},{id:5,type:0,age:2,name:"polearm",desc:"long range melee weapon",src:"spear_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:53,dmg:45,knock:.2,spdMult:.82,range:142,gather:1,speed:700},{id:6,type:0,age:2,name:"bat",desc:"fast long range melee weapon",src:"bat_1",iPad:1.3,length:110,width:180,xOff:-8,yOff:53,dmg:20,knock:.7,range:110,gather:1,speed:300},{id:7,type:0,age:2,name:"daggers",desc:"really fast short range weapon",src:"dagger_1",iPad:.8,length:110,width:110,xOff:18,yOff:0,dmg:20,knock:.1,range:65,gather:1,hitSlow:.1,spdMult:1.13,speed:100},{id:8,type:0,age:2,name:"stick",desc:"great for gathering but very weak",src:"stick_1",length:140,width:140,xOff:3,yOff:24,dmg:1,spdMult:1,range:70,gather:7,speed:400},{id:9,type:1,age:6,name:"hunting bow",desc:"bow used for ranged combat and hunting",src:"bow_1",req:["wood",4],length:120,width:120,xOff:-6,yOff:0,Pdmg:25,projectile:0,spdMult:.75,speed:600},{id:10,type:1,age:6,name:"great hammer",desc:"hammer used for destroying structures",src:"great_hammer_1",length:140,width:140,xOff:-9,yOff:25,dmg:10,Pdmg:10,spdMult:.88,range:75,sDmg:7.5,gather:1,speed:400},{id:11,type:1,age:6,name:"wooden shield",desc:"blocks projectiles and reduces melee damage",src:"shield_1",length:120,width:120,shield:.2,xOff:6,yOff:0,Pdmg:0,spdMult:.7},{id:12,type:1,age:8,pre:9,name:"crossbow",desc:"deals more damage and has greater range",src:"crossbow_1",req:["wood",5],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,Pdmg:35,projectile:2,spdMult:.7,speed:700},{id:13,type:1,age:9,pre:12,name:"repeater crossbow",desc:"high firerate crossbow with reduced damage",src:"crossbow_2",req:["wood",10],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,Pdmg:30,projectile:3,spdMult:.7,speed:230},{id:14,type:1,age:6,name:"mc grabby",desc:"steals resources from enemies",src:"grab_1",length:130,width:210,xOff:-8,yOff:53,dmg:0,Pdmg:0,steal:250,knock:.2,spdMult:1.05,range:125,gather:0,speed:700},{id:15,type:1,age:9,pre:12,name:"musket",desc:"slow firerate but high damage and range",src:"musket_1",req:["stone",10],aboveHand:!0,rec:.35,armS:.6,hndS:.3,hndD:1.6,length:205,width:205,xOff:25,yOff:0,Pdmg:50,projectile:5,hideProjectile:!0,spdMult:.6,speed:1500}],this.list=[{group:this.groups[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],consume:function(e){return e.changeHealth(20,e)},scale:22,holdOffset:15,healing:20,itemID:0,itemAID:16},{age:3,group:this.groups[0],name:"cookie",desc:"restores 40 health when consumed",req:["food",15],consume:function(e){return e.changeHealth(40,e)},scale:27,holdOffset:15,healing:40,itemID:1,itemAID:17},{age:7,group:this.groups[0],name:"cheese",desc:"restores 30 health and another 50 over 5 seconds",req:["food",25],consume:function(e){return!!(e.changeHealth(30,e)||e.health<100)&&(e.dmgOverTime.dmg=-10,e.dmgOverTime.doer=e,e.dmgOverTime.time=5,!0)},scale:27,holdOffset:15,healing:30,itemID:2,itemAID:18},{group:this.groups[1],name:"wood wall",desc:"provides protection for your village",req:["wood",10],projDmg:!0,health:380,scale:50,holdOffset:20,placeOffset:-5,itemID:3,itemAID:19},{age:3,group:this.groups[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:900,scale:50,holdOffset:20,placeOffset:-5,itemID:4,itemAID:20},{age:7,group:this.groups[1],name:"castle wall",desc:"provides powerful protection for your village",req:["stone",35],health:1500,scale:52,holdOffset:20,placeOffset:-5,itemID:5,itemAID:21},{group:this.groups[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:6,itemAID:22},{age:5,group:this.groups[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:35,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:7,itemAID:23},{age:9,group:this.groups[2],name:"poison spikes",desc:"poisons enemies when they touch them",req:["wood",35,"stone",15],health:600,dmg:30,pDmg:5,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:8,itemAID:24},{age:9,group:this.groups[2],name:"spinning spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",20],health:500,dmg:45,turnSpeed:.003,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5,itemID:9,itemAID:25},{group:this.groups[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5,itemID:10,itemAID:26},{age:5,group:this.groups[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5,itemID:11,itemAID:27},{age:8,group:this.groups[3],name:"power mill",desc:"generates more gold over time",req:["wood",100,"stone",50],health:800,pps:2,turnSpeed:.005,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5,itemID:12,itemAID:28},{age:5,group:this.groups[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0,itemID:13,itemAID:29},{age:5,group:this.groups[11],type:0,name:"sapling",desc:"allows you to farm wood",req:["wood",150],iconLineMult:12,colDiv:.5,scale:110,holdOffset:50,placeOffset:-15,itemID:14,itemAID:30},{age:4,group:this.groups[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:500,colDiv:.2,scale:50,holdOffset:20,placeOffset:-5,alpha:.6,itemID:15,itemAID:31},{age:4,group:this.groups[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",20,"wood",5],ignoreCollision:!0,boostSpeed:1.5,health:150,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:16,itemAID:32},{age:7,group:this.groups[7],doUpdate:!0,name:"turret",desc:"defensive structure that shoots at enemies",req:["wood",200,"stone",150],health:800,projectile:1,shootRange:700,shootRate:2200,scale:43,holdOffset:20,placeOffset:-5,itemID:17,itemAID:33},{age:7,group:this.groups[8],name:"platform",desc:"platform to shoot over walls and cross over water",req:["wood",20],ignoreCollision:!0,zIndex:1,health:300,scale:43,holdOffset:20,placeOffset:-5,itemID:18,itemAID:34},{age:7,group:this.groups[9],name:"healing pad",desc:"standing on it will slowly heal you",req:["wood",30,"food",10],ignoreCollision:!0,healCol:15,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:19,itemAID:35},{age:9,group:this.groups[10],name:"spawn pad",desc:"you will spawn here when you die but it will dissapear",req:["wood",100,"stone",100],health:400,ignoreCollision:!0,spawnPoint:!0,scale:45,holdOffset:20,placeOffset:-5,itemID:20,itemAID:36},{age:7,group:this.groups[12],name:"blocker",desc:"blocks building in radius",req:["wood",30,"stone",25],ignoreCollision:!0,blocker:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:21,itemAID:37},{age:7,group:this.groups[13],name:"teleporter",desc:"teleports you to a random point on the map",req:["wood",60,"stone",60],ignoreCollision:!0,teleport:!0,health:200,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5,itemID:22,itemAID:38}],this.checkItem={index:function(e,t){return[0,1,2].includes(e)?0:[3,4,5].includes(e)?1:[6,7,8,9].includes(e)?2:[10,11,12].includes(e)?3:[13,14].includes(e)?5:[15,16].includes(e)?4:[17,18,19,21,22].includes(e)?[13,14].includes(t)?6:5:20==e?[13,14].includes(t)?7:6:void 0}};for(let e=0;e<this.list.length;++e)this.list[e].id=e,this.list[e].pre&&(this.list[e].pre=e-this.list[e].pre);if("undefined"!=typeof window){}}},qt=new class{constructor(e,t,i,a,n,s){let l;Math.floor,Math.abs,Math.cos,Math.sin,Math.pow,Math.sqrt;this.ignoreAdd=!1,this.hitObj=[],this.disableObj=function(e){e.active=!1},this.add=function(t,i,a,n,s,o,r,c,d){l=Te(t),l||(l=re.find((e=>!e.active)),l||(l=new e(t),re.push(l))),c&&(l.sid=t),l.init(i,a,n,s,o,r,d)},this.disableBySid=function(e){let t=Te(e);t&&this.disableObj(t)},this.removeAllItems=function(e,t){re.filter((t=>t.active&&t.owner&&t.owner.sid==e)).forEach((e=>this.disableObj(e)))},this.checkItemLocation=function(e,n,s,l,o,r,c){return!t.find((t=>t.active&&i.getDistance(e,n,t.x,t.y)<s+(t.blocker?t.blocker:t.getScale(l,t.isItem))))&&!(!r&&18!=o&&n>=a.mapScale/2-a.riverWidth/2&&n<=a.mapScale/2+a.riverWidth/2)}}}(class{constructor(e){this.sid=e,this.init=function(e,t,i,a,n,s,l){s=s||{},this.sentTo={},this.gridLocations=[],this.active=!0,this.alive=!0,this.doUpdate=s.doUpdate,this.x=e,this.y=t,u.anotherVisual?this.dir=i+Math.PI:this.dir=i,this.lastDir=i,this.xWiggle=0,this.yWiggle=0,this.visScale=a,this.scale=a,this.type=n,this.id=s.id,this.owner=l,this.name=s.name,this.isItem=null!=this.id,this.group=s.group,this.maxHealth=s.health,this.health=this.maxHealth,this.healthMov=100,this.layer=2,null!=this.group?this.layer=this.group.layer:0==this.type?this.layer=3:2==this.type?this.layer=0:4==this.type&&(this.layer=-1),this.colDiv=s.colDiv||1,this.blocker=s.blocker,this.ignoreCollision=s.ignoreCollision,this.dontGather=s.dontGather,this.hideFromEnemy=s.hideFromEnemy,this.friction=s.friction,this.projDmg=s.projDmg,this.dmg=s.dmg,this.pDmg=s.pDmg,this.pps=s.pps,this.zIndex=s.zIndex||0,this.turnSpeed=s.turnSpeed,this.req=s.req,this.trap=s.trap,this.healCol=s.healCol,this.teleport=s.teleport,this.boostSpeed=s.boostSpeed,this.projectile=s.projectile,this.shootRange=s.shootRange,this.shootRate=s.shootRate,this.shootCount=this.shootRate,this.spawnPoint=s.spawnPoint,this.onNear=0,this.breakObj=!1,this.alpha=s.alpha||1,this.maxAlpha=s.alpha||1,this.damaged=0},this.changeHealth=function(e,t){return this.health+=e,this.health<=0},this.getScale=function(e,t){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type||4==this.type?1:.6*e)*(t?1:this.colDiv)},this.visibleToPlayer=function(e){return!this.hideFromEnemy||this.owner&&(this.owner==e||this.owner.team&&e.team==this.owner.team)},this.update=function(e){if(this.health!=this.healthMov&&(this.health<this.healthMov?this.healthMov-=1.9:this.healthMov+=1.9,Math.abs(this.health-this.healthMov)<1.9&&(this.healthMov=this.health)),this.active)if(this.xWiggle&&(this.xWiggle*=Math.pow(.99,e)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,e)),u.anotherVisual){let e=Yt.getAngleDist(this.lastDir,this.dir);e>.01?this.dir+=e/5:this.dir=this.lastDir}else this.turnSpeed&&this.dmg&&(this.dir+=this.turnSpeed*e);else this.alive&&(this.alpha-=e/(200/this.maxAlpha),this.visScale+=e/(this.scale/2.5),this.alpha<=0&&(this.alpha=0,this.alive=!1))},this.isTeamObject=function(e){return null==this.owner||(this.owner&&e.sid==this.owner.sid||e.findAllianceBySid(this.owner.sid))}}},re,Yt,u),$t=new class{constructor(){this.hats=[{id:45,name:"Shame!",dontSell:!0,price:0,scale:120,desc:"hacks are for winners"},{id:51,name:"Moo Cap",price:0,scale:120,desc:"coolest mooer around"},{id:50,name:"Apple Cap",price:0,scale:120,desc:"apple farms remembers"},{id:28,name:"Moo Head",price:0,scale:120,desc:"no effect"},{id:29,name:"Pig Head",price:0,scale:120,desc:"no effect"},{id:30,name:"Fluff Head",price:0,scale:120,desc:"no effect"},{id:36,name:"Pandou Head",price:0,scale:120,desc:"no effect"},{id:37,name:"Bear Head",price:0,scale:120,desc:"no effect"},{id:38,name:"Monkey Head",price:0,scale:120,desc:"no effect"},{id:44,name:"Polar Head",price:0,scale:120,desc:"no effect"},{id:35,name:"Fez Hat",price:0,scale:120,desc:"no effect"},{id:42,name:"Enigma Hat",price:0,scale:120,desc:"join the enigma army"},{id:43,name:"Blitz Hat",price:0,scale:120,desc:"hey everybody i'm blitz"},{id:49,name:"Bob XIII Hat",price:0,scale:120,desc:"like and subscribe"},{id:57,name:"Pumpkin",price:50,scale:120,desc:"Spooooky"},{id:8,name:"Bummle Hat",price:100,scale:120,desc:"no effect"},{id:2,name:"Straw Hat",price:500,scale:120,desc:"no effect"},{id:15,name:"Winter Cap",price:600,scale:120,desc:"allows you to move at normal speed in snow",coldM:1},{id:5,name:"Cowboy Hat",price:1e3,scale:120,desc:"no effect"},{id:4,name:"Ranger Hat",price:2e3,scale:120,desc:"no effect"},{id:18,name:"Explorer Hat",price:2e3,scale:120,desc:"no effect"},{id:31,name:"Flipper Hat",price:2500,scale:120,desc:"have more control while in water",watrImm:!0},{id:1,name:"Marksman Cap",price:3e3,scale:120,desc:"increases arrow speed and range",aMlt:1.3},{id:10,name:"Bush Gear",price:3e3,scale:160,desc:"allows you to disguise yourself as a bush"},{id:48,name:"Halo",price:3e3,scale:120,desc:"no effect"},{id:6,name:"Soldier Helmet",price:4e3,scale:120,desc:"reduces damage taken but slows movement",spdMult:.94,dmgMult:.75},{id:23,name:"Anti Venom Gear",price:4e3,scale:120,desc:"makes you immune to poison",poisonRes:1},{id:13,name:"Medic Gear",price:5e3,scale:110,desc:"slowly regenerates health over time",healthRegen:3},{id:9,name:"Miners Helmet",price:5e3,scale:120,desc:"earn 1 extra gold per resource",extraGold:1},{id:32,name:"Musketeer Hat",price:5e3,scale:120,desc:"reduces cost of projectiles",projCost:.5},{id:7,name:"Bull Helmet",price:6e3,scale:120,desc:"increases damage done but drains health",healthRegen:-5,dmgMultO:1.5,spdMult:.96},{id:22,name:"Emp Helmet",price:6e3,scale:120,desc:"turrets won't attack but you move slower",antiTurret:1,spdMult:.7},{id:12,name:"Booster Hat",price:6e3,scale:120,desc:"increases your movement speed",spdMult:1.16},{id:26,name:"Barbarian Armor",price:8e3,scale:120,desc:"knocks back enemies that attack you",dmgK:.6},{id:21,name:"Plague Mask",price:1e4,scale:120,desc:"melee attacks deal poison damage",poisonDmg:5,poisonTime:6},{id:46,name:"Bull Mask",price:1e4,scale:120,desc:"bulls won't target you unless you attack them",bullRepel:1},{id:14,name:"Windmill Hat",topSprite:!0,price:1e4,scale:120,desc:"generates points while worn",pps:1.5},{id:11,name:"Spike Gear",topSprite:!0,price:1e4,scale:120,desc:"deal damage to players that damage you",dmg:.45},{id:53,name:"Turret Gear",topSprite:!0,price:1e4,scale:120,desc:"you become a walking turret",turret:{proj:1,range:700,rate:2500},spdMult:.7},{id:20,name:"Samurai Armor",price:12e3,scale:120,desc:"increased attack speed and fire rate",atkSpd:.78},{id:58,name:"Dark Knight",price:12e3,scale:120,desc:"restores health when you deal damage",healD:.4},{id:27,name:"Scavenger Gear",price:15e3,scale:120,desc:"earn double points for each kill",kScrM:2},{id:40,name:"Tank Gear",price:15e3,scale:120,desc:"increased damage to buildings but slower movement",spdMult:.3,bDmg:3.3},{id:52,name:"Thief Gear",price:15e3,scale:120,desc:"steal half of a players gold when you kill them",goldSteal:.5},{id:55,name:"Bloodthirster",price:2e4,scale:120,desc:"Restore Health when dealing damage. And increased damage",healD:.25,dmgMultO:1.2},{id:56,name:"Assassin Gear",price:2e4,scale:120,desc:"Go invisible when not moving. Can't eat. Increased speed",noEat:!0,spdMult:1.1,invisTimer:1e3}],this.accessories=[{id:12,name:"Snowball",price:1e3,scale:105,xOff:18,desc:"no effect"},{id:9,name:"Tree Cape",price:1e3,scale:90,desc:"no effect"},{id:10,name:"Stone Cape",price:1e3,scale:90,desc:"no effect"},{id:3,name:"Cookie Cape",price:1500,scale:90,desc:"no effect"},{id:8,name:"Cow Cape",price:2e3,scale:90,desc:"no effect"},{id:11,name:"Monkey Tail",price:2e3,scale:97,xOff:25,desc:"Super speed but reduced damage",spdMult:1.35,dmgMultO:.2},{id:17,name:"Apple Basket",price:3e3,scale:80,xOff:12,desc:"slowly regenerates health over time",healthRegen:1},{id:6,name:"Winter Cape",price:3e3,scale:90,desc:"no effect"},{id:4,name:"Skull Cape",price:4e3,scale:90,desc:"no effect"},{id:5,name:"Dash Cape",price:5e3,scale:90,desc:"no effect"},{id:2,name:"Dragon Cape",price:6e3,scale:90,desc:"no effect"},{id:1,name:"Super Cape",price:8e3,scale:90,desc:"no effect"},{id:7,name:"Troll Cape",price:8e3,scale:90,desc:"no effect"},{id:14,name:"Thorns",price:1e4,scale:115,xOff:20,desc:"no effect"},{id:15,name:"Blockades",price:1e4,scale:95,xOff:15,desc:"no effect"},{id:20,name:"Devils Tail",price:1e4,scale:95,xOff:20,desc:"no effect"},{id:16,name:"Sawblade",price:12e3,scale:90,spin:!0,xOff:0,desc:"deal damage to players that damage you",dmg:.15},{id:13,name:"Angel Wings",price:15e3,scale:138,xOff:22,desc:"slowly regenerates health over time",healthRegen:3},{id:19,name:"Shadow Wings",price:15e3,scale:138,xOff:22,desc:"increased movement speed",spdMult:1.1},{id:18,name:"Blood Wings",price:2e4,scale:178,xOff:26,desc:"restores health when you deal damage",healD:.2},{id:21,name:"Corrupt X Wings",price:2e4,scale:178,xOff:26,desc:"deal damage to players that damage you",dmg:.25}]}},Xt=$t.hats,Ut=$t.accessories,Jt=new class{constructor(e,t,i,a,n,s,l,o,r){this.addProjectile=function(c,d,h,p,u,m,f,g,w,y){let x,b=s.projectiles[m];for(let e=0;e<t.length;++e)if(!t[e].active){x=t[e];break}return x||(x=new e(i,a,n,s,l,o,r),x.sid=t.length,t.push(x)),x.init(m,c,d,h,u,b.dmg,p,b.scale,f),x.ignoreObj=g,x.layer=w||b.layer,x.inWindow=y,x.src=b.src,x}}}(class{constructor(e,t,i,a,n,s,l){this.init=function(e,t,i,a,n,s,l,o,r){this.active=!0,this.tickActive=!0,this.indx=e,this.x=t,this.y=i,this.x2=t,this.y2=i,this.dir=a,this.skipMov=!0,this.speed=n,this.dmg=s,this.scale=o,this.range=l,this.r2=l,this.owner=r},this.update=function(e){if(this.active){let t=this.speed*e;this.skipMov?this.skipMov=!1:(this.x+=t*Math.cos(this.dir),this.y+=t*Math.sin(this.dir),this.range-=t,this.range<=0&&(this.x+=this.range*Math.cos(this.dir),this.y+=this.range*Math.sin(this.dir),t=1,this.range=0,this.active=!1))}},this.tickUpdate=function(e){if(this.tickActive){let t=this.speed*e;this.skipMov?this.skipMov=!1:(this.x2+=t*Math.cos(this.dir),this.y2+=t*Math.sin(this.dir),this.r2-=t,this.r2<=0&&(this.x2+=this.r2*Math.cos(this.dir),this.y2+=this.r2*Math.sin(this.dir),t=1,this.r2=0,this.tickActive=!1))}}}},de,se,ne,qt,zt,u,Yt),Qt=new class{constructor(e,t,i,a,n,s,l,o,r){this.aiTypes=[{id:0,src:"cow_1",killScore:150,health:500,weightM:.8,speed:95e-5,turnSpeed:.001,scale:72,drop:["food",50]},{id:1,src:"pig_1",killScore:200,health:800,weightM:.6,speed:85e-5,turnSpeed:.001,scale:72,drop:["food",80]},{id:2,name:"Bull",src:"bull_2",hostile:!0,dmg:20,killScore:1e3,health:1800,weightM:.5,speed:94e-5,turnSpeed:74e-5,scale:78,viewRange:800,chargePlayer:!0,drop:["food",100]},{id:3,name:"Bully",src:"bull_1",hostile:!0,dmg:20,killScore:2e3,health:2800,weightM:.45,speed:.001,turnSpeed:8e-4,scale:90,viewRange:900,chargePlayer:!0,drop:["food",400]},{id:4,name:"Wolf",src:"wolf_1",hostile:!0,dmg:8,killScore:500,health:300,weightM:.45,speed:.001,turnSpeed:.002,scale:84,viewRange:800,chargePlayer:!0,drop:["food",200]},{id:5,name:"Quack",src:"chicken_1",dmg:8,killScore:2e3,noTrap:!0,health:300,weightM:.2,speed:.0018,turnSpeed:.006,scale:70,drop:["food",100]},{id:6,name:"MOOSTAFA",nameScale:50,src:"enemy",hostile:!0,dontRun:!0,fixedSpawn:!0,spawnDelay:6e4,noTrap:!0,colDmg:100,dmg:40,killScore:8e3,health:18e3,weightM:.4,speed:7e-4,turnSpeed:.01,scale:80,spriteMlt:1.8,leapForce:.9,viewRange:1e3,hitRange:210,hitDelay:1e3,chargePlayer:!0,drop:["food",100]},{id:7,name:"Treasure",hostile:!0,nameScale:35,src:"crate_1",fixedSpawn:!0,spawnDelay:12e4,colDmg:200,killScore:5e3,health:2e4,weightM:.1,speed:0,turnSpeed:0,scale:70,spriteMlt:1},{id:8,name:"MOOFIE",src:"wolf_2",hostile:!0,fixedSpawn:!0,dontRun:!0,hitScare:4,spawnDelay:3e4,noTrap:!0,nameScale:35,dmg:10,colDmg:100,killScore:3e3,health:7e3,weightM:.45,speed:.0015,turnSpeed:.002,scale:90,viewRange:800,chargePlayer:!0,drop:["food",1e3]}],this.spawn=function(c,d,h,p){let u=e.find((e=>!e.active));return u||(u=new t(e.length,n,i,a,l,s,o,r),e.push(u)),u.init(c,d,h,p,this.aiTypes[p]),u}}}(ne,class{constructor(e,t,i,a,n,s,l,o){this.sid=e,this.isAI=!0,this.nameIndex=n.randInt(0,s.cowNames.length-1),this.init=function(e,t,i,a,n){this.x=e,this.y=t,this.startX=n.fixedSpawn?e:null,this.startY=n.fixedSpawn?t:null,this.xVel=0,this.yVel=0,this.zIndex=0,this.dir=i,this.dirPlus=0,this.index=a,this.src=n.src,n.name&&(this.name=n.name),this.weightM=n.weightM,this.speed=n.speed,this.killScore=n.killScore,this.turnSpeed=n.turnSpeed,this.scale=n.scale,this.maxHealth=n.health,this.leapForce=n.leapForce,this.health=this.maxHealth,this.chargePlayer=n.chargePlayer,this.viewRange=n.viewRange,this.drop=n.drop,this.dmg=n.dmg,this.hostile=n.hostile,this.dontRun=n.dontRun,this.hitRange=n.hitRange,this.hitDelay=n.hitDelay,this.hitScare=n.hitScare,this.spriteMlt=n.spriteMlt,this.nameScale=n.nameScale,this.colDmg=n.colDmg,this.noTrap=n.noTrap,this.spawnDelay=n.spawnDelay,this.hitWait=0,this.waitCount=1e3,this.moveCount=0,this.targetDir=0,this.active=!0,this.alive=!0,this.runFrom=null,this.chargeTarget=null,this.dmgOverTime={}};let r=0,c=0;this.animate=function(e){this.animTime>0&&(this.animTime-=e,this.animTime<=0?(this.animTime=0,this.dirPlus=0,r=0,c=0):0==c?(r+=e/(this.animSpeed*s.hitReturnRatio),this.dirPlus=n.lerp(0,this.targetAngle,Math.min(1,r)),r>=1&&(r=1,c=1)):(r-=e/(this.animSpeed*(1-s.hitReturnRatio)),this.dirPlus=n.lerp(0,this.targetAngle,Math.max(0,r))))},this.startAnim=function(){this.animTime=this.animSpeed=600,this.targetAngle=.8*Math.PI,r=0,c=0}}},se,zt,null,u,Yt),Zt=new class{constructor(){this.texts=[],this.stack=[],this.update=function(e,t,i,a){t.textBaseline="middle",t.textAlign="center";for(let n=0;n<this.texts.length;++n)this.texts[n].life&&(this.texts[n].update(e),this.texts[n].render(t,i,a))},this.showText=function(e,t,i,a,n,s,l){let o;for(let e=0;e<this.texts.length;++e)if(!this.texts[e].life){o=this.texts[e];break}o||(o=new pt,this.texts.push(o)),o.init(e,t,i,a,n,s,l)}}},Kt=new class{constructor(e,t){function i(e){return t.weapons[ee.weapons[ee.weapons[1]?Number(10==ee.weapons[1]):0]].dmg/4*(ee.skins[40]?3.3:1)*(t.weapons[ee.weapons[Number(10==ee.weapons[1])]].sDmg||1)}function a(e,i){var a=t.list[ee.items[e]];Dt(e,i)&&a.dmg&&ce.length&&ce.find((e=>6!=e.skinIndex&&Tt(ee.buildItemPosition(t.list[ee.items[2]],i),e)<=35+t.list[ee.items[2]].scale))&&(he=!0)}this.dist=0,this.aim=0,this.inTrap=!1,this.replaced=!1,this.antiTrapped=!1,this.info={},this.notFast=function(){return 10==ee.weapons[1]&&(this.info.health>t.weapons[ee.weapons[0]].dmg||5==ee.weapons[0])},this.testCanPlace=function(i,a=-Math.PI/2,n=Math.PI/2,s=Math.PI/18,l,o,r){try{let c=t.list[ee.items[i]],d=ee.scale+c.scale+(c.placeOffset||0),h={attempts:0,placed:0},p=[];re.forEach((e=>{p.push({x:e.x,y:e.y,active:e.active,blocker:e.blocker,scale:e.scale,isItem:e.isItem,type:e.type,colDiv:e.colDiv,getScale:function(e,t){return e=e||1,this.scale*(this.isItem||2==this.type||3==this.type||4==this.type?1:.6*e)*(t?1:this.colDiv)}})}));for(let t=a;t<n;t+=s){h.attempts++;let a=l+t,n=ee.x2+d*Math.cos(a),s=ee.y2+d*Math.sin(a);p.find((t=>t.active&&e.getDistance(n,s,t.x,t.y)<c.scale+(t.blocker?t.blocker:t.getScale(.6,t.isItem))))||(18!=c.id&&s>=u.mapScale/2-u.riverWidth/2&&s<=u.mapScale/2+u.riverWidth/2||(!o&&r||F?!F&&r.inTrap?e.getAngleDist(we.aim2+Math.PI,a+Math.PI)<=Math.PI?vt(2,a,1):15==ee.items[4]&&vt(4,a,1):e.getAngleDist(we.aim2,a)<=u.gatherAngle/1.5?vt(2,a,1):15==ee.items[4]&&vt(4,a,1):vt(i,a,1),p.push({x:n,y:s,active:!0,blocker:c.blocker,scale:c.scale,isItem:!0,type:null,colDiv:c.colDiv,getScale:function(){return this.scale}}),e.getAngleDist(we.aim2,a)<=1&&h.placed++))}h.placed>0&&o&&c.dmg&&we.dist2<=t.weapons[ee.weapons[0]].range+1.8*ee.scale&&v.spikeTick&&(ei.canSpikeTick=!0)}catch(e){}},this.checkSpikeTick=function(){try{if(![3,4,5].includes(we.primaryIndex))return!1;if(!m("safeAntiSpikeTick").checked&&!ye.autoPush&&(null==we.primaryIndex||we.reloads[we.primaryIndex]>Y.tickRate))return!1;if(we.dist2<=t.weapons[we.primaryIndex||5].range+1.8*we.scale){let i=t.list[9],a=we.scale+i.scale+(i.placeOffset||0),n=0,s={attempts:0,block:"unblocked"};for(let t=-1;t<=1;t+=.1){s.attempts++;let l=e.getDirect(ee,we,2,2)+t,o=we.x2+a*Math.cos(l),r=we.y2+a*Math.sin(l);if(!re.find((t=>t.active&&e.getDistance(o,r,t.x,t.y)<i.scale+(t.blocker?t.blocker:t.getScale(.6,t.isItem))))&&!(r>=u.mapScale/2-u.riverWidth/2&&r<=u.mapScale/2+u.riverWidth/2)){n++,s.block="blocked";break}}if(n)return ye.anti0Tick=1,ee.chat.message="Anti SpikeTick "+we.sid,ee.chat.count=2e3,!0}}catch(e){return null}return!1},this.protect=function(e){if(!v.antiTrap)return;if(ee.items[4]){for(let t=0;t<2*Math.PI;t+=Math.PI/4)this.testCanPlace(4,-Math.PI/2,Math.PI/2,Math.PI/18,e+t);this.antiTrapped=!0}},this.runPrePlacer=function(){if(ce.length){if(G.count>=80)return;let n=re.find((e=>Tt(ee,e)<=250&&100*e.buildHealth/e.health<=Math.max(i(ee),i(fe))+10));if(ce.length&&n&&!ee.inTrap&&Tt(ee,n)<=t.weapons[ee.weapons[0]].range&&Tt(fe,n)<=t.weapons[ee.weapons[0]].range){let i=ee.buildItemPosition(t.list[ee.items[2]],It(ee,n)),s={x:i.x,y:i.y,scale:t.list[ee.items[2]].scale};ce.length&&dt.add(i,1,n,s.scale,!0),qi((()=>{a(2,It(ee,n)),Ui.filter((t=>e.getAngleDist(t,It(ee,n))<=Math.PI/2)).forEach((function(e){a(2,e)}))}),1)}}},this.autoPlace=function(){const t=re.filter((e=>e.trap&&e.active)).sort(((t,i)=>e.getDist(t,ee,0,2)-e.getDist(i,ee,0,2))).find((e=>{const t=Math.hypot(e.y-ee.y2,e.x-ee.x2);return e!==ee&&(ee.sid===e.owner.sid||Et(e.owner.sid))&&t<=50}));let i=re.filter((t=>t.trap&&t.active&&e.getDist(t,ie,0,2)<=ie.scale+t.getScale()+5&&!t.isTeamObject(ie))).sort(((t,i)=>e.getDist(t,ie,0,2)-e.getDist(i,ie,0,2)))[0];if(Kt.inTrap&&(Kt.protect(Kt.aim,i),Kt.inTrap||Kt.protect(Kt.aim,i)),v.autoPlace&&!1===Si){if(we.dist2<400){let t={inTrap:!1},i=re.filter((t=>t.trap&&t.active&&t.isTeamObject(ee)&&e.getDist(t,ee,0,2)<=ee.scale+t.getScale()+5)).sort(((t,i)=>e.getDist(t,ee,0,2)-e.getDist(i,ee,0,2)))[0];t.inTrap=!!i,we.dist2<=300&&(we.dist2<=200?this.testCanPlace(4,0,2*Math.PI,Math.PI/24,we.aim2,0,{inTrap:t.inTrap}):(ee.items[4]=15,this.testCanPlace(4,0,2*Math.PI,Math.PI/24,we.aim2)))}else we.dist2<=300&&(ee.items[4]=15,this.testCanPlace(4,0,2*Math.PI,Math.PI/24,we.aim2));if(t&&we.dist2<=160){const e=t.x,i=t.y,a=102,n=64;for(let t=0;t<n;t++){const s=2*Math.PI*t/n,l=[e+a*Math.cos(s),i+a*Math.sin(s)],o=Math.hypot(l[0]-ee.x2,l[1]-ee.y2);if(!Ht.has(JSON.stringify(l))&&Rt(l)&&o<=87){Dt(2,Math.atan2(l[1]-ee.y2,l[0]-ee.x2)),Ht.add(JSON.stringify(l))}}}}},this.replacer=function(i){i&&st&&(this.antiTrapped||Y.tickBase((()=>{e.getDirect(i,ee,0,2);let a=e.getDist(i,ee,0,2),n=(s=i.x,l=i.y,o=ee.x,r=ee.y,Math.atan2(r-l,o-s));var s,l,o,r;if(!(c&&a<=t.weapons[ee.weaponIndex].range+ee.scale)&&(a<=400&&we.dist2<=400&&i.health<20)){!this.checkSpikeTick()&&we.dist2<=t.weapons[we.primaryIndex||5].range+1.8*we.scale?this.testCanPlace(2,0,2*Math.PI,Math.PI/24,n,1):15==ee.items[4]&&this.testCanPlace(4,0,2*Math.PI,Math.PI/24,n,1),this.replaced=!0}}),1))}}}(Yt,zt),ei=new class{constructor(){this.wait=!1,this.can=!1,this.isTrue=!1,this.nobull=!1,this.ticking=!1,this.canSpikeTick=!1,this.startTick=!1,this.readyTick=!1,this.canCounter=!1,this.revTick=!1,this.syncHit=!1,this.changeType=function(e){this.wait=!1,this.isTrue=!0,ye.autoAim=!0;we.backupNobull;we.backupNobull=!1,"rev"==e?(xt(ee.weapons[1]),wt(53,0),bt(),setTimeout((()=>{xt(ee.weapons[0]),wt(7,0),setTimeout((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),225)}),100)):"nobull"==e?(xt(ee.weapons[0]),wt(7,0),bt(),setTimeout((()=>{xt(ee.weapons[1]),wt(0==ee.reloads[53]?53:6,0),setTimeout((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),255)}),105)):"normal"==e?(xt(ee.weapons[0]),wt(7,0),bt(),setTimeout((()=>{xt(ee.weapons[1]),wt(0==ee.reloads[53]?53:6,0),setTimeout((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),255)}),100)):setTimeout((()=>{this.isTrue=!1,ye.autoAim=!1}),50)},this.spikeTickType=function(){this.isTrue=!0,ye.autoAim=!0,xt(ee.weapons[0]),wt(7,0),wt(21,1),bt(),Y.tickBase((()=>{wt(53,0),xt(ee.weapons[0]),wt(53,0),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,wt(6,0)}),3)}),1)},this.counterType=function(){this.isTrue=!0,ye.autoAim=!0,xt(ee.weapons[0]),wt(7,0),wt(21,1),bt(),Y.tickBase((()=>{0==ee.reloads[53]&&m("turretCombat").checked?(xt(ee.weapons[0]),wt(53,0),wt(21,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),1)):(bt(),this.isTrue=!1,ye.autoAim=!1)}),1)},this.antiCounterType=function(){ye.autoAim=!0,this.isTrue=!0,a=!0,xt(ee.weapons[0]),wt(6,0),wt(21,1),K.send("D",we.aim2),bt(),Y.tickBase((()=>{wt(0==ee.reloads[53]&&ee.skins[53]?53:6,0),wt(21,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,a=!1}),1)}),1)},this.rangeType=function(e){this.isTrue=!0,ye.autoAim=!0,"ageInsta"==e?(ye.ageInsta=!1,18==ee.items[5]&&vt(5,we.aim2),U("a",void 0,1),wt(22,0),wt(21,1),Y.tickBase((()=>{xt(ee.weapons[1]),wt(53,0),wt(21,1),bt(),Y.tickBase((()=>{gt(12),xt(ee.weapons[1]),wt(53,0),wt(21,1),Y.tickBase((()=>{gt(15),xt(ee.weapons[1]),wt(53,0),wt(21,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),1)}),1)}),1)}),1)):(xt(ee.weapons[1]),0==ee.reloads[53]&&we.dist2<=700&&22!=we.skinIndex?wt(53,0):wt(20,0),wt(11,1),bt(),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1}),1))},this.Snowtick=function(){this.isTrue=!0,ye.autoAim=!0,xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0]),Lt(),wt(19,1),U("a",we.aim2,1),Y.tickBase((()=>{xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0]),wt(53,0),U("a",we.aim2,1),Y.tickBase((()=>{xt(ee.weapons[0]),wt(7,0),bt(),U("a",we.aim2,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,U("a",void 0,1)}),1)}),1)}),1)},this.oneTickType=function(){this.isTrue=!0,ye.autoAim=!0,xt(ee.weapons[1]),wt(53,0),U("a",we.aim2,1),15==ee.weapons[1]&&(ye.revAim=!0,bt()),Y.tickBase((()=>{const e=re.filter((e=>e.trap&&e.active)).sort(((e,t)=>Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2))).find((e=>{const t=Math.hypot(e.y-we.y2,e.x-we.x2);return e!==ee&&(ee.sid===e.owner.sid||Et(e.owner.sid))&&t<=30}));[6,22].includes(we.skinIndex)&&e&&K.send("6","p_OT [2/3]"),ye.revAim=!1,xt(ee.weapons[0]),wt(7,0),U("a",we.aim2,1),15!=ee.weapons[1]&&bt(),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,U("a",void 0,1)}),1)}),1)},this.threeOneTickType=function(){this.isTrue=!0,ye.autoAim=!0,xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0]),Lt(),wt(11,1),U("a",we.aim2,1),Y.tickBase((()=>{xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0]),wt(53,0),wt(11,1),U("a",we.aim2,1),Y.tickBase((()=>{const e=re.filter((e=>e.trap&&e.active)).sort(((e,t)=>Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2))).find((e=>{const t=Math.hypot(e.y-we.y2,e.x-we.x2);return e!==ee&&(ee.sid===e.owner.sid||Et(e.owner.sid))&&t<=30}));[6,22].includes(we.skinIndex)&&e&&K.send("6","p_OT [2/3]"),xt(ee.weapons[0]),wt(7,0),wt(19,1),bt(),U("a",we.aim2,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,U("a",void 0,1)}),1)}),1)}),1)},this.kmTickType=function(){this.isTrue=!0,ye.autoAim=!0,ye.revAim=!0,xt(ee.weapons[1]),wt(53,0),wt(11,1),bt(),U("a",we.aim2,1),Y.tickBase((()=>{ye.revAim=!1,xt(ee.weapons[0]),wt(7,0),wt(19,1),U("a",we.aim2,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,U("a",void 0,1)}),1)}),1)},this.boostTickType=function(){this.isTrue=!0,ye.autoAim=!0,Lt(),wt(11,1),U("a",we.aim2,1),Y.tickBase((()=>{15==ee.weapons[1]&&(ye.revAim=!0),xt(ee.weapons[[9,12,13,15].includes(ee.weapons[1])?1:0]),wt(53,0),wt(11,1),[9,12,13,15].includes(ee.weapons[1])&&bt(),U("a",we.aim2,1),vt(4,we.aim2),Y.tickBase((()=>{ye.revAim=!1,xt(ee.weapons[0]),wt(7,0),wt(21,1),[9,12,13,15].includes(ee.weapons[1])||bt(),U("a",we.aim2,1),Y.tickBase((()=>{bt(),this.isTrue=!1,ye.autoAim=!1,U("a",void 0,1)}),1)}),1)}),1)},this.gotoGoal=function(e,t){let i=e=>e*u.playerScale,a=e-t,n=e+t,s=e-i(1),l=e+i(1),o=e-i(2),r=e+i(2),c=e-i(4),d=e+i(4),h=function(e,t){ee.y2>=u.mapScale/2-u.riverWidth/2&&ee.y2<=u.mapScale/2+u.riverWidth/2&&0==t?wt(31,0):wt(e,t)};if(fe.length){let e=we.dist2;return this.ticking=!0,e>=a&&e<=n?(h(22,0),h(11,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0]),{dir:void 0,action:1}):e<a?(e>=c?e>=o?e>=s?(h(40,0),h(10,1),v.slowOT?ee.buildIndex!=ee.items[1]&&yt(ee.items[1]):(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(h(22,0),h(13,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(h(6,0),h(12,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(Lt(),h(11,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])),{dir:we.aim2+Math.PI,action:0}):e>n?(e<=d?e<=r?e<=l?(h(40,0),h(9,1),v.slowOT?ee.buildIndex!=ee.items[1]&&yt(ee.items[1]):(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(h(22,0),h(13,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(h(6,0),h(12,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])):(Lt(),h(11,1),(ee.weaponIndex!=ee.weapons[[10,14].includes(ee.weapons[1])?1:0]||ee.buildIndex>-1)&&xt(ee.weapons[[10,14].includes(ee.weapons[1])?1:0])),{dir:we.aim2,action:0}):{dir:void 0,action:0}}return this.ticking=!1,{dir:void 0,action:0}},this.bowMovement=function(){let e=this.gotoGoal(685,3);e.action?0!=ee.reloads[53]||this.isTrue?U("a",e.dir,1):this.rangeType("ageInsta"):U("a",e.dir,1)},this.tickMovement=function(){const e=re.filter((e=>e.trap&&e.active)).sort(((e,t)=>Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2))).find((e=>{const t=Math.hypot(e.y-we.y2,e.x-we.x2);return e!==ee&&(ee.sid===e.owner.sid||Et(e.owner.sid))&&t<=50}));let t=this.gotoGoal([10,14].includes(ee.weapons[1])&&ee.y2>u.snowBiomeTop?240:15==ee.weapons[1]?250:ee.y2<=u.snowBiomeTop?[10,14].includes(ee.weapons[1])?265:255:270,3);t.action&&(![6,22].includes(we.skinIndex)||[6,22].includes(we.skinIndex)&&e)&&0==ee.reloads[53]&&!this.isTrue?[10,14].includes(ee.weapons[1])&&ee.y2>u.snowBiomeTop||15==ee.weapons[1]?this.threeOneTickType():this.Snowtick():U("a",t.dir,1)},this.kmTickMovement=function(){let e=this.gotoGoal(240,3);e.action?22==we.skinIndex||0!=ee.reloads[53]||this.isTrue||(Y.tick-we.poisonTick)%u.serverUpdateRate!=8?U("a",e.dir,1):this.kmTickType():U("a",e.dir,1)},this.boostTickMovement=function(){let e=9==ee.weapons[1]?365:12==ee.weapons[1]?380:13==ee.weapons[1]?390:15==ee.weapons[1]?365:370,t=9==ee.weapons[1]?2:12==ee.weapons[1]||13==ee.weapons[1]?1.5:15==ee.weapons[1]?2:3,i=this.gotoGoal(e,t);i.action?0!=ee.reloads[53]||this.isTrue?U("a",i.dir,1):this.boostTickType():U("a",i.dir,1)},this.perfCheck=function(e,t){if(11==t.weaponIndex&&Yt.getAngleDist(t.aim2+Math.PI,t.d2)<=u.shieldAngle)return!1;if(![9,12,13,15].includes(ee.weapons[1]))return!0;let i={x:t.x2+70*Math.cos(t.aim2+Math.PI),y:t.y2+70*Math.sin(t.aim2+Math.PI)};if(Yt.lineInRect(e.x2-e.scale,e.y2-e.scale,e.x2+e.scale,e.y2+e.scale,i.x,i.y,i.x,i.y))return!0;let a=ne.filter((e=>e.visible)).find((e=>{if(Yt.lineInRect(e.x2-e.scale,e.y2-e.scale,e.x2+e.scale,e.y2+e.scale,i.x,i.y,i.x,i.y))return!0}));return!a&&(a=re.filter((e=>e.active)).find((e=>{let t=e.getScale();if(!e.ignoreCollision&&Yt.lineInRect(e.x-t,e.y-t,e.x+t,e.y+t,i.x,i.y,i.x,i.y))return!0})),!a)}}},ti=new class{constructor(e,t){this.hat=function(){e.forEach((e=>{let t=xe(Xt,e);t&&!ee.skins[e]&&ee.points>=t.price&&U("c",1,e,0)}))},this.acc=function(){t.forEach((e=>{let t=xe(Ut,e);t&&!ee.tails[e]&&ee.points>=t.price&&U("c",1,e,1)}))}}}([15,31,6,7,22,12,53,20,40],[11,13,19,18,21]),ii=(new class{constructor(){this.sb=function(e){e(3),e(17),e(31),e(23),e(9),e(38)},this.kh=function(e){e(3),e(17),e(31),e(23),e(10),e(38),e(4),e(25)},this.pb=function(e){e(5),e(17),e(32),e(23),e(9),e(38)},this.ph=function(e){e(5),e(17),e(32),e(23),e(10),e(38),e(28),e(25)},this.db=function(e){e(7),e(17),e(31),e(23),e(9),e(34)},this.km=function(e){e(7),e(17),e(31),e(23),e(10),e(38),e(4),e(15)}}},{}),ai=[],ni=[],si=[],li={active:!1,grid:40,scale:1440,x:14400,y:14400,chaseNear:!1,gogogogogo:!1,array:[],lastX:this.grid/2,lastY:this.grid/2};function oi(e){U("6",e.slice(0,30))}let ri=[];function ci(e,t,i,a,n,s,l,o){let r=0==s?9:2==s?12:3==s?13:5==s&&15,c=2*u.playerScale,d={x:1==s?e:e-c*Math.cos(i),y:1==s?t:t-c*Math.sin(i)},h=se.filter((e=>e.visible&&Yt.getDist(d,e,0,2)<=e.scale)).sort((function(e,t){return Yt.getDist(d,e,0,2)-Yt.getDist(d,t,0,2)}))[0];h&&(1==s?h.shooting[53]=1:(h.shootIndex=r,h.shooting[1]=1,function(e,t,i,a,n,s){e.isTeam(ee)||(Ye=Yt.getDirect(ee,e,2,2),Yt.getAngleDist(Ye,t)<=.2&&(e.bowThreat[s]++,5==n&&di++,setTimeout((()=>{e.bowThreat[s]--,5==n&&di--}),i/a),(e.bowThreat[9]>=1&&(e.bowThreat[12]>=1||e.bowThreat[15]>=1)||di>=2)&&(vt(1,e.aim2),K.send("6","ranged insta homo"),ye.anti0Tick=4,ye.antiSync||Ot())))}(h,i,a,n,s,r)))}let di=0;function hi(e,t,i){if(ee&&e)if(Yt.removeAllChildren(Ne),Ne.classList.add("visible"),Yt.generateElement({id:"itemInfoName",text:Yt.capitalizeFirst(e.name),parent:Ne}),Yt.generateElement({id:"itemInfoDesc",text:e.desc,parent:Ne}),i);else if(t)Yt.generateElement({class:"itemInfoReq",text:e.type?"secondary":"primary",parent:Ne});else{for(let t=0;t<e.req.length;t+=2)Yt.generateElement({class:"itemInfoReq",html:e.req[t]+"<span class='itemInfoReqVal'> x"+e.req[t+1]+"</span>",parent:Ne});e.group.limit&&Yt.generateElement({class:"itemInfoLmt",text:(ee.itemCounts[e.group.id]||0)+"/"+(u.isSandbox?99:e.group.limit),parent:Ne})}else Ne.classList.remove("visible")}function pi(){Oe=window.innerWidth,He=window.innerHeight}window.addEventListener("resize",Yt.checkTrusted(pi)),pi();const ui=document.getElementById("touch-controls-fullscreen");ui.style.display="block",ui.addEventListener("mousemove",(function(e){ze=e.clientX,qe=e.clientY}),!1);let mi={left:!1,middle:!1,right:!1};function fi(){return ee?(ee.lockDir||(at=Math.atan2(qe-He/2,ze-Oe/2)),at||0):0}function gi(e){if(e){let e=re.filter((e=>("spikes"==e.name||"greater spikes"==e.name||"spinning spikes"==e.name||"poison spikes"==e.name)&&Yi(ee,e)<ee.scale+e.scale+22&&!e.isTeamObject(ie)&&e.active))[0];if(!ee)return"0";if(ye.autoAim||(mi.left||F&&we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*we.scale&&!Kt.inTrap)&&0==ee.reloads[ee.weapons[0]])at=c?fi():fe.length?ye.revAim?we.aim2+Math.PI:we.aim2:fi();else if(mi.right&&0==ee.reloads[10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]])at=fi();else if(e&&0==ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]])at="S.aim";else if(Kt.inTrap&&0==ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]])at=Kt.aim;else if(!ee.lockDir){if(v.noDir)return"undefined";at=fi()}return at}if(!ee)return 0;if(ye.autoAim||(mi.left||F&&we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*we.scale&&!Kt.inTrap)&&0==ee.reloads[ee.weapons[0]])at=c?fi():fe.length?ye.revAim?we.aim2+Math.PI:we.aim2:fi();else if(mi.right&&0==ee.reloads[10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]])at=fi();else if(Qi&&0==ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]])at=ye.Saim;else if(Kt.inTrap&&0==ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]])at=Kt.aim;else if(!ee.lockDir){if(v.noDir)return;at=fi()}return at||0}function wi(){return"block"!=$e.style.display&&"block"!=je.style.display&&!B}function yi(){let e=function(){let e=0,t=0;for(let i in it){let a=it[i];e+=!!tt[i]*a[0],t+=!!tt[i]*a[1]}return 0==e&&0==t?void 0:Math.atan2(t,e)}();(null==_||null==e||Math.abs(e-_)>.3)&&(ye.autoPush||U("a",e,1),_=e)}function xi(e){return(ee.scale+e.getScale())/(ee.maxSpeed*zt.weapons[ee.weaponIndex].spdMult)+(e.dmg&&!e.isTeamObject(ee)?35:0)}ui.addEventListener("mousedown",(function(e){1!=nt&&(nt=1,0==e.button?mi.left=!0:1==e.button?mi.middle=!0:2==e.button&&(mi.right=!0))}),!1),ui.addEventListener("mouseup",Yt.checkTrusted((function(e){0!=nt&&(nt=0,0==e.button?mi.left=!1:1==e.button?mi.middle=!1:2==e.button&&(mi.right=!1))}))),ui.addEventListener("wheel",(function(e){e.deltaY<0?ye.reSync=!0:ye.reSync=!1}),!1),addEventListener("keydown",Yt.checkTrusted((function(e){let t=e.which||e.keyCode||0;ee&&ee.alive&&wi()&&(tt[t]||(tt[t]=1,lt[e.key]=1,27==t?(N=!N,$("#menuDiv").toggle(),$("#menuChatDiv").toggle()):69==t?bt():67==t?(ii.x=ee.x,ii.y=ee.y):null!=ee.weapons[t-49]?ee.weaponCode=ee.weapons[t-49]:it[t]?yi():"m"==e.key?ot.placeSpawnPads=!ot.placeSpawnPads:"z"==e.key?ot.place=!ot.place:"p"==e.key?(li.active=!1,Mi.pushing=!1,Si=!1):"Z"==e.key?"function"==typeof window.debug&&window.debug():32==t?(U("c",1,fi(),1),U("c",0,fi(),1)):","==e.key&&(ee.sync=!0)))}))),window.addEventListener("keyup",Yt.checkTrusted((function(e){if(ee&&ee.alive){let t=e.which||e.keyCode||0;13==t?function(){if("none"!=D.style.display)if(je.style.display="none",""!=A.value){let e=function(e){return{found:e.startsWith("/")&&k[e.slice(1).split(" ")[0]],fv:k[e.slice(1).split(" ")[0]]}},t=e(A.value);t.found?"function"==typeof t.fv.action&&t.fv.action(A.value):oi(A.value),A.value="",A.blur()}else B?A.blur():A.focus()}():wi()&&tt[t]&&(tt[t]=0,lt[e.key]=0,it[t]?yi():","==e.key&&(ee.sync=!1))}})));let bi={"0:41":"Moon, a hole of light","0:48":"Through the big top tent up high","0:50":"Here before and after me","0:52":"Shining down on me","0:58":"Moon, tell me if I could","1:02":"Send up my heart to you","1:05":"So, when I die, which I must do","1:14":"Could it shine down here with you?","1:17":"Cause my love is mine, all mine","1:23":"I love, my, my, mine","1:24":"Nothing in the world belongs to me","1:26":"But my love, mine, all mine, all mine","1:49":"My baby here on Earth","1:54":"Showed me what my heart was worth","1:58":"So, when it comes to be my turn","2:02":"Could you shine it down here for her?","2:05":"Cause my love is mine, all mine","2:10":"I love, my, my, mine","2:15":"Nothing in the world belongs to me","2:18":"But my love, mine, all mine","2:22":"Nothing in the world is mine for free","2:25":"But my love, mine, all mine, all mine"};const ki=new Audio("https://cdn.discordapp.com/attachments/1148402801387520003/1175206517650227311/tomp3.cc_-_Mitski_My_Love_Mine_All_Mine_Official_Video.mp3?ex=656a635c&is=6557ee5c&hm=18ddbb9e23e5ac29d3e979f02106bda29eaafe19033c619d0536710dbbded5b6&");let vi=!1,Ti="";function Ii(){si=[],function(){let e=re.filter((e=>ee.canSee(e)&&e.active));for(let t=0;t<li.grid;t++){si[t]=[];for(let i=0;i<li.grid;i++){let a={x:ee.x2-li.scale/2+li.scale/li.grid*i,y:ee.y2-li.scale/2+li.scale/li.grid*t};if(Yt.getDist(li.chaseNear?we:li,a,li.chaseNear?2:0,0)<=(li.chaseNear?35:60)){li.lastX=i,li.lastY=t,si[t][i]=0;continue}let n=e.find((e=>Yt.getDist(e,a,0,0)<=xi(e)));if(n){if(n.trap){si[t][i]=0;continue}si[t][i]=1}else si[t][i]=0}}}()}document.addEventListener("keypress",(function(e){"C"===e.key&&(vi?(ki.pause(),vi=!1):(ki.play(),ki.ontimeupdate=function(e){let t=bi[function(e){let t=~~e%60;return t<=9&&(t=`0${t}`),`${~~(e%3600/60)}:${t}`}(Math.round(0|this.currentTime))];t&&t!==Ti&&(Ti=t,K.send("6",t))},ki.onended=function(){vi&&ki.play()},vi=!0))}));var Si=!1;function Mi(){let e=re.filter((e=>e.trap&&e.active&&e.isTeamObject(ee)&&Yt.getDist(e,we,0,2)<=we.scale+e.getScale()+15)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0];if(e){let t=re.filter((t=>t.dmg&&t.active&&t.isTeamObject(ee)&&Yt.getDist(t,e,0,0)<=we.scale+e.scale+t.scale+5)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0];if(t&&l){let e=Math.atan2(we.y2-t.y,we.x2-t.x),i={x:t.x+250*Math.cos(Yt.getDirect(we,t,2,0)),y:t.y+250*Math.sin(Yt.getDirect(we,t,2,0)),x2:t.x+(Yt.getDist(we,t,2,0)+ee.scale)*Math.cos(Yt.getDirect(we,t,2,0)),y2:t.y+(Yt.getDist(we,t,2,0)+ee.scale)*Math.sin(Yt.getDirect(we,t,2,0))};re.filter((e=>e.active)).find((e=>{let t=e.getScale();if(!e.ignoreCollision&&Yt.lineInRect(e.x-t,e.y-t,e.x+t,e.y+t,ee.x2,ee.y2,i.x2,i.y2))return!0}));if(we.dist2>=zt.weapons[ee.weapons[0]].range){if(G.count>=80)return;ye.autoPush=!1,s&&(li.active=!0,li.chaseNear=!0)}else{s&&(li.active=!1,li.chaseNear=!1),Si=we.dist2<500,ye.autoPush=!0,ye.pushData={x:t.x+Math.cos(e),y:t.y+Math.sin(e),x2:ee.x2+30,y2:ee.y2+30};let a={x:we.x2+30*Math.cos(e),y:we.y2+60*Math.sin(e)},n=(Math.atan2(a.y-ee.y2,a.x-ee.x2),Yt.getDist(we,t,2,0).toString(10),ee.scale/10);if(Yt.getDist(we,t,2,0)>=300)if(Yt.lineInRect(ee.x2-n,ee.y2-n,ee.x2+n,ee.y2+n,we.x2,we.y2,i.x,i.y)){if(G.count>=80)return;U("a",we.aim2,1)}else{if(G.count>=80)return;U("a",Math.atan2(a.y-ee.y2,a.x-ee.x2),1)}else U("a",Math.atan2(a.y-ee.y2,a.x-ee.x2),1)}}else ye.autoPush&&(ye.autoPush=!1,U("a",_||void 0,1),s&&(li.active=!1,li.chaseNear=!1))}else ye.autoPush&&(ye.autoPush=!1,U("a",_||void 0,1),s&&(li.active=!1,li.chaseNear=!1))}function Di(e){pe.push(new mt(e.x,e.y,e.dir,e.buildIndex,e.weaponIndex,e.weaponVariant,e.skinColor,e.scale,e.name))}function Pi(e){le=e.teams}var Ai=!1;function Bi(e){tt={},lt={},te=e,nt=0,st=!0,Ai=!0,U("d",0,gi(),1),ye.ageInsta=!0,et&&(et=!1,re.length=0)}function Ci(e,t){let i=(a=e[0],xe(se,a));var a;i?e[1]!=te&&O("Game",`Encount ${e[2]} {${e[1]}}`,"yellow"):(i=new ft(e[0],e[1],u,Yt,Jt,qt,se,ne,zt,Xt,Ut),se.push(i),e[1]!=te&&O("System",`Found ${e[2]} {${e[1]}}`,"#fff")),i.spawn(!!t||null),i.visible=!1,i.oldPos={x2:void 0,y2:void 0},i.x2=void 0,i.y2=void 0,i.x3=void 0,i.y3=void 0,i.setData(e),t&&(ee||window.prepareUI(i),ee=i,Le=ee.x,We=ee.y,ye.lastDir=0,ra(),ji(),ee.skins[7]&&(ye.reSync=!0))}function Oi(e){for(let t=0;t<se.length;t++)if(se[t].id==e){let e=se[t];chchch(e.name+" has died","red"),se.splice(t,1);break}}var Hi=!1;let Ri=Date.now();function Ei(e,t){if(ie=ke(e),ie){if(ie.oldHealth=ie.health,ie.health=t,ie.judgeShame(),ie.oldHealth>ie.health){if(ie==we){let e=ie.oldHealth-ie.health;7==ie.skinIndex&&(5==e||13==ie.latestTail&&2==e)&&(ie.bullTick=Y.tick)}ie.damaged=ie.oldHealth-ie.health;let i=ie.damaged;ie=ke(e);let a=!1;if(t>=20&&(Ri=Date.now(),Hi=!0),we.antiBull>0&&ee.shameCount<5&&vt(0,gi()),ie==ee){if(7==ie.skinIndex&&(5==i||13==ie.latestTail&&2==i)&&(ye.reSync&&(ye.reSync=!1,ie.setBullTick=!0),a=!0),st){At(i);let e=[.25,.45].map((e=>e*zt.weapons[ee.weapons[0]].dmg*Pt())),t=!a&&e.includes(i),n=1e3/9,s=function(e){setTimeout((()=>{Bt()}),e)};we.dist2<=150&&i>=35&&ie.shamecount<4&&(Bt(),wt(18,1),wt(11,0));if(i>=(t?8:25)&&ee.damageThreat>=100&&Y.tick-ee.antiTimer>1){ee.canEmpAnti=!0,ee.antiTimer=Y.tick;let e=Math.floor(2*Math.random()+3);ie.shameCount<e?Bt():s(n)}else s(n);i>=20&&11==ee.skinIndex&&(ei.canCounter=!0)}}else ie.setPoisonTick||5!=ie.damaged&&(13!=ie.latestTail||2!=ie.damaged)||(ie.setPoisonTick=!0)}else ie!=ee&&ie.maxShameCount<ie.shameCount&&(ie.maxShameCount=ie.shameCount);ie.health}}function Li(){st=!1,Nt={x:ee.x,y:ee.y},v.autoRespawn&&(m("ot-sdk-btn-floating").style.display="none",U("M",{name:X[0],moofoll:X[1],skin:X[2]}))}function Wi(e,t){ee&&(ee.itemCounts[e]=t)}function ji(e,t,i){null!=e&&(ee.XP=e),null!=t&&(ee.maxXP=t),null!=i&&(ee.age=i)}function _i(e,t){if(ee.upgradePoints=e,ee.upgrAge=t,e>0){Vt.length=0,Yt.removeAllChildren(Ae);for(let e=0;e<zt.weapons.length;++e)if(zt.weapons[e].age==t&&(i||null==zt.weapons[e].pre||ee.weapons.indexOf(zt.weapons[e].pre)>=0)){Yt.generateElement({id:"upgradeItem"+e,class:"actionBarItem",onmouseout:function(){hi()},parent:Ae}).style.backgroundImage=m("actionBarItem"+e).style.backgroundImage,Vt.push(e)}for(let e=0;e<zt.list.length;++e)if(zt.list[e].age==t&&(i||null==zt.list[e].pre||ee.items.indexOf(zt.list[e].pre)>=0)){let t=zt.weapons.length+e;Yt.generateElement({id:"upgradeItem"+t,class:"actionBarItem",onmouseout:function(){hi()},parent:Ae}).style.backgroundImage=m("actionBarItem"+t).style.backgroundImage,Vt.push(t)}for(let e=0;e<Vt.length;e++)!function(e){let t=m("upgradeItem"+e);t.onmouseover=function(){zt.weapons[e]?hi(zt.weapons[e],!0):hi(zt.list[e-zt.weapons.length])},t.onclick=Yt.checkTrusted((function(){U("H",e)})),Yt.hookTouchEvents(t)}(Vt[e]);Vt.length?(Ae.style.display="block",Be.style.display="block",Be.style.borderRadius="4px",Be.innerHTML="SELECT ITEMS ("+e+")"):(Ae.style.display="none",Be.style.display="none",hi())}else Ae.style.display="none",Be.style.display="none",hi()}function Ni(e,t){try{return Math.hypot((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 1/0}}function Fi(e,t){try{return Math.atan2((t.y2||t.y)-(e.y2||e.y),(t.x2||t.x)-(e.x2||e.x))}catch(e){return 0}}function Gi(e){let t=Te(e);qt.disableBySid(e);if(Kt.runPrePlacer(),Kt.replacer(t),ge.length){let e=we,i=ee,a=(Ni(i,e),Fi(i,e),Math.atan2(t.y-ee.y2,t.x-ee.x2)),n=Math.hypot(t.y-ee.y2,t.x-ee.x2),s=function(e,t){Dt(e,t)};if(we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*ee.scale&&ei.spikeTickType(),n<=200&&Tt(ee,ie)<=168&&ie!=ee&&0==ee.reloads[ee.weapons[0]]&&(wt(7,0),wt(18,1),xt(ee.weapons[0]),K.send("d",1,we.aim2),qi((()=>{wt(53,0),wt(21,1),qi((()=>{K.send("d",0,we.aim2),wt(6,0)}),3)}),1)),ee.alive&&v.autoReplace&&n<=400)if(we.dist2<=300&&!Kt.inTrap){let e=-1;for(let t=0;t<8*Math.PI;t+=Math.PI/1)e++,1==e&&n<=200?(s(2,a),s(2,a+Math.PI)):Dt(2,a+t)}else{let e=-1;for(let t=0;t<5.5*Math.PI;t+=Math.PI/2.2)15==ee.items[4]&&(e++,0==e&&n<=200?(s(4,a),s(4,a+Math.PI)):Dt(4,a+t+2))}}}function Vi(e){ee&&qt.removeAllItems(e)}function Yi(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}let zi={tick:0,delay:0,time:[],manage:[]};function qi(e,t){zi.manage[zi.tick+t]?zi.manage[zi.tick+t].push(e):zi.manage[zi.tick+t]=[e]}let $i,Xi=[],Ui=[],Ji=[],Qi=re.filter((e=>("spikes"==e.name||"greater spikes"==e.name||"spinning spikes"==e.name||"poison spikes"==e.name)&&Yi(ee,e)<ee.scale+e.scale+22&&!e.isTeamObject(ie)&&e.active))[0];function Zi(e){Y.tick++,fe=[],Kt.runPrePlacer(),ge=[],we=[],Y.tickSpeed=performance.now()-Y.lastTick,Y.lastTick=performance.now(),zi.tick++,zi.time.push(Date.now()-zi.delay<=50||Date.now()-zi.delay>=175?"lag":1),zi.tick%10==0&&(zi.time=[]),zi.tick,zi.delay=Date.now(),se.forEach((e=>{e.forcePos=!e.visible,e.visible=!1}));for(let t=0;t<e.length;){if(ie=ke(e[t]),ie){if(ie.t1=void 0===ie.t2?Y.lastTick:ie.t2,ie.t2=Y.lastTick,ie.oldPos.x2=ie.x2,ie.oldPos.y2=ie.y2,ie.x1=ie.x,ie.y1=ie.y,ie.x2=e[t+1],ie.y2=e[t+2],ie.x3=ie.x2+(ie.x2-ie.oldPos.x2),ie.y3=ie.y2+(ie.y2-ie.oldPos.y2),ie.d1=void 0===ie.d2?e[t+3]:ie.d2,ie.d2=e[t+3],ie.dt=0,ie.buildIndex=e[t+4],ie.weaponIndex=e[t+5],ie.weaponVariant=e[t+6],ie.team=e[t+7],ie.isLeader=e[t+8],ie.oldSkinIndex=ie.skinIndex,ie.oldTailIndex=ie.tailIndex,ie.skinIndex=e[t+9],ie.tailIndex=e[t+10],ie.iconIndex=e[t+11],ie.zIndex=e[t+12],ie.visible=!0,ie.update(Y.tickSpeed),ie.dist2=Yt.getDist(ie,ee,2,2),ie.aim2=Yt.getDirect(ie,ee,2,2),ie.dist3=Yt.getDist(ie,ee,3,3),ie.aim3=Yt.getDirect(ie,ee,3,3),Qi&&(ie.Saim=Yt.getDirect(ie,Qi,2,2)),ie.damageThreat=0,45==ie.skinIndex&&ie.shameTimer<=0&&ie.addShameTimer(),45==ie.oldSkinIndex&&45!=ie.skinIndex&&(ie.shameTimer=0,ie.shameCount=0,ie==ee&&Bt()),$i=ie,ie==ee)if(re.length){re.forEach((e=>{e.onNear=!1,e.active&&(!e.onNear&&Yt.getDist(e,ie,0,2)<=e.scale+zt.weapons[ie.weapons[0]].range&&(e.onNear=!0),e.isItem&&e.owner&&!e.pps&&ie.sid==e.owner.sid&&Yt.getDist(e,ie,0,2)>(parseInt(m("breakRange").value)||0)&&!e.breakObj&&![13,14,20].includes(e.id)&&(e.breakObj=!0,ue.push({x:e.x,y:e.y,sid:e.sid})))}));let e=re.filter((e=>e.trap&&e.active&&Yt.getDist(e,ie,0,2)<=ie.scale+e.getScale()+5&&!e.isTeamObject(ie))).sort((function(e,t){return Yt.getDist(e,ie,0,2)-Yt.getDist(t,ie,0,2)}))[0],t=re.filter((e=>("spikes"==e.name||"greater spikes"==e.name||"spinning spikes"==e.name||"poison spikes"==e.name)&&Yi(ee,e)<ee.scale+e.scale+22&&!e.isTeamObject(ie)&&e.active))[0];e?(Kt.dist=Yt.getDist(e,ie,0,2),Kt.aim=Yt.getDirect(t||e,ie,0,2),Kt.inTrap||Kt.protect(Kt.aim,e),Kt.inTrap=!0,Kt.info=e):(Kt.inTrap=!1,Kt.info={})}else Kt.inTrap=!1;ie.weaponIndex<9?(ie.primaryIndex=ie.weaponIndex,ie.primaryVariant=ie.weaponVariant):ie.weaponIndex>8&&(ie.secondaryIndex=ie.weaponIndex,ie.secondaryVariant=ie.weaponVariant)}t+=13}if(Xi.length&&(Xi.forEach((e=>{e()})),Xi=[]),ri.length&&(ri.forEach((e=>{ci(...e)})),ri=[]),Zt.stack.length){let e=0,t=0,i={x:null,y:null},a={x:null,y:null};Zt.stack.forEach((n=>{n.value>=0?(0==e&&(i={x:n.x,y:n.y}),e+=Math.abs(n.value)):(0==t&&(a={x:n.x,y:n.y}),t+=Math.abs(n.value))})),t>0&&Zt.showText(a.x,a.y,Math.max(43,Math.min(50,t)),.18,500,t,healTextColor),e>0&&Zt.showText(i.x,i.y,Math.max(43,Math.min(50,e)),.18,500,e,damageTextColor),Zt.stack=[]}ri.length&&(ri.forEach((e=>{ci(...e)})),ri=[]);for(let t=0;t<e.length;)ie=ke(e[t]),ie&&(ie.isTeam(ee)||(fe.push(ie),ie.dist2<=zt.weapons[null==ie.primaryIndex?5:ie.primaryIndex].range+2*ee.scale&&ge.push(ie)),ie.manageReload(),ie!=ee&&ie.addDamageThreat(ee)),t+=13;if(ee&&ee.alive&&(fe.length&&(ee&&ee.alive&&(Ui=Mt(0,zt.list[ee.items[2]]),Ji=15==ee.items[4]?Mt(0,zt.list[ee.items[4]]):[]),we=fe.sort((function(e,t){return e.dist2-t.dist2}))[0]),v.autoq&&we.dist2<=255&&ee.shameCount<4&&vt(0,gi()),Y.tickQueue[Y.tick]&&(Y.tickQueue[Y.tick].forEach((e=>{e()})),Y.tickQueue[Y.tick]=null),Wt.length&&(Wt.forEach((e=>{let t=e[0],i=(e[1],e[2]);ie=ke(t);let a=!1;if(ie.health<=0&&(ie.death||(ie.death=!0,ie!=ee&&O("",`${ie.name} ${function(){const e=["were slain...","met their demise...","life was extinguished...","perished...","were overwhelmed...","were defeated...","were vanquished...","bit the dust...","met a tragic end...","were obliterated...","met a gruesome fate...","were eradicated...","were annihilated...","were crushed...","were overwhelmed...","were turned to ash...","were reduced to rubble...","were shattered...","were disintegrated...","were torn apart...","were consumed by darkness...","were consumed by the void...","were consumed by the abyss...","were consumed by chaos...","were consumed by despair...","were consumed by madness...","were consumed by the unknown...","were consumed by the shadows..."];return e[Math.floor(Math.random()*e.length)]}()}`,"red"),Di(ie))),ie==ee){if(7==ie.skinIndex&&(5==i||13==ie.latestTail&&2==i)&&(ye.reSync&&(ye.reSync=!1,ie.setBullTick=!0),a=!0),st){let e=At(i),t=[.25,.45].map((e=>e*zt.weapons[ee.weapons[0]].dmg*Pt())),n=!a&&t.includes(i),s=140-window.ping,l=function(e){setTimeout((()=>{Bt()}),e)};if(m("healingBeta").checked)if(e.length){if(e.filter((e=>{if(e.dist2<=(e.weaponIndex<9?300:700)&&(Ye=Yt.getDirect(ee,e,2,2),Yt.getAngleDist(Ye,e.d2)<=Math.PI))return e})).length){if(i>10&&Y.tick-ie.antiTimer>1){ie.canEmpAnti=!0,ie.antiTimer=Y.tick;let e=4;ie.shameCount<e?Bt():l(s)}else l(s)}else l(s)}else l(s);else if(i>=(n?8:20)&&ie.damageThreat>=25&&Y.tick-ie.antiTimer>1){ie.canEmpAnti=!0,ie.antiTimer=Y.tick;let e=5;ie.shameCount<e?Bt():l(s)}else l(s);i>=20&&11==ee.skinIndex&&(ei.canCounter=!0)}}else ie.setPoisonTick||5!=ie.damaged&&(13!=ie.latestTail||2!=ie.damaged)||(ie.setPoisonTick=!0)})),Wt=[]),se.forEach((e=>{e.visible||ee==e||(e.reloads={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,53:0}),e.setBullTick&&(e.bullTimer=0),e.setPoisonTick&&(e.poisonTimer=0),e.updateTimer()})),st)){if(fe.length){ee.canEmpAnti&&(ee.canEmpAnti=!1,we.dist2<=300&&!ye.safePrimary(we)&&!ye.safeSecondary(we)&&(0==we.reloads[53]?(ee.shameCount<5&&(Bt(),Bt()),ee.empAnti=!0,ee.soldierAnti=!1,wt(11,0),wt(18,1)):(ee.shameCount<5&&(Bt(),Bt()),ee.empAnti=!1,ee.soldierAnti=!0,wt(6,0),wt(21,1)))),re.filter((e=>e.dmg&&e.active&&e.isTeamObject(ee)&&Yt.getDist(e,we,0,3)<=e.scale+we.scale)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0]&&we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*ee.scale&&v.predictTick&&(ei.canSpikeTick=!0,ei.syncHit=!0,v.revTick&&15==ee.weapons[1]&&0==ee.reloads[53]&&ei.perfCheck(ee,we)&&(ei.revTick=!0)),re.filter((e=>e.dmg&&e.active&&!e.isTeamObject(ee)&&Yt.getDist(e,ee,0,3)<e.scale+ee.scale)).sort((function(e,t){return Yt.getDist(e,ee,0,2)-Yt.getDist(t,ee,0,2)}))[0]&&!Kt.inTrap&&we.dist2<=zt.weapons[5].range+1.8*we.scale&&(ye.anti0Tick=1,U("a",we.dir+180,1))}if(0==ye.anti0tick&&(ye.anti0tick>0&&wt(6,0),e?wt(22,0):ee.y2>=u.mapScale/2-u.riverWidth/2&&ee.y2<=u.mapScale/2+u.riverWidth/2?wt(31,0):fe.length&&we.dist2<=zt.weapons[we.primaryIndex?we.primaryIndex:5].range+3*ee.scale?this.antiBull>0&&7!=ee.weapons[0]?wt(11,0):wt(6,0):Lt(1)),(p||(ee.checkCanInsta(!0)>=100?ee.checkCanInsta(!0):ee.checkCanInsta(!1))>=(10==ee.weapons[1]?95:100))&&we.dist2<=zt.weapons[10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]].range+1.8*we.scale&&(ei.wait||p&&0==Math.floor(5*Math.random()))&&!ei.isTrue&&!ye.waitHit&&0==ee.reloads[ee.weapons[0]]&&0==ee.reloads[ee.weapons[1]]&&(p||("oneShot"!=m("instaType").value||ee.reloads[53]<=(10==ee.weapons[1]?0:Y.tickRate)))&&ei.perfCheck(ee,we)?(ee.checkCanInsta(!0)>=100?ei.nobull=!p&&!ei.canSpikeTick:ei.nobull=!1,ei.can=!0):ei.can=!1,me.filter((e=>e.trap&&e.active&&e.isTeamObject(ee)&&Yt.getDist(e,we,0,2)<=we.scale+e.getScale()+5)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0]&&6==we.skinIndex&&setTimeout((()=>{ei.can=!0,ei.nobull=!1}),zt.weapons[we.weaponIndex]-we.reloads[we.weaponIndex]+we.pinge),lt.q&&vt(0,gi()),lt.f&&vt(4,fi()),lt.v&&vt(2,fi()),lt.y&&vt(5,fi()),lt.h&&vt(ee.getItemType(22),fi()),lt.n&&vt(3,fi()),Y.tick%3==0)if(ot.place){let e=7.7;for(let t=-e;t<=e;t+=e)Dt(3,Yt.getDirect(ee.oldPos,ee,2,2)+t)}else if(ot.placeSpawnPads)for(let e=0;e<2*Math.PI;e+=Math.PI/2)Dt(ee.getItemType(20),Yt.getDirect(ee.oldPos,ee,2,2)+e);if(ei.can&&ei.changeType(10==ee.weapons[1]?"rev":ei.nobull?"nobull":"normal"),ei.canCounter&&(ei.canCounter=!1,0!=ee.reloads[ee.weapons[0]]||ei.isTrue||ei.counterType()),ei.canSpikeTick&&(ei.canSpikeTick=!1,ei.revTick?(ei.revTick=!1,[1,2,3,4,5,6].includes(ee.weapons[0])&&0==ee.reloads[ee.weapons[1]]&&!ei.isTrue&&ei.changeType("rev")):[1,2,3,4,5,6].includes(ee.weapons[0])&&0==ee.reloads[ee.weapons[0]]&&!ei.isTrue&&(ei.spikeTickType(),ei.syncHit)),mi.middle||!mi.left&&!mi.right||ei.isTrue||((ee.weaponIndex!=(mi.right&&10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0])||ee.buildIndex>-1)&&xt(mi.right&&10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]),0!=ee.reloads[mi.right&&10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]]||ye.waitHit||(bt(),ye.waitHit=1,Y.tickBase((()=>{bt(),ye.waitHit=0}),1))),Kt.inTrap&&(mi.left||mi.right||ei.isTrue||((ee.weaponIndex!=(Kt.notFast()?ee.weapons[1]:ee.weapons[0])||ee.buildIndex>-1)&&xt(Kt.notFast()?ee.weapons[1]:ee.weapons[0]),0!=ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]]||ye.waitHit||(bt(),ye.waitHit=1,Y.tickBase((()=>{bt(),ye.waitHit=0}),1)))),mi.middle&&!Kt.inTrap&&(ei.isTrue||0!=ee.reloads[ee.weapons[1]]||(ye.ageInsta&&4!=ee.weapons[0]&&9==ee.weapons[1]&&ee.age>=9&&fe.length?ei.bowMovement():ei.rangeType())),lt.t&&!Kt.inTrap&&(ei.isTrue||0!=ee.reloads[ee.weapons[0]]||15==ee.weapons[1]&&0!=ee.reloads[ee.weapons[1]]||5!=ee.weapons[0]&&(4!=ee.weapons[0]||15!=ee.weapons[1])||ei[4==ee.weapons[0]&&15==ee.weapons[1]?"kmTickMovement":"tickMovement"]()),lt["."]&&!Kt.inTrap&&(ei.isTrue||0!=ee.reloads[ee.weapons[0]]||[9,12,13,15].includes(ee.weapons[1])&&0!=ee.reloads[ee.weapons[1]]||ei.boostTickMovement()),ee.weapons[1]&&!mi.left&&!mi.right&&!Kt.inTrap&&!ei.isTrue&&!(we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*we.scale))if(0==ee.reloads[ee.weapons[0]]&&0==ee.reloads[ee.weapons[1]]){if(!ye.reloaded){ye.reloaded=!0;let e=zt.weapons[ee.weapons[0]].spdMult<zt.weapons[ee.weapons[1]].spdMult?1:0;(ee.weaponIndex!=ee.weapons[e]||ee.buildIndex>-1)&&xt(ee.weapons[e])}}else ye.reloaded=!1,ee.reloads[ee.weapons[0]]>0?(ee.weaponIndex!=ee.weapons[0]||ee.buildIndex>-1)&&xt(ee.weapons[0]):0==ee.reloads[ee.weapons[0]]&&ee.reloads[ee.weapons[1]]>0&&(ee.weaponIndex!=ee.weapons[1]||ee.buildIndex>-1)&&xt(ee.weapons[1]);ei.isTrue||Kt.inTrap||Kt.replaced||Kt.autoPlace(),lt.q||lt.f||lt.v||lt.h||lt.n||U("D",gi());let e=!1;Hi&&(Hi=!1,fe.length&&we.reloads[53]<=Y.tickRate&&10!=we.secondaryIndex&&11!=we.secondaryIndex&&14!=we.secondaryIndex&&(e=!0));let t=function(){ye.anti0Tick>0?wt(6,0):(ee.shameCount>0&&(we.dist2>230||!we.dist)&&wt(7,0),mi.left||mi.right?ee.shameCount>3&&(Y.tick-ee.bullTick)%7==0&&45!=ee.skinIndex||ye.reSync?wt(7,0):mi.left?wt(0==ee.reloads[ee.weapons[0]]?c?40:7:ee.empAnti?22:ee.soldierAnti?6:"abreload"==m("antiBullType").value&&we.antiBull>0?11:we.dist2<=300?"abalway"==m("antiBullType").value&&0==we.reloads[we.primaryIndex]?11:6:Lt(1,1),0):mi.right&&wt(0==ee.reloads[mi.right&&10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]]?40:ee.empAnti?22:ee.soldierAnti?6:"abreload"==m("antiBullType").value&&we.antiBull>0?11:we.dist2<=300?"abalway"==m("antiBullType").value&&0==we.reloads[we.primaryIndex]?11:6:Lt(1,1),0):Kt.inTrap?Kt.info.health<=zt.weapons[ee.weaponIndex].dmg||0!=ee.reloads[10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]]?ee.shameCount>3&&(Y.tick-ee.bullTick)%u.serverUpdateRate==0&&45!=ee.skinIndex||ye.reSync?wt(7,0):wt(ee.empAnti||we.dist2>300||!fe.length?22:6,0):wt(40,0):ee.empAnti||ee.soldierAnti?wt(ee.empAnti?22:6,0):ee.shameCount>3&&(Y.tick-ee.bullTick)%u.serverUpdateRate==0&&45!=ee.skinIndex||ye.reSync?wt(7,0):we.dist2<=300?wt("abreload"==m("antiBullType").value&&we.antiBull>0||"abalway"==m("antiBullType").value&&0==we.reloads[we.primaryIndex]?11:6,0):Lt(1))};let i=function(){we.dist2<=400||mi.left?wt(21,1):Kt.inTrap?wt(19,1):wt(11,1)};"block"==Pe.style.display||ei.isTrue||ei.ticking||(t(),i()),!ye.autoPush&&li.active&&(G.count>=80||(li.scale=u.maxScreenWidth/2*1.3,Kt.inTrap||li.chaseNear&&!fe.length||(we.dist2<=zt.weapons[ee.weapons[0]].range?U("a",void 0,1):(Ii(),f.setGrid(si),f.setAcceptableTiles([0]),f.enableDiagonals(),f.findPath(si[0].length/2,si.length/2,li.lastX,li.lastY,(function(e){if(null===e)li.array=[],we.dist2<=zt.weapons[ee.weapons[0]].range?U("a",void 0,1):U("a",we.aim2,1);else if(li.array=e,li.array.length>1){let t={x:ee.x2-li.scale/2+li.scale/li.grid*e[1].x,y:ee.y2-li.scale/2+li.scale/li.grid*e[1].y};U("a",Yt.getDirect(t,ee,0,2),1)}})),f.calculate())))),v.autoPush&&fe.length&&!Kt.inTrap&&!ei.ticking?Mi():ye.autoPush&&(ye.autoPush=!1,U("a",_||void 0,1)),ei.ticking&&(ei.ticking=!1),ei.syncHit&&(ei.syncHit=!1),ee.empAnti&&(ee.empAnti=!1),m("RVN").checked&&function(){let e=re.filter((e=>e.dmg&&e.active&&!e.isTeamObject(ee)&&Yt.getDist(e,ee,0,3)<e.scale+40+ee.scale)).sort((function(e,t){return Yt.getDist(e,ee,0,5)-Yt.getDist(t,ee,0,5)}))[0];if(e){let t={x:e.x+250*Math.cos(Yt.getDirect(we,e,2,0)),y:e.y+250*Math.sin(Yt.getDirect(we,e,2,0)),x2:e.x+(Yt.getDist(we,e,2,0)+ee.scale)*Math.cos(Yt.getDirect(we,e,2,0)),y2:e.y+(Yt.getDist(we,e,2,0)+ee.scale)*Math.sin(Yt.getDirect(we,e,2,0))};if(e){Yt.getDist(e,ee,0,2);let i=ee.scale/10;Yt.lineInRect(ee.x2-i,ee.y2-i,ee.x2+i,ee.y2+i,we.x2,we.y2,t.x,t.y)?(U("a",void 0,1),U("a",void 0,1)):U("a",void 0,1);let a=Yt.getDirect(e,ee,0,2);console.log(a),e&&(mi.left||mi.right||ei.isTrue||(ee.weaponIndex!=(Kt.notFast()?ee.weapons[1]:ee.weapons[0])||ee.buildIndex>-1)&&xt(Kt.notFast()?ee.weapons[1]:ee.weapons[0]))}}}(),ee.soldierAnti&&(ee.soldierAnti=!1),ye.anti0Tick>0&&ye.anti0Tick--,Kt.replaced&&(Kt.replaced=!1),Kt.antiTrapped&&(Kt.antiTrapped=!1)}x.length&&x.forEach((e=>{e[0].showName="YEAHHH"}))}for(var Ki=0;Ki<me.length;Ki++)me[Ki].active&&me[Ki].health>0&&Yt.getDist(me[Ki],ee,0,2)<150&&me[Ki].name.includes("spike")&&me[Ki]&&me[Ki].owner.sid!=ee.sid&&0==mi.left&&0==ie.reloads[ie.secondaryIndex]&&(xt(ee.weapons[1]),wt(40,0),U("D",Yt.getDirect(me[Ki],ee,0,2)),qi((()=>{wt(6,0)}),1)),x.length&&x.forEach((e=>{e[0].ssend("player",ee,we,ln)}));function ea(e){rt=e}function ta(e){for(let t=0;t<e.length;)qt.add(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5],zt.list[e[t+6]],!0,e[t+7]>=0?{sid:e[t+7]}:null),t+=8}function ia(e){for(let e=0;e<ne.length;++e)ne[e].forcePos=!ne[e].visible,ne[e].visible=!1;if(e){let t=performance.now();for(let i=0;i<e.length;)ie=ve(e[i]),ie?(ie.index=e[i+1],ie.t1=void 0===ie.t2?t:ie.t2,ie.t2=t,ie.x1=ie.x,ie.y1=ie.y,ie.x2=e[i+2],ie.y2=e[i+3],ie.d1=void 0===ie.d2?e[i+4]:ie.d2,ie.d2=e[i+4],ie.health=e[i+5],ie.dt=0,ie.visible=!0):(ie=Qt.spawn(e[i+2],e[i+3],e[i+4],e[i+1]),ie.x2=ie.x,ie.y2=ie.y,ie.d2=ie.dir,ie.health=e[i+5],Qt.aiTypes[e[i+1]].name||(ie.name=u.cowNames[e[i+6]]),ie.forcePos=!0,ie.sid=e[i],ie.visible=!0),i+=7}}function aa(e){ie=ve(e),ie&&ie.startAnim()}function na(e,t,i){let a=ke(e);if(a&&(wt(6,0),a.startAnim(t,i),a.gatherIndex=i,a.gathering=1,ee.damageThreat>=100&&Ni(ee,a)<=300&&ee.shameCount>=4&&Bt(),we.dist2<300)){if(G.count>=80)return;let e=re.filter((e=>(e.active||e.alive)&&e.health<e.maxHealth&&void 0!==e.group&&Yt.getDist(e,a,0,2)<=zt.weapons[a.weaponIndex].range+e.scale));for(let t=0;t<e.length;t++){let n=e[t];console.log(n);let s=zt.weapons[i].dmg*u.weaponVariants[a[(i<9?"prima":"seconda")+"ryVariant"]].val*(zt.weapons[i].sDmg||1),l=3.3*s;n.health-3.3*s<=0&&"spammer"===h?vt(2,Fi(n,ee)+Math.PI):Y.tickBase((()=>{let e=l*(40===a.skinIndex?3.3:1);if(n.health-e<=0&&"smart"===h)for(let e=-30;e<30;e+=30)vt(we.dist2<1.8*we.scale+50?4:2,Fi(n,ee)+Math.PI+e)}),1)}if(ge.filter((e=>e.gathering)).length>1&&(Zt.showText(ee.x2,ee.y2+500,30,.15,1850,"Sync detect test","#ff1b14",2),n=!0,Y.tickBase((()=>{n=!1}),2)),t){let e=qt.hitObj;qt.hitObj=[],e.health<=2*zt.weapons[a.weaponIndex].dmg&&Y.tickBase((()=>{setTimeout((()=>{vt(2,Number.MAX_VALUE)}),zt.weapons[a.weaponIndex].speed-1e3/9)}),2),Y.tickBase((()=>{let t=zt.weapons[i].dmg*u.weaponVariants[a[(i<9?"prima":"seconda")+"ryVariant"]].val*(zt.weapons[i].sDmg||1)*(40===a.skinIndex?3.3:1);e.forEach((e=>{e.healthMov=e.health-t/2,e.health-=t}))}),1)}}}function sa(e,t){ie=Te(t),ie&&(ie.xWiggle+=u.gatherWiggle*Math.cos(e),ie.yWiggle+=u.gatherWiggle*Math.sin(e),ie.health&&(ie.damaged=Math.min(255,ie.damaged+60),qt.hitObj.push(ie)))}function la(e,t){ie=Te(e),ie&&(u.anotherVisual?ie.lastDir=t:ie.dir=t,ie.xWiggle+=u.gatherWiggle*Math.cos(t+Math.PI),ie.yWiggle+=u.gatherWiggle*Math.sin(t+Math.PI))}m("killCounter");function oa(e,t,i){Kt.runPrePlacer(),ee&&(ee[e]=t,"points"==e?v.autoBuy&&(ti.hat(),ti.acc()):"kills"==e&&v.killChat&&(K.send("6","ez"),Di(ee),Zt.showText(ee.x2,ee.y2+50,30,.15,1850,"+1 kill","#ff1b14",2)))}function ra(e,t){e&&(t?(ee.weapons=e,ee.primaryIndex=ee.weapons[0],ee.secondaryIndex=ee.weapons[1],ei.isTrue||xt(ee.weapons[0])):ee.items=e);for(let e=0;e<zt.list.length;e++){m("actionBarItem"+(zt.weapons.length+e)).style.display=ee.items.indexOf(zt.list[e].id)>=0?"inline-block":"none"}for(let e=0;e<zt.weapons.length;e++)m("actionBarItem"+e).style.display=ee.weapons[zt.weapons[e].type]==zt.weapons[e].id?"inline-block":"none";3==ee.weapons[0]&&15==ee.weapons[1]&&(m("actionBarItem3").style.display="none",m("actionBarItem4").style.display="inline-block")}function ca(e,t,i,a,n,s,l,o){Jt.addProjectile(e,t,i,a,n,s,null,null,l,ct).sid=o,ri.push(Array.prototype.slice.call(arguments))}function da(e,t){for(let i=0;i<de.length;++i)if(de[i].sid==e){de[i].range=t;let e=qt.hitObj;qt.hitObj=[],Y.tickBase((()=>{let t=de[i].dmg;e.forEach((e=>{e.projDmg&&(e.health-=t)}))}),1)}}function ha(t,i){be(e,t)}function pa(e,t){ee&&(ee.team=e,ee.isOwner=t,null==e&&(oe=[]))}function ua(e){oe=e}function ma(e,t,i){i?e?ee.latestTail=t:ee.tails[t]=1:e?ee.latestSkin=t:(ee.skins[t]=1,7==t&&(ye.reSync=!0))}function fa(e,t){e!==ee.sid&&"go reload"==t&&(K.send("6","i reload ?"),setTimeout((()=>{window.leave(),K.send("6","Nah")}),3e3));let i=ke(e);i?(O(`${i.name} {${i.sid}}`,t,"white"),u.anotherVisual?ae.push(new ut(i.x,i.y,t,i)):(i.chatMessage=(e=>{let t;return ht.forEach((i=>{if(e.indexOf(i)>-1){t="";for(var a=0;a<i.length;++a)t+=t.length?"o":"M";var n=new RegExp(i,"g");e=e.replace(n,t)}})),e})(t),i.chatCountdown=u.chatCountdown)):O("Anonymous {null}",t,"white")}function ga(e){Ft=e}function wa(e,t,i,a){u.anotherVisual?Zt.stack.push({x:e,y:t,value:i}):Zt.showText(e,t,50,.18,F?500:1500,Math.abs(i),i>=0?"#fff":"#8ecc51")}function ya(e,t,i,a,n,s){(a=a||Se).beginPath(),a.arc(e,t,i,0,2*Math.PI),s||a.fill(),n||a.stroke()}function xa(e,t,i,a){let n,s,l=Math.PI/2*3,o=Math.PI/t;e.beginPath(),e.moveTo(0,-i);for(let r=0;r<t;r++)n=Math.cos(l)*i,s=Math.sin(l)*i,e.lineTo(n,s),l+=o,n=Math.cos(l)*a,s=Math.sin(l)*a,e.lineTo(n,s),l+=o;e.lineTo(0,-i),e.closePath()}function ba(e,t,i,a,n,s,l){l||n.fillRect(e-i/2,t-a/2,i,a),s||n.strokeRect(e-i/2,t-a/2,i,a)}function ka(e,t,i,a,n,s,l,o){s.save(),s.translate(e,t),n=Math.ceil(n/2);for(let e=0;e<n;e++)ba(0,0,2*i,a,s,l,o),s.rotate(Math.PI/n);s.restore()}function va(e,t){Se.fillStyle="#91b2db",pe.filter((e=>e.active)).forEach((i=>{i.animate(Re),Se.globalAlpha=i.alpha,Se.strokeStyle=Je,Se.save(),Se.translate(i.x-e,i.y-t),i.dir+=kt(1),i.dir>=2*Math.PI&&(i.dir-=2*Math.PI),Se.rotate(i.dir),function(e,t){(t=t||Se).lineWidth=Ze,t.lineJoin="miter";let i=Math.PI/4*(zt.weapons[e.weaponIndex].armS||1),a=e.buildIndex<0&&zt.weapons[e.weaponIndex].hndS||1,n=e.buildIndex<0&&zt.weapons[e.weaponIndex].hndD||1;e.skinIndex=48,e.tailIndex=13,Ca(13,t,e),e.buildIndex<0&&!zt.weapons[e.weaponIndex].aboveHand&&(_a(zt.weapons[10],u.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==zt.weapons[e.weaponIndex].projectile||zt.weapons[e.weaponIndex].hideProjectile||Ea(e.scale,0,zt.projectiles[zt.weapons[e.weaponIndex].projectile],Se));t.fillStyle="#ececec",ya(e.scale*Math.cos(i),e.scale*Math.sin(i),14),ya(e.scale*n*Math.cos(-i*a),e.scale*n*Math.sin(-i*a),14),e.buildIndex<0&&zt.weapons[e.weaponIndex].aboveHand&&_a(zt.weapons[10],u.weaponVariants[e.weaponVariant].src,e.scale,0,t);e.buildIndex>=0&&_a(zt.weapons[10],u.weaponVariants[e.weaponVariant].src,e.scale,0,t);ya(0,0,e.scale,t),Pa(48,t,null,e)}(i,Se),Se.restore(),Se.fillStyle="#91b2db"}))}function Ta(e,t,i){Se.globalAlpha=1,Se.fillStyle="#91b2db";for(var a=0;a<se.length;++a)ie=se[a],ie.zIndex==i&&(ie.animate(Re),ie.visible&&(ie.skinRot+=.002*Re,Ye=v.showDir||F||ie!=ee?ie.dir||0:v.attackDir?ee?(ye.autoAim||(mi.left||F&&we.dist2<=zt.weapons[ee.weapons[0]].range+1.8*we.scale&&!Kt.inTrap)&&0==ee.reloads[ee.weapons[0]]?at=c?fi():fe.length?ye.revAim?we.aim2+Math.PI:we.aim2:fi():mi.right&&0==ee.reloads[10==ee.weapons[1]?ee.weapons[1]:ee.weapons[0]]?at=fi():Kt.inTrap&&0==ee.reloads[Kt.notFast()?ee.weapons[1]:ee.weapons[0]]?at=Kt.aim:ee.lockDir||(at=fi()),at||0):0:fi(),Se.save(),Se.translate(ie.x-e,ie.y-t),Se.rotate(Ye+ie.dirPlus),Ia(ie,Se),Se.restore()))}function Ia(e,t){(t=t||Se).lineWidth=Ze,t.lineJoin="miter";let i=Math.PI/4*(zt.weapons[e.weaponIndex].armS||1),a=e.buildIndex<0&&zt.weapons[e.weaponIndex].hndS||1,n=e.buildIndex<0&&zt.weapons[e.weaponIndex].hndD||1,s=e==ee&&3==e.weapons[0]&&15==e.weapons[1];if(e.tailIndex>0&&Ca(e.tailIndex,t,e),e.buildIndex<0&&!zt.weapons[e.weaponIndex].aboveHand&&(_a(zt.weapons[s?4:e.weaponIndex],u.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==zt.weapons[e.weaponIndex].projectile||zt.weapons[e.weaponIndex].hideProjectile||Ea(e.scale,0,zt.projectiles[zt.weapons[e.weaponIndex].projectile],Se)),t.fillStyle=u.skinColors[e.skinColor],ya(e.scale*Math.cos(i),e.scale*Math.sin(i),14),ya(e.scale*n*Math.cos(-i*a),e.scale*n*Math.sin(-i*a),14),e.buildIndex<0&&zt.weapons[e.weaponIndex].aboveHand&&(_a(zt.weapons[e.weaponIndex],u.weaponVariants[e.weaponVariant].src,e.scale,0,t),null==zt.weapons[e.weaponIndex].projectile||zt.weapons[e.weaponIndex].hideProjectile||Ea(e.scale,0,zt.projectiles[zt.weapons[e.weaponIndex].projectile],Se)),e.buildIndex>=0){var l=Ya(zt.list[e.buildIndex]);t.drawImage(l,e.scale-zt.list[e.buildIndex].holdOffset,-l.width/2)}ya(0,0,e.scale,t),e.skinIndex>0&&(t.rotate(Math.PI/2),Pa(e.skinIndex,t,null,e))}let Sa,Ma={},Da={};function Pa(e,t,i,a){if(Sa=Ma[e],!Sa){let t=new Image;t.onload=function(){this.isLoaded=!0,this.onload=null},t.src="https://moomoo.io/img/hats/hat_"+e+".png",Ma[e]=t,Sa=t}let n=i||Da[e];if(!n){for(let t=0;t<Xt.length;++t)if(Xt[t].id==e){n=Xt[t];break}Da[e]=n}Sa.isLoaded&&t.drawImage(Sa,-n.scale/2,-n.scale/2,n.scale,n.scale),!i&&n.topSprite&&(t.save(),t.rotate(a.skinRot),Pa(e+"_top",t,n,a),t.restore())}let Aa={},Ba={};function Ca(e,t,i){if(Sa=Aa[e],!Sa){let t=new Image;t.onload=function(){this.isLoaded=!0,this.onload=null},t.src="https://moomoo.io/img/accessories/access_"+e+".png",Aa[e]=t,Sa=t}let a=Ba[e];if(!a){for(let t=0;t<Ut.length;++t)if(Ut[t].id==e){a=Ut[t];break}Ba[e]=a}Sa.isLoaded&&(t.save(),t.translate(-20-(a.xOff||0),0),a.spin&&t.rotate(i.skinRot),t.drawImage(Sa,-a.scale/2,-a.scale/2,a.scale,a.scale),t.restore())}let Oa={};function Ha(e,t,i){for(let a=0;a<de.length;a++)ie=de[a],ie.active&&ie.layer==e&&ie.inWindow&&(ie.update(Re),ie.active&&$a(ie.x-t,ie.y-i,ie.scale)&&(Se.save(),Se.translate(ie.x-t,ie.y-i),Se.rotate(ie.dir),Ea(0,0,ie,Se,1),Se.restore()))}let Ra={};function Ea(e,t,i,a,n){if(i.src){let n=zt.projectiles[i.indx].src,s=Ra[n];s||(s=new Image,s.onload=function(){this.isLoaded=!0},s.src="https://moomoo.io/img/weapons/"+n+".png",Ra[n]=s),s.isLoaded&&a.drawImage(s,e-i.scale/2,t-i.scale/2,i.scale,i.scale)}else 1==i.indx&&(a.fillStyle="#939393",ya(e,t,i.scale,a))}let La={};function Wa(e,t){let i=e.index,a=La[i];if(!a){let t=new Image;t.onload=function(){this.isLoaded=!0,this.onload=null},t.src="https://moomoo.io/img/animals/"+e.src+".png",a=t,La[i]=a}if(a.isLoaded){let i=1.2*e.scale*(e.spriteMlt||1);t.drawImage(a,-i,-i,2*i,2*i)}}function ja(e,t,i,a){let n=u.riverWidth+a,s=u.mapScale/2-t-n/2;s<Ge&&s+n>0&&i.fillRect(0,s,Fe,n)}function _a(e,t,i,a,n){var s=e.src+(t||""),l=Oa[s];l||((l=new Image).onload=function(){this.isLoaded=!0},l.src=".././img/weapons/"+s+".png",Oa[s]=l),l.isLoaded&&n.drawImage(l,i+e.xOff-e.length/2,a+e.yOff-e.width/2,e.length,e.width)}let Na={};function Fa(e){let t=e.y>=u.mapScale-u.snowBiomeTop?2:e.y<=u.snowBiomeTop?1:0,i=e.type+"_"+e.scale+"_"+t,a=Na[i];if(!a){let n=document.createElement("canvas");n.width=n.height=2.1*e.scale+Ze;let s=n.getContext("2d");if(s.translate(n.width/2,n.height/2),s.rotate(Yt.randFloat(0,Math.PI)),s.strokeStyle=Je,s.lineWidth=Ze,0==e.type){let e,i=Yt.randInt(5,7);s.globalAlpha=Ke?.6:.8;for(let a=0;a<2;++a)e=ie.scale*(a?.5:1),xa(s,i,e,.7*e),s.fillStyle=t?a?"#fff":"#e3f1f4":a?"#b4db62":"#9ebf57",s.fill(),a||(s.stroke(),s.globalAlpha=1)}else if(1==e.type)if(2==t)s.fillStyle="#606060",xa(s,6,.3*e.scale,.71*e.scale),s.fill(),s.stroke(),s.fillStyle="#89a54c",ya(0,0,.55*e.scale,s),s.fillStyle="#a5c65b",ya(0,0,.3*e.scale,s,!0);else{let e;!function(e,t,i,a){let n,s=Math.PI/2*3,l=Math.PI/t;e.beginPath(),e.moveTo(0,-a);for(let o=0;o<t;o++)n=Yt.randInt(i+.9,1.2*i),e.quadraticCurveTo(Math.cos(s+l)*n,Math.sin(s+l)*n,Math.cos(s+2*l)*a,Math.sin(s+2*l)*a),s+=2*l;e.lineTo(0,-a),e.closePath()}(s,6,ie.scale,.7*ie.scale),s.fillStyle=t?"#e3f1f4":"#89a54c",s.fill(),s.stroke(),s.fillStyle=t?"#6a64af":"#c15555";let i=4,a=2*Math.PI/i;for(let t=0;t<i;++t)e=Yt.randInt(ie.scale/3.5,ie.scale/2.3),ya(e*Math.cos(a*t),e*Math.sin(a*t),Yt.randInt(10,12),s)}else 2!=e.type&&3!=e.type||(s.fillStyle=2==e.type?2==t?"#938d77":"#939393":"#e0c655",xa(s,3,e.scale,e.scale),s.fill(),s.stroke(),s.fillStyle=2==e.type?2==t?"#b2ab90":"#bcbcbc":"#ebdca3",xa(s,3,.55*e.scale,.65*e.scale),s.fill());a=n,Na[i]=a}return a}let Ga=[],Va=!0;function Ya(e,t){let i=e,a=ee,n=(a&&i.owner&&i.owner.sid.constructor==Number&&(i.owner.sid,a.sid),i.id+50),s=Ga[n];if(!s||t){let i=15,a=document.createElement("canvas");t||"windmill"!=e.name?e.scale:zt.list[4].scale;a.width=a.height=2.5*e.scale+0+(zt.list[e.id].spritePadding||0)+i;let l=a.getContext("2d");if(l.translate(a.width/2,a.height/2),l.rotate(t?0:Math.PI/2),l.strokeStyle=Je,l.lineWidth=0*(t?a.width/81:1),Va&&(l.shadowBlur=i,l.shadowColor=`rgba(0, 0, 0, ${Math.min("pit trap"==e.name?.6:.3,e.alpha)})`),"apple"==e.name){l.fillStyle="#c15555",ya(0,0,e.scale,l),l.fillStyle="#89a54c";let t=-Math.PI/2;!function(e,t,i,a,n){let s=e+i*Math.cos(a),l=t+i*Math.sin(a),o=.4*i;n.moveTo(e,t),n.beginPath(),n.quadraticCurveTo((e+s)/2+o*Math.cos(a+Math.PI/2),(t+l)/2+o*Math.sin(a+Math.PI/2),s,l),n.quadraticCurveTo((e+s)/2-o*Math.cos(a+Math.PI/2),(t+l)/2-o*Math.sin(a+Math.PI/2),e,t),n.closePath(),n.fill(),n.stroke()}(e.scale*Math.cos(t),e.scale*Math.sin(t),25,t+Math.PI/2,l)}else if("cookie"==e.name){l.fillStyle="#cca861",ya(0,0,e.scale,l),l.fillStyle="#937c4b";let t,i=4,a=2*Math.PI/i;for(let n=0;n<i;++n)t=Yt.randInt(e.scale/2.5,e.scale/1.7),ya(t*Math.cos(a*n),t*Math.sin(a*n),Yt.randInt(4,5),l,!0)}else if("cheese"==e.name){l.fillStyle="#f4f3ac",ya(0,0,e.scale,l),l.fillStyle="#c3c28b";let t,i=4,a=2*Math.PI/i;for(let n=0;n<i;++n)t=Yt.randInt(e.scale/2.5,e.scale/1.7),ya(t*Math.cos(a*n),t*Math.sin(a*n),Yt.randInt(4,5),l,!0)}else if("wood wall"==e.name||"stone wall"==e.name||"castle wall"==e.name){l.fillStyle="castle wall"==e.name?"#83898e":"wood wall"==e.name?"#a5974c":"#939393";let t="castle wall"==e.name?4:3;xa(l,t,1.1*e.scale,1.1*e.scale),l.fill(),l.stroke(),l.fillStyle="castle wall"==e.name?"#9da4aa":"wood wall"==e.name?"#c9b758":"#bcbcbc",xa(l,t,.65*e.scale,.65*e.scale),l.fill()}else if("spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){l.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";let t=.6*e.scale;xa(l,"spikes"==e.name?5:6,e.scale,t),l.fill(),l.stroke(),l.fillStyle="#a5974c",ya(0,0,t,l),l.fillStyle="#c9b758",ya(0,0,t/2,l,!0)}else if("windmill"==e.name||"faster windmill"==e.name||"power mill"==e.name)l.fillStyle="#a5974c",ya(0,0,e.scale,l),l.fillStyle="#c9b758",ka(0,0,1.5*e.scale,29,4,l),l.fillStyle="#a5974c",ya(0,0,.5*e.scale,l);else if("mine"==e.name)l.fillStyle="#939393",xa(l,3,e.scale,e.scale),l.fill(),l.stroke(),l.fillStyle="#bcbcbc",xa(l,3,.55*e.scale,.65*e.scale),l.fill();else if("sapling"==e.name)for(let t=0;t<2;++t){let i=e.scale*(t?.5:1);xa(l,7,i,.7*i),l.fillStyle=t?"#b4db62":"#9ebf57",l.fill(),t||l.stroke()}else if("pit trap"==e.name)l.fillStyle="#a5974c",xa(l,3,1.1*e.scale,1.1*e.scale),l.fill(),l.stroke(),l.fillStyle=Je,xa(l,3,.65*e.scale,.65*e.scale),l.fill();else if("boost pad"==e.name)l.fillStyle="#7e7f82",ba(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#dbd97d",function(e,t){t=t||Se;let i=e*(Math.sqrt(3)/2);t.beginPath(),t.moveTo(0,-i/2),t.lineTo(-e/2,i/2),t.lineTo(e/2,i/2),t.lineTo(0,-i/2),t.fill(),t.closePath()}(1*e.scale,l);else if("turret"==e.name){l.fillStyle="#a5974c",ya(0,0,e.scale,l),l.fill(),l.stroke(),l.fillStyle="#939393";let t=50;ba(0,-t/2,.9*e.scale,t,l),ya(0,0,.6*e.scale,l),l.fill(),l.stroke()}else if("platform"==e.name){l.fillStyle="#cebd5f";let t=4,i=2*e.scale,a=i/t,n=-e.scale/2;for(let s=0;s<t;++s)ba(n-a/2,0,a,2*e.scale,l),l.fill(),l.stroke(),n+=i/t}else"healing pad"==e.name?(l.fillStyle="#7e7f82",ba(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#db6e6e",ka(0,0,.65*e.scale,20,4,l,!0)):"spawn pad"==e.name?(l.fillStyle="#7e7f82",ba(0,0,2*e.scale,2*e.scale,l),l.fill(),l.stroke(),l.fillStyle="#71aad6",ya(0,0,.6*e.scale,l)):"blocker"==e.name?(l.fillStyle="#7e7f82",ya(0,0,e.scale,l),l.fill(),l.stroke(),l.rotate(Math.PI/4),l.fillStyle="#db6e6e",ka(0,0,.65*e.scale,20,4,l,!0)):"teleporter"==e.name&&(l.fillStyle="#7e7f82",ya(0,0,e.scale,l),l.fill(),l.stroke(),l.rotate(Math.PI/4),l.fillStyle="#d76edb",ya(0,0,.5*e.scale,l,!0));s=a,t||(Ga[n]=s)}return s}let za=[];function qa(e,t,i,a){if(t.lineWidth=Ze,Se.globalAlpha=.8,t.strokeStyle=Je,t.save(),t.translate(i,a),t.rotate(e.dir||gi()),"spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){t.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";var n=.6*e.scale;xa(t,"spikes"==e.name?5:6,e.scale,n),t.fill(),t.stroke(),t.fillStyle="#a5974c",ya(0,0,n,t),ee&&e.owner&&ee.sid!=e.owner.sid&&!ie.findAllianceBySid(e.owner.sid)?t.fillStyle="#a34040":t.fillStyle="#c9b758",ya(0,0,n/2,t,!0)}else if("turret"==e.name){ya(0,0,e.scale,t),t.fill(),t.stroke(),t.fillStyle="#939393";let i=50;ba(0,-i/2,.9*e.scale,i,t),ya(0,0,.6*e.scale,t),t.fill(),t.stroke()}else if("teleporter"==e.name)t.fillStyle="#7e7f82",ya(0,0,e.scale,t),t.fill(),t.stroke(),t.rotate(Math.PI/4),t.fillStyle="#d76edb",ya(0,0,.5*e.scale,t,!0);else if("platform"==e.name){t.fillStyle="#cebd5f";let i=4,a=2*e.scale,n=a/i,s=-e.scale/2;for(let l=0;l<i;++l)ba(s-n/2,0,n,2*e.scale,t),t.fill(),t.stroke(),s+=a/i}else"healing pad"==e.name?(t.fillStyle="#7e7f82",ba(0,0,2*e.scale,2*e.scale,t),t.fill(),t.stroke(),t.fillStyle="#db6e6e",ka(0,0,.65*e.scale,20,4,t,!0)):"spawn pad"==e.name?(t.fillStyle="#7e7f82",ba(0,0,2*e.scale,2*e.scale,t),t.fill(),t.stroke(),t.fillStyle="#71aad6",ya(0,0,.6*e.scale,t)):"blocker"==e.name?(t.fillStyle="#7e7f82",ya(0,0,e.scale,t),t.fill(),t.stroke(),t.rotate(Math.PI/4),t.fillStyle="#db6e6e",ka(0,0,.65*e.scale,20,4,t,!0)):"windmill"==e.name||"faster windmill"==e.name||"power mill"==e.name?(t.fillStyle="#a5974c",ya(0,0,e.scale,t),t.fillStyle="#c9b758",ka(0,0,1.5*e.scale,29,4,t),t.fillStyle="#a5974c",ya(0,0,.5*e.scale,t)):"pit trap"==e.name&&(t.fillStyle="#a5974c",xa(t,3,1.1*e.scale,1.1*e.scale),t.fill(),t.stroke(),ee&&e.owner&&ee.sid!=e.owner.sid&&!ie.findAllianceBySid(e.owner.sid)?t.fillStyle="#a34040":t.fillStyle=Je,xa(t,3,.65*e.scale,.65*e.scale),t.fill());t.restore()}function $a(e,t,i){return e+i>=0&&e-i<=Fe&&t+i>=0&&Ge}class Xa{constructor(e,t){this.init=function(e,t){this.scale=0,this.x=e,this.y=t,this.active=!0},this.update=function(e,i){this.active&&(this.scale+=.05*i,this.scale>=t?this.active=!1:(e.globalAlpha=1-Math.max(0,this.scale/t),e.beginPath(),e.arc(this.x/u.mapScale*Me.width,this.y/u.mapScale*Me.width,this.scale,0,2*Math.PI),e.stroke()))},this.color=e}}function Ua(e,t){Gt=ai.find((e=>!e.active)),Gt||(Gt=new Xa("#fff",u.mapPingScale),ai.push(Gt)),Gt.init(e,t)}let Ja=["https://cdn.discordapp.com/attachments/1001384433078779927/1149285738412769300/newawwddd.png","https://cdn.discordapp.com/attachments/1001384433078779927/1149285168780165170/100px-Crosshairs_Red.png"],Qa={},Za={},Ka=["crown","skull"];function en(){u.resetRender&&(Se.clearRect(0,0,Ie.width,Ie.height),Se.beginPath());{function v(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}if(ee){let P=ee.x,A=ee.y;if(we.dist){let H=[],R=[];for(let W=0;W<we.enemy.length;W++)H.push(we.enemy[W].x),R.push(we.enemy[W].y);let E=v(H),L=v(R);P=(6*ee.x+E)/7,A=(6*ee.y+L)/7}let B=Yt.getDistance(Le,We,P,A),C=Yt.getDirection(P,A,Le,We),O=Math.min(.005*B*Re,B);B>.05?(Le+=O*Math.cos(C),We+=O*Math.sin(C)):(Le=P,We=A)}else Le=u.mapScale/2,We=u.mapScale/2;for(var t=Ee-1e3/u.serverUpdateRate,i=0;i<se.length+ne.length;++i)if(ie=se[i]||ne[i-se.length],ie&&ie.visible)if(ie.forcePos)ie.x=ie.x2,ie.y=ie.y2,ie.dir=ie.d2;else{var a=ie.t2-ie.t1,n=(t-ie.t1)/a;ie.dt+=Re;var s=Math.min(1.7,ie.dt/170),l=ie.x2-ie.x1;ie.x=ie.x1+l*s,l=ie.y2-ie.y1,ie.y=ie.y1+l*s,ie.dir=Math.lerpAngle(ie.d2,ie.d1,Math.min(1.2,n))}let T=Le-Fe/2,I=We-Ge/2;if(u.snowBiomeTop-I<=0&&u.mapScale-u.snowBiomeTop-I>=Ge?(Se.fillStyle="#b6db66",Se.fillRect(0,0,Fe,Ge)):u.mapScale-u.snowBiomeTop-I<=0?(Se.fillStyle="#dbc666",Se.fillRect(0,0,Fe,Ge)):u.snowBiomeTop-I>=Ge?(Se.fillStyle="#fff",Se.fillRect(0,0,Fe,Ge)):u.snowBiomeTop-I>=0?(Se.fillStyle="#fff",Se.fillRect(0,0,Fe,u.snowBiomeTop-I),Se.fillStyle="#b6db66",Se.fillRect(0,u.snowBiomeTop-I,Fe,Ge-(u.snowBiomeTop-I))):(Se.fillStyle="#b6db66",Se.fillRect(0,0,Fe,u.mapScale-u.snowBiomeTop-I),Se.fillStyle="#dbc666",Se.fillRect(0,u.mapScale-u.snowBiomeTop-I,Fe,Ge-(u.mapScale-u.snowBiomeTop-I))),r){Se.lineWidth=4,Se.strokeStyle="#000",Se.globalAlpha=.06,Se.beginPath();for(let j=-Le;j<Fe;j+=F?60:120)j>0&&(Se.moveTo(j,0),Se.lineTo(j,Ge));for(let _=-We;_<Ge;_+=F?60:120)_>0&&(Se.moveTo(0,_),Se.lineTo(Fe,_));Se.stroke()}et||(Xe+=Ue*u.waveSpeed*Re,Xe>=u.waveMax?(Xe=u.waveMax,Ue=-1):Xe<=1&&(Xe=Ue=1),Se.globalAlpha=1,Se.fillStyle="#dbc666",ja(0,I,Se,u.riverPadding),Se.fillStyle="#91b2db",ja(0,I,Se,250*(Xe-1))),ee&&(Nt&&(Se.globalAlpha=1,Se.fillStyle="#fc5553",Se.font="100px Hammersmith One",Se.textBaseline="middle",Se.textAlign="center",Se.fillText("",Nt.x-T,Nt.y-I)),li.active&&(!li.array||li.chaseNear&&!fe.length||(Se.lineWidth=ee.scale/5,Se.globalAlpha=1,Se.strokeStyle="red",Se.beginPath(),li.array.forEach(((e,t)=>{let i=li.scale/li.grid*e.x,a=li.scale/li.grid*e.y,n={x:ee.x2-li.scale/2+i-T,y:ee.y2-li.scale/2+a-I};0==t?Se.moveTo(n.x,n.y):Se.lineTo(n.x,n.y)})),Se.stroke()))),ct&&Ai&&(Se.globalAlpha=1,Se.strokeStyle=Je,va(T,I,(Math.random(),Math.PI))),Se.globalAlpha=1,Se.strokeStyle=Je,M(-1,T,I),Se.globalAlpha=1,Se.lineWidth=Ze,Ha(0,T,I),Ta(T,I,0),Se.globalAlpha=1;for(let N=0;N<ne.length;++N)ie=ne[N],ie.active&&ie.visible&&(ie.animate(Re),Se.save(),Se.translate(ie.x-T,ie.y-I),Se.rotate(ie.dir+ie.dirPlus-Math.PI/2),Wa(ie,Se),Se.restore());if(M(0,T,I),Ha(1,T,I),M(1,T,I),Ta(T,I,1),M(2,T,I),M(3,T,I),Se.fillStyle="#000",Se.globalAlpha=.2,T<=0&&Se.fillRect(0,0,-T,Ge),u.mapScale-T<=Fe){let V=Math.max(0,-I);Se.fillRect(u.mapScale-T,V,Fe-(u.mapScale-T),Ge-V)}if(I<=0&&Se.fillRect(-T,0,Fe+T,-I),u.mapScale-I<=Ge){let Y=Math.max(0,-T),z=0;u.mapScale-T<=Fe&&(z=Fe-(u.mapScale-T)),Se.fillRect(Y,u.mapScale-I,Fe-Y-z,Ge-(u.mapScale-I))}Se.globalAlpha=1,Se.fillStyle="rgba(0, 0, 70, 0.55)",Se.fillRect(0,0,Fe,Ge);let S="#fff";Se.strokeStyle=Qe,Se.globalAlpha=1;for(let q=0;q<se.length+ne.length;++q)if(ie=se[q]||ne[q-se.length],ie.visible){if(Se.strokeStyle=Qe,(new Image).src="https://media.discordapp.net/attachments/904703116404998196/921671387716931625/trust-icon-png-17.jpg",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168619636653314208/my-image_3.png?ex=65526cd9&is=653ff7d9&hm=0cd608eef45a14e471d40e741377e326ba867c6abce074674cf5fac908f5ec5d&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168623440119468173/image-removebg-preview.png?ex=65527064&is=653ffb64&hm=9d561f7728d48339e2a3313e6699dd161d0e9e9b7838c286c4782f0028cc617b&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168642216835694752/kake.png?ex=655281e0&is=65400ce0&hm=2cf2838ea30190deb4229cc7d81e812580952b9275b6ab6c36b5856f43f8f2e3&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168631982524207195/image-removebg-preview_1.png?ex=65527858&is=65400358&hm=3de4f91a0e1d3db8b3a4bab0c2aa5e54f11839a588ee734b8ec44224642038e7&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168628842114592927/pngtree-cartoon-caveman-with-a-knife-cartoon-sticker-vector-png-image_6823861.png?ex=6552756c&is=6540006c&hm=6b88635db673a77d3ebad80e942d7eac036ada8646a393ddfef01fd876c2ab4c&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168636032254742719/caveman-carving-wheel-illustration-depicts-large-stone-36118049-removebg-preview.png?ex=65527c1e&is=6540071e&hm=fad21217c9276c602faa133f280d022765d7f1b3b460f9a0e8d2e18aa032ac92&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168628220615196754/caveman-warrior-illustration-depicts-holding-stick-wooden-shield-59300404.png?ex=655274d7&is=653fffd7&hm=723f4dcfaabcf67fc4e9636afb272fd737b698079f7e5dd27ba8b96226eb70a0&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168635375523221645/image-removebg-preview_2.png?ex=65527b81&is=65400681&hm=a078f11625afd90add9f829a25446d1b6398d6a293ce350ba079f57a6e0df516&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168636450879840276/image-removebg-preview_3.png?ex=65527c82&is=65400782&hm=fbb970c56a782cc59b74831ae5b5b065310fe136d777cd2c81fce9d2aa0cdc46&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168642455399317504/O1RD.png?ex=65528219&is=65400d19&hm=adea7f7cc215bdc5395ddd08fba036cd8faa063edd5ad47c8b6533a5e4f83601&",(new Image).src="https://cdn.discordapp.com/attachments/1164293764479725649/1168642884694716518/O1RD-removebg-preview.png?ex=65528280&is=65400d80&hm=2887ab4a1b782878bdc62aaa56929a33e016d86447739652e5ee2a7c6ae1407d&",10!=ie.skinIndex||ie==ee||ie.team&&ie.team==ee.team){let $;ie.name;if($=ie.isAI?(ie.team?"["+ie.team+"] ":"")+(ie.name||""):(ie.team?"["+ie.team+"] ":"")+(ie.name||"")+(ie==ee?" "+Math.round(ee.damageThreat):""),""!=$){if(Se.font=(ie.nameScale||24)+"px Hammersmith One",Se.fillStyle=(ie==ee||ie.team&&(ie.team,ee.team),S),Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=ie.nameScale?11:8,Se.lineJoin="round",Se.save(),Se.shadowColor="rgba(0, 0, 0, 0.5)",Se.shadowBlur=10,Se.shadowOffsetY=5,Se.fillText($,ie.x-T,ie.y-I-ie.scale-u.nameY),Se.restore(),Se.fillStyle="#fff",Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=0,Se.lineJoin="round",Se.strokeStyle=Qe,Se.lineWidth=5,ie.isLeader&&Za.crown.isLoaded){let Q=u.crownIconScale,Z=ie.x-T-Q/2-Se.measureText($).width/2-u.crownPad;Se.drawImage(Za.crown,Z,ie.y-I-ie.scale-u.nameY-Q/2-5,Q,Q)}if(1==ie.iconIndex&&Za.skull.isLoaded){let K=u.crownIconScale,te=ie.x-T-K/2+Se.measureText($).width/2+u.crownPad;Se.drawImage(Za.skull,te,ie.y-I-ie.scale-u.nameY-K/2-5,K,K)}if(ie.isPlayer&&ei.wait&&we==ie&&(ie.backupNobull?Qa[1].isLoaded:Qa[0].isLoaded)&&fe.length&&!F){let le=2.2*ie.scale;Se.drawImage(ie.backupNobull?Qa[1]:Qa[0],ie.x-T-le/2,ie.y-I-le/2,le,le)}if((ie.isPlayer||ie.isAI)&&ie.sid!==ee.sid){let oe;ie.isPlayer?oe=ie==ee||ie.team&&ie.team===ee.team?"#8ecc51":"#cc5151":ie.isAI&&(oe="#001eff")}const X=ie.x-T,U=ie.y-I+ie.scale+u.nameY-65,J=`HP: ${ie.health}/${ie.maxHealth}`;var o=Se;if(o.save(),o.shadowColor="rgba(0, 0, 0, 0.5)",o.shadowBlur=10,o.shadowOffsetY=5,o.font=(ie.nameScale||16)+"px Hammersmith One",o.fillStyle="#fff",o.textBaseline="middle",o.textAlign="center",o.lineWidth=8,o.lineJoin="round",o.strokeText(J,X,U),o.fillText(J,X,U),o.restore(),!ie.isPlayer){const ce=ie.x-T,de=ie.y-I+ie.scale+u.nameY,he=`HP: ${ie.health}/${ie.maxHealth}`;Se.save(),Se.shadowColor="rgba(0, 0, 0, 0.5)",Se.shadowBlur=10,Se.shadowOffsetY=5,Se.font=(ie.nameScale||16)+"px Hammersmith One",Se.fillStyle="#fff",Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=8,Se.lineJoin="round",Se.strokeText(he,ce,de),Se.fillText(he,ce,de),Se.restore()}if(ie.isPlayer){Se.globalAlpha=1;let pe={primary:null==ie.primaryIndex?1:(zt.weapons[ie.primaryIndex].speed-ie.reloads[ie.primaryIndex])/zt.weapons[ie.primaryIndex].speed,secondary:null==ie.secondaryIndex?1:(zt.weapons[ie.secondaryIndex].speed-ie.reloads[ie.secondaryIndex])/zt.weapons[ie.secondaryIndex].speed,turret:(2500-ie.reloads[53])/2500};ie.currentReloads||(ie.currentReloads={primary:pe.primary,secondary:pe.secondary,turret:pe.turret});const ue=.1;ie.currentReloads.primary=(1-ue)*ie.currentReloads.primary+ue*pe.primary,ie.currentReloads.secondary=(1-ue)*ie.currentReloads.secondary+ue*pe.secondary,ie.currentReloads.turret=(1-ue)*ie.currentReloads.turret+ue*pe.turret,Se.save(),Se.fillStyle=Qe,Se.roundRect(ie.x+7-T-u.healthBarPad,ie.y-I+ie.scale+u.nameY,u.healthBarWidth+2*u.healthBarPad,17,8),Se.fill(),Se.fillStyle=S,Se.roundRect(ie.x+7-T,ie.y-I+ie.scale+u.nameY+u.healthBarPad,u.healthBarWidth*ie.currentReloads.secondary,17-2*u.healthBarPad,7),Se.fill(),Se.restore(),Se.save(),Se.fillStyle=Qe,Se.roundRect(ie.x-6-T-u.healthBarWidth-u.healthBarPad,ie.y-I+ie.scale+u.nameY,u.healthBarWidth+2*u.healthBarPad,17,8),Se.fill(),Se.fillStyle=S,Se.roundRect(ie.x-6-T-u.healthBarWidth,ie.y-I+ie.scale+u.nameY+u.healthBarPad,u.healthBarWidth*ie.currentReloads.primary,17-2*u.healthBarPad,7),Se.fill(),Se.restore()}if(ie.isPlayer){let ge=new Image;if(ge.src="https://www.pngitem.com/pimgs/b/518-5184596_arrow-down-outline-flecha-hacia-abajo-png-transparent.png",!ie.isTeam(ee)){let xe={x:Oe/2,y:He/2},be=Math.min(1,100*Yt.getDistance(0,0,ee.x-ie.x,(ee.y-ie.y)*(16/9))/(u.maxScreenHeight/2)/xe.y),ke=xe.y*be,ve=ke*Math.cos(Yt.getDirect(ie,ee,0,0)),Te=ke*Math.sin(Yt.getDirect(ie,ee,0,0));Se.save(),Se.translate(ee.x-T+ve,ee.y-I+Te),Se.rotate(ie.aim2-Math.PI/2),Se.scale(-1,1),Se.drawImage(ge,-12,-12,24,24),Se.restore()}}if(ie.isPlayer){if(ie==ee&&ie.dir,Se.globalAlpha=1,Se.font="20px Hammersmith One",Se.fillStyle="#fff",Se.strokeStyle=Qe,Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=8,Se.lineJoin="round",(new Image).src="https://cdn.discordapp.com/attachments/1145395126185754716/1161386647028518932/left-arrow-removebg-preview-1.png?ex=65381c9a&is=6525a79a&hm=2c4011eb0b4fe5645a342d4f98d2475ef22e7d856644a0fff0966d5b66051db2&",!ie.isTeam(ee)){const Ae=Math.atan2(ie.y-ee.y,ie.x-ee.x),Be=Math.hypot(ie.y-ee.y,ie.x-ee.x),Ce=Math.min(Be-ee.scale,4*ee.scale);ee.x,Math.cos(Ae),ee.y,Math.sin(Ae)}Se.globalAlpha=1,Se.font="20px Hammersmith One",Se.fillStyle="#fff",Se.strokeStyle=Qe,Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=8,Se.lineJoin="round";Se.globalAlpha=1,Se.font="25px Hammersmith One",Se.fillStyle="#fff",Se.strokeStyle=Qe,Se.textBaseline="middle",Se.textAlign="center",Se.lineWidth=8,Se.lineJoin="round";let Pe=u.crownIconScale;ie.x,Se.measureText($).width,u.crownPad,ie.iconIndex;if(Se.strokeText(45==ie.skinIndex&&ie.shameTimer>0?ie.shameTimer:ie.shameCount,ie.x-T,ie.y-I+ie.scale+u.nameY+37),Se.fillText(45==ie.skinIndex&&ie.shameTimer>0?ie.shameTimer:ie.shameCount,ie.x-T,ie.y-I+ie.scale+u.nameY+37),"pre2"==m("predictType").value){Se.lineWidth=3,Se.strokeStyle="#cc5151",Se.globalAlpha=1,Se.beginPath();let je={x:ie.x2-T,y:ie.y2-I};Se.moveTo(ie.x-T,ie.y-I),Se.lineTo(je.x,je.y),Se.stroke()}else if("pre3"==m("predictType").value){Se.lineWidth=3,Se.strokeStyle="#cc5151",Se.globalAlpha=1,Se.beginPath();let _e={x:ie.x3-T,y:ie.y3-I};Se.moveTo(ie.x-T,ie.y-I),Se.lineTo(_e.x,_e.y),Se.stroke()}}}}}function M(e,t,i){let a,n,s;re.forEach((l=>{ie=l,ie.alive&&(n=ie.x+ie.xWiggle-t,s=ie.y+ie.yWiggle-i,0==e&&ie.update(Re),Se.globalAlpha=ie.alpha,ie.layer==e&&$a(n,s,ie.scale+(ie.blocker||0))&&(ie.isItem?(a=!ie.dmg&&!ie.trap||ie.isTeamObject(ee)?Ya(ie):function(e){let t=za[e.id];if(!t){let i=0,a=document.createElement("canvas");a.width=a.height=2.5*e.scale+Ze+(zt.list[e.id].spritePadding||0)+i;let n=a.getContext("2d");if(n.translate(a.width/2,a.height/2),n.rotate(Math.PI/2),n.strokeStyle=Je,n.lineWidth=Ze,"spikes"==e.name||"greater spikes"==e.name||"poison spikes"==e.name||"spinning spikes"==e.name){n.fillStyle="poison spikes"==e.name?"#7b935d":"#939393";let t=.6*e.scale;xa(n,"spikes"==e.name?5:6,e.scale,t),n.fill(),n.stroke(),n.fillStyle="#a5974c",ya(0,0,t,n),n.fillStyle="#cc5151",ya(0,0,t/2,n,!0)}else"pit trap"==e.name&&(n.fillStyle="#a5974c",xa(n,3,1.1*e.scale,1.1*e.scale),n.fill(),n.stroke(),n.fillStyle="#cc5151",xa(n,3,.65*e.scale,.65*e.scale),n.fill());t=a,za[e.id]=t}return t}(ie),Se.save(),Se.translate(n,s),Se.rotate(ie.dir),ie.active||Se.scale(ie.visScale/ie.scale,ie.visScale/ie.scale),Se.drawImage(a,-a.width/2,-a.height/2),ie.blocker&&(Se.strokeStyle="#db6e6e",Se.globalAlpha=.3,Se.lineWidth=6,ya(0,0,ie.blocker,Se,!1,!0)),Se.restore()):(a=Fa(ie),Se.drawImage(a,n-a.width/2,s-a.height/2))))})),0==e&&dt.length&&d&&dt.forEach((e=>{n=e.x-t,s=e.y-i,D(e,n,s)}))}function D(e,t,i){qa(e,Se,t,i)}if(ye.autoPush&&ye.pushData){Se.lineWidth=5,Se.globalAlpha=1,Se.beginPath(),Se.strokeStyle="white";var c=ee.x-T,h=ee.y-I,p=ye.pushData.x2-T,f=ye.pushData.y2-I,g=ye.pushData.x-T,y=ye.pushData.y-I;Se.moveTo(c,h),Se.lineTo(p,f),Se.lineTo(g,y),Se.stroke();var x=g-c,b=y-h,k=Math.sqrt(x*x+b*b)/100*100;let Ne;k=Math.min(100,Math.max(0,k)),Se.fillStyle="white",Se.strokeStyle="black",Se.lineWidth=5,Se.font="30px Hammersmith One";let Ve=me.filter((e=>e.trap&&e.active&&e.isTeamObject(ee)&&Yt.getDist(e,we,0,2)<=we.scale+e.getScale()+5)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0];Ve&&(Ne=me.filter((e=>e.dmg&&e.active&&e.isTeamObject(ee)&&Yt.getDist(e,Ve,0,0)<=we.scale+Ve.scale+e.scale)).sort((function(e,t){return Yt.getDist(e,we,0,2)-Yt.getDist(t,we,0,2)}))[0]);let Ye=(ee.x-T+we.x-T)/2,ze=(ee.y-I+we.y-I)/2;Se.moveTo(ee.x-T,ee.y-I),Se.strokeText(we.aim2,Ye,ze),Se.fillText(we.aim2,Ye,ze)}Se.globalAlpha=1,Zt.update(Re,Se,T,I);for(let qe=0;qe<se.length;++qe)if(ie=se[qe],ie.visible){if(ie.chatCountdown>0){ie.chatCountdown-=Re,ie.chatCountdown<=0&&(ie.chatCountdown=0),Se.font="32px Hammersmith One";let $e=Se.measureText(ie.chatMessage);Se.textBaseline="middle",Se.textAlign="center";let Ke=ie.x-T,tt=ie.y-ie.scale-I-90,it=47,at=$e.width+17;Se.fillStyle="rgba(0,0,0,0.2)",Se.roundRect(Ke-at/2,tt-it/2,at,it,6),Se.fill(),Se.fillStyle="#fff",Se.fillText(ie.chatMessage,Ke,tt)}if(ie.chat.count>0)if(F)ie.chat.count=0;else{ie.chat.count-=Re,ie.chat.count<=0&&(ie.chat.count=0),Se.font="32px Hammersmith One";let nt=Se.measureText(ie.chat.message);Se.textBaseline="middle",Se.textAlign="center";let st=ie.x-T,lt=ie.y-ie.scale-I+180,ot=47,rt=nt.width+17;Se.fillStyle="rgba(0,0,0,0.2)",Se.roundRect(st-rt/2,lt-ot/2,rt,ot,6),Se.fill(),Se.fillStyle="#ffffff99",Se.fillText(ie.chat.message,st,lt)}}ae.length&&ae.filter((e=>e.active)).forEach((e=>{if(e.alive?(e.alpha-=Re/5e3,e.alpha<=0&&(e.alpha=0,e.active=!1)):e.alpha<=1&&(e.alpha+=Re/250,e.alpha>=1&&(e.alpha=1,e.alive=!0)),e.active){Se.font="20px Hammersmith One";let t=Se.measureText(e.chat);Se.textBaseline="middle",Se.textAlign="center";let i=e.owner.x-T,a=e.owner.y-e.owner.scale-I-90,n=47,s=t.width+17;Se.globalAlpha=e.alpha,Se.fillStyle=e.owner.isTeam(ee)?"rgba(255,215,0,1)":"#cc5151",Se.strokeStyle="rgb(25, 25, 25)",Se.lineWidth=5,Se.fillStyle="rgba(0,0,0,0.4)",Se.strokeStyle="rgba(0,0,0,0.0)",Se.roundRect(i-s/2,a-n/2,s,n,6),Se.stroke(),Se.fill(),Se.fillStyle="#fff",Se.strokeStyle="#000",Se.strokeText(e.chat,i,a),Se.fillText(e.chat,i,a),e.y-=Re/100}}))}Se.globalAlpha=1,function(t){if(ee&&ee.alive){w.innerText=G,De.clearRect(0,0,Me.width,Me.height),De.lineWidth=4;for(let e=0;e<ai.length;++e)Gt=ai[e],De.strokeStyle=Gt.color,Gt.update(De,t);if(De.globalAlpha=1,De.fillStyle="#ff0000",ni.length){De.fillStyle="#abcdef",De.font="34px Hammersmith One",De.textBaseline="middle",De.textAlign="center";for(let e=0;e<ni.length;)De.fillText("!",ni[e].x/u.mapScale*Me.width,ni[e].y/u.mapScale*Me.height),e+=2}if(De.globalAlpha=1,De.fillStyle="#fff",ya(ee.x/u.mapScale*Me.width,ee.y/u.mapScale*Me.height,7,De,!0),De.fillStyle="rgba(255,255,255,0.35)",ee.team&&Ft)for(let e=0;e<Ft.length;)ya(Ft[e]/u.mapScale*Me.width,Ft[e+1]/u.mapScale*Me.height,7,De,!0),e+=2;e.length&&e.forEach((e=>{e.inGame&&(De.globalAlpha=1,De.strokeStyle="#cc5151",ya(e.x2/u.mapScale*Me.width,e.y2/u.mapScale*Me.height,7,De,!1,!0))})),Nt&&(De.fillStyle="#fc5553",De.font="34px Hammersmith One",De.textBaseline="middle",De.textAlign="center",De.fillText("x",Nt.x/u.mapScale*Me.width,Nt.y/u.mapScale*Me.height)),ii&&(De.fillStyle="#fff",De.font="34px Hammersmith One",De.textBaseline="middle",De.textAlign="center",De.fillText("x",ii.x/u.mapScale*Me.width,ii.y/u.mapScale*Me.height))}}(Re)}!function(){for(let e=0;e<Ka.length;++e){let t=new Image;t.onload=function(){this.isLoaded=!0},t.src="./../img/icons/"+Ka[e]+".png",Za[Ka[e]]=t}for(let e=0;e<Ja.length;++e){let t=new Image;t.onload=function(){this.isLoaded=!0},t.src=Ja[e],Qa[e]=t}}(),window.requestAnimFrame=function(){return null};var tn;function an(e){m("instaType").disabled=e,m("antiBullType").disabled=e,m("predictType").disabled=e,m("visualType").disabled=e}window.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/240)},tn=u.mapScale/2,qt.add(0,tn,tn+200,0,u.treeScales[3],0),qt.add(1,tn,tn-480,0,u.treeScales[3],0),qt.add(2,tn+300,tn+450,0,u.treeScales[3],0),qt.add(3,tn-950,tn-130,0,u.treeScales[2],0),qt.add(4,tn-750,tn-400,0,u.treeScales[3],0),qt.add(5,tn-700,tn+400,0,u.treeScales[2],0),qt.add(6,tn+800,tn-200,0,u.treeScales[3],0),qt.add(7,tn-260,tn+340,0,u.bushScales[3],1),qt.add(8,tn+760,tn+310,0,u.bushScales[3],1),qt.add(9,tn-800,tn+100,0,u.bushScales[3],1),qt.add(10,tn-800,tn+300,0,zt.list[4].scale,zt.list[4].id,zt.list[10]),qt.add(11,tn+650,tn-390,0,zt.list[4].scale,zt.list[4].id,zt.list[10]),qt.add(12,tn-400,tn-450,0,u.rockScales[2],2),function e(){Ee=performance.now(),Re=Ee-Ve,Ve=Ee;let t=performance.now(),i=t-q.last;i>=1e3&&(q.ltime=q.time*(1e3/i),q.last=t,q.time=0),q.time++,m("pingFps").innerHTML=`${window.pingTime}ms | Frames: ${Yt.round(q.ltime,10)}`,m("packetStatus").innerHTML=G,en(),rAF(e)}(),an(F);let nn={};window.debug=function(){ye.waitHit=0,ye.autoAim=!1,ei.isTrue=!1,Kt.inTrap=!1,Ga=[],za=[],Na=[]},window.toggleNight=function(){clearTimeout(nn),"night1"==S.style.animationName?(S.style.animationName="night2",S.style.opacity=0,nn=setTimeout((()=>{S.style.display="none"}),1e3*parseFloat(S.style.animationDuration))):(S.style.animationName="night1",S.style.opacity=.35,S.style.display="block"),Ke=!Ke,Ga=[],za=[],Na=[]},window.wasdMode=function(){F=!F,an(F)},window.startGrind=function(){if(c)for(let e=0;e<2*Math.PI;e+=Math.PI/2)Dt(ee.getItemType(22),e)},window.resBuild=function(){re.length&&(re.forEach((e=>{e.breakObj=!1})),ue=[])};let sn=["adorable-eight-guppy","galvanized-bittersweet-windshield"],ln=0;window.connectFillBots=function(){x=[],ln=0;for(let e=0;e<sn.length;e++){let t=new WebSocket(`wss://${sn[e]}.glitch.me`);t.binaryType="arraybuffer",t.onopen=function(){t.ssend=function(e){let i=Array.prototype.slice.call(arguments,1),a=window.msgpack.encode([e,i]);t.send(a)};for(let e=0;e<4;e++)window.grecaptcha.execute("6LfahtgjAAAAAF8SkpjyeYMcxMdxIaQeh-VoPATP",{action:"homepage"}).then((function(e){let i=W.url.split("wss://")[1].split("?")[0];t.ssend("bots","wss://"+i+"?token=re:"+encodeURIComponent(e),ln),x.push([t]),ln++}))},t.onmessage=function(e){let t=new Uint8Array(e.data),i=window.msgpack.decode(t);i[0];t=i[1]}}},window.destroyFillBots=function(){x.forEach((e=>{e[0].close()})),x=[]},window.tryConnectBots=function(){for(let t=0;t<(e.length<3?3:4);t++)window.grecaptcha.execute("6LfahtgjAAAAAF8SkpjyeYMcxMdxIaQeh-VoPATP",{action:"homepage"}).then((function(e){botSpawn(e)}))},window.destroyBots=function(){e.forEach((e=>{e.closeSocket=!0})),e=[]},window.toggleBotsCircle=function(){ee.circle=!ee.circle},window.toggleVisual=function(){u.anotherVisual=!u.anotherVisual,re.forEach((e=>{e.active&&(e.dir=e.lastDir)}))},window.prepareUI=function(e){pi(),Yt.removeAllChildren(_e);for(let e=0;e<zt.weapons.length+zt.list.length;++e)!function(e){Yt.generateElement({id:"actionBarItem"+e,class:"actionBarItem",style:"display:none",onmouseout:function(){hi()},parent:_e})}(e);for(let t=0;t<zt.list.length+zt.weapons.length;++t)!function(t){let i=document.createElement("canvas");i.width=i.height=66;let a=i.getContext("2d");if(a.translate(i.width/2,i.height/2),a.imageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,zt.weapons[t]){a.rotate(Math.PI/4+Math.PI);let n=new Image;Oa[zt.weapons[t].src]=n,n.onload=function(){this.isLoaded=!0;let e=1/(this.height/this.width),n=zt.weapons[t].iPad||1;a.drawImage(this,-i.width*n*u.iconPad*e/2,-i.height*n*u.iconPad/2,i.width*n*e*u.iconPad,i.height*n*u.iconPad),a.fillStyle="rgba(0, 0, 70, 0.1)",a.globalCompositeOperation="source-atop",a.fillRect(-i.width/2,-i.height/2,i.width,i.height),m("actionBarItem"+t).style.backgroundImage="url("+i.toDataURL()+")"},n.src="./../img/weapons/"+zt.weapons[t].src+".png";let s=m("actionBarItem"+t);s.onmouseover=Yt.checkTrusted((function(){hi(zt.weapons[t],!0)})),s.onclick=Yt.checkTrusted((function(){xt(e.weapons[zt.weapons[t].type])})),Yt.hookTouchEvents(s)}else{let n=Ya(zt.list[t-zt.weapons.length],!0),s=Math.min(i.width-u.iconPadding,n.width);a.globalAlpha=1,a.drawImage(n,-s/2,-s/2,s,s),a.fillStyle="rgba(0, 0, 70, 0.1)",a.globalCompositeOperation="source-atop",a.fillRect(-s/2,-s/2,s,s),m("actionBarItem"+t).style.backgroundImage="url("+i.toDataURL()+")";let l=m("actionBarItem"+t);l.onmouseover=Yt.checkTrusted((function(){hi(zt.list[t-zt.weapons.length])})),l.onclick=Yt.checkTrusted((function(){yt(e.items[e.getItemType(t-zt.weapons.length)])})),Yt.hookTouchEvents(l)}}(t)},window.toggleNight()},webgl_test:()=>{}};if(g){for(let e in g){let t=g[e];"function"==typeof t&&t()}window.enableHack=function(){t||(t=!0,g.main())}}}();